{"ast":null,"code":"import React,{useState,useMemo}from'react';import usePatientData from'../../hooks/usePatientData';import ChartContainer from'../ChartContainer';import Legend from'../Legend';import InfoBox from'../InfoBox';import'./GlucoseChart.css';import'../ChartStyles.css';// --- Constants ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DAYS_OF_WEEK=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];const RANGE_COLORS={'below range':'var(--chart-color-warning)','in range':'var(--chart-color-good)','above range':'var(--chart-color-danger)'};const TIME_LABELS=['12am','12pm','12am'];const DEFAULT_WEEK=new Date(2025,4,1);const getChartConfig=isExpanded=>({width:isExpanded?480:400,height:isExpanded?380:360,padding:{top:70,right:30,bottom:60,left:50},dayWidth:isExpanded?54:45,yAxisLabels:[0,4,8,12],yAxisRange:12,fontSize:{yAxis:12,yAxisTitle:14,timeLabel:30,dayLabel:30,dateLabel:30},barWidth:isExpanded?8:6});// --- Helper Functions ---\nconst getPointColor=range=>RANGE_COLORS[range.toLowerCase()]||RANGE_COLORS['in range'];const isPreMeal=measurementType=>measurementType==='Pre meal';const getTimePosition=(date,dayIndex,config)=>{const timeInHours=date.getHours()+date.getMinutes()/60;const timeRatio=timeInHours/24;const dayStart=config.padding.left+dayIndex*config.dayWidth;return dayStart+timeRatio*(config.dayWidth-10)+5;};// --- Chart Sub-components ---\nconst YAxis=_ref=>{let{config}=_ref;const chartHeight=config.height-config.padding.top-config.padding.bottom;const chartWidth=config.width-config.padding.left-config.padding.right;return/*#__PURE__*/_jsxs(\"g\",{className:\"y-axis\",children:[/*#__PURE__*/_jsx(\"text\",{className:\"y-axis-title\",x:-(config.padding.top+chartHeight/2),y:config.padding.left/2-10,transform:\"rotate(-90)\",textAnchor:\"middle\",children:\"mmol/L\"}),config.yAxisLabels.map(label=>{const y=config.padding.top+chartHeight-label/config.yAxisRange*chartHeight;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-horizontal\",x1:config.padding.left,y1:y,x2:config.padding.left+chartWidth,y2:y}),/*#__PURE__*/_jsx(\"text\",{className:\"chart-tick-label\",x:config.padding.left-10,y:y,dy:\"0.3em\",textAnchor:\"end\",children:label})]},label);})]});};const XAxisAndGrid=_ref2=>{let{config,startOfWeek}=_ref2;return/*#__PURE__*/_jsxs(\"g\",{className:\"x-axis-grid\",children:[DAYS_OF_WEEK.map((day,i)=>{const x=config.padding.left+i*config.dayWidth;const currentDay=new Date(startOfWeek);currentDay.setDate(startOfWeek.getDate()+i);// Tick positions\nconst startTickX=x;const middleTickX=x+config.dayWidth/2;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical\",x1:x,y1:config.padding.top,x2:x,y2:config.height-config.padding.bottom}),/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:startTickX,y1:config.height-config.padding.bottom,x2:startTickX,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:middleTickX,y1:config.height-config.padding.bottom,x2:middleTickX,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:startTickX,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},children:\"12a\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:middleTickX,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},children:\"12p\"}),/*#__PURE__*/_jsx(\"text\",{className:\"x-axis-day-label\",x:x+config.dayWidth/2,y:config.height-config.padding.bottom+40,textAnchor:\"middle\",fontSize:config.fontSize.dayLabel,style:{fontSize:'8px'},children:day}),/*#__PURE__*/_jsx(\"text\",{className:\"x-axis-date-label\",x:x+config.dayWidth/2,y:config.height-config.padding.bottom+58,textAnchor:\"middle\",fontSize:config.fontSize.dateLabel,style:{fontSize:'8px'},children:currentDay.getDate()})]},i);}),/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:config.padding.left+DAYS_OF_WEEK.length*config.dayWidth,y1:config.height-config.padding.bottom,x2:config.padding.left+DAYS_OF_WEEK.length*config.dayWidth,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:config.padding.left+DAYS_OF_WEEK.length*config.dayWidth,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},children:\"12a\"})]});};const DataPoints=_ref3=>{let{weekData,config}=_ref3;const chartHeight=config.height-config.padding.top-config.padding.bottom;return/*#__PURE__*/_jsx(\"g\",{className:\"data-points\",children:weekData.map((reading,index)=>{const dayIndex=reading.date.getDay();const x=getTimePosition(reading.date,dayIndex,config);const y=config.padding.top+chartHeight-reading.value/config.yAxisRange*chartHeight;const color=getPointColor(reading.range);const isPre=isPreMeal(reading.measurementType);// Enhanced tooltip text\nconst tooltipText=\"Glucose: \".concat(reading.value,\" mmol/L - \").concat(reading.range,\" - \").concat(reading.measurementType,\" - \").concat(reading.date.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}),\" - \").concat(reading.date.toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'}));return/*#__PURE__*/_jsx(\"rect\",{x:x-config.barWidth/2,y:y,width:config.barWidth,height:reading.value/config.yAxisRange*chartHeight,fill:isPre?'none':color,stroke:color,strokeWidth:isPre?2:1,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"title\",{children:tooltipText})},index);})});};const Chart=_ref4=>{let{weekData,isExpanded,startOfWeek}=_ref4;const config=getChartConfig(isExpanded);return/*#__PURE__*/_jsx(\"div\",{className:\"glucose-svg-container\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"100%\",height:\"100%\",viewBox:\"0 0 \".concat(config.width,\" \").concat(config.height),className:\"glucose-svg\",children:[/*#__PURE__*/_jsx(\"rect\",{width:config.width,height:config.height,fill:\"white\"}),/*#__PURE__*/_jsx(XAxisAndGrid,{config:config,startOfWeek:startOfWeek}),/*#__PURE__*/_jsx(YAxis,{config:config}),/*#__PURE__*/_jsx(DataPoints,{weekData:weekData,config:config})]})});};// --- Main Component ---\nconst GlucoseChart=_ref5=>{let{patientId,isExpanded=false,onExpand,isPhysicianView=false}=_ref5;const healthRangeLegendItems=Object.entries(RANGE_COLORS).map(_ref6=>{let[label,color]=_ref6;return{label:label.charAt(0).toUpperCase()+label.slice(1),color};});const mealTimeLegendItems=[{label:'Pre-meal',shape:'outlined',shapeStyle:{borderColor:'var(--chart-color-text-secondary)'},description:'Blood glucose measurements taken before meals'},{label:'Post-meal',shape:'filled',shapeStyle:{backgroundColor:'var(--chart-color-text-secondary)'},description:'Blood glucose measurements taken after meals'}];const{glucoseData,loading,error}=usePatientData(patientId,'glucose');const[currentWeek,setCurrentWeek]=useState(DEFAULT_WEEK);const handlePrevWeek=()=>setCurrentWeek(prev=>new Date(new Date(prev).setDate(prev.getDate()-7)));const handleNextWeek=()=>setCurrentWeek(prev=>new Date(new Date(prev).setDate(prev.getDate()+7)));const startOfWeek=new Date(currentWeek);startOfWeek.setDate(startOfWeek.getDate()-startOfWeek.getDay());startOfWeek.setHours(0,0,0,0);const endOfWeek=new Date(startOfWeek);endOfWeek.setDate(endOfWeek.getDate()+6);endOfWeek.setHours(23,59,59,999);const weekData=glucoseData.filter(d=>d.date>=startOfWeek&&d.date<=endOfWeek);// Calculate summary statistics for physician view\nconst weekSummary=useMemo(()=>{if(!weekData.length)return null;const readings=weekData.filter(d=>d.value&&d.value>0);const preMealReadings=readings.filter(d=>d.measurementType==='Pre meal');const postMealReadings=readings.filter(d=>d.measurementType==='Post meal');const avgGlucose=readings.length>0?(readings.reduce((sum,val)=>sum+val.value,0)/readings.length).toFixed(1):0;const avgPreMeal=preMealReadings.length>0?(preMealReadings.reduce((sum,val)=>sum+val.value,0)/preMealReadings.length).toFixed(1):0;const avgPostMeal=postMealReadings.length>0?(postMealReadings.reduce((sum,val)=>sum+val.value,0)/postMealReadings.length).toFixed(1):0;const highReadings=readings.filter(d=>d.range.toLowerCase()==='above range').length;const lowReadings=readings.filter(d=>d.range.toLowerCase()==='below range').length;const inRangeReadings=readings.filter(d=>d.range.toLowerCase()==='in range').length;const rangePercentage=readings.length>0?(inRangeReadings/readings.length*100).toFixed(0):0;const daysWithReadings=new Set(weekData.map(d=>d.date.toDateString())).size;return{avgGlucose,avgPreMeal,avgPostMeal,highReadings,lowReadings,inRangeReadings,rangePercentage,daysWithReadings,totalReadings:readings.length};},[weekData]);const formatDateRange=(start,end)=>{const startStr=start.toLocaleDateString('en-US',{month:'short',day:'numeric'});const endStr=end.toLocaleDateString('en-US',{month:'short',day:'numeric'});return\"\".concat(startStr,\" to \").concat(endStr);};return/*#__PURE__*/_jsx(ChartContainer,{title:\"Blood Glucose\",icon:\"\\uD83E\\uDE78\",isLoading:loading,error:error,noData:!loading&&!error&&(!glucoseData||glucoseData.length===0),isExpanded:isExpanded,onExpand:onExpand,onPrev:handlePrevWeek,onNext:handleNextWeek,navigationLabel:formatDateRange(startOfWeek,endOfWeek),children:/*#__PURE__*/_jsxs(\"div\",{className:\"glucose-chart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glucose-legends-wrapper\",children:[/*#__PURE__*/_jsx(Legend,{title:\"Health Range\",items:healthRangeLegendItems}),/*#__PURE__*/_jsx(Legend,{title:\"Prandial State\",items:mealTimeLegendItems})]}),/*#__PURE__*/_jsx(\"div\",{className:\"glucose-chart-wrapper \".concat(isExpanded?'expanded':''),children:/*#__PURE__*/_jsx(Chart,{weekData:weekData,isExpanded:isExpanded,startOfWeek:startOfWeek})}),isPhysicianView&&weekSummary?/*#__PURE__*/_jsxs(\"div\",{className:\"chart-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Week Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Average Glucose:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.avgGlucose,\" mmol/L\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Pre-meal Average:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.avgPreMeal,\" mmol/L\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Post-meal Average:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.avgPostMeal,\" mmol/L\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"In Target Range:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value in-range\",children:[weekSummary.rangePercentage,\"% (\",weekSummary.inRangeReadings,\"/\",weekSummary.totalReadings,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"High/Low Readings:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.highReadings,\" high, \",weekSummary.lowReadings,\" low\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Reading Days:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.daysWithReadings,\"/7 days\"]})]})]})]}):!isPhysicianView?/*#__PURE__*/_jsx(InfoBox,{title:\"Blood Glucose Information\",content:\"These are general targets for adults with diabetes: For blood sugar taken before a meal, the target is 4.0 to 7.0 mmol/L. For blood sugar two hours after a meal, the target is 5.0 to 10.0 mmol/L. The general target for an A1C is 7.0% or less. Always consult your healthcare provider to confirm the right targets for you.\"}):null]})});};export default GlucoseChart;","map":{"version":3,"names":["React","useState","useMemo","usePatientData","ChartContainer","Legend","InfoBox","jsx","_jsx","jsxs","_jsxs","DAYS_OF_WEEK","RANGE_COLORS","TIME_LABELS","DEFAULT_WEEK","Date","getChartConfig","isExpanded","width","height","padding","top","right","bottom","left","dayWidth","yAxisLabels","yAxisRange","fontSize","yAxis","yAxisTitle","timeLabel","dayLabel","dateLabel","barWidth","getPointColor","range","toLowerCase","isPreMeal","measurementType","getTimePosition","date","dayIndex","config","timeInHours","getHours","getMinutes","timeRatio","dayStart","YAxis","_ref","chartHeight","chartWidth","className","children","x","y","transform","textAnchor","map","label","x1","y1","x2","y2","dy","XAxisAndGrid","_ref2","startOfWeek","day","i","currentDay","setDate","getDate","startTickX","middleTickX","stroke","strokeWidth","style","length","DataPoints","_ref3","weekData","reading","index","getDay","value","color","isPre","tooltipText","concat","toLocaleTimeString","hour","minute","hour12","toLocaleDateString","weekday","month","fill","cursor","Chart","_ref4","viewBox","GlucoseChart","_ref5","patientId","onExpand","isPhysicianView","healthRangeLegendItems","Object","entries","_ref6","charAt","toUpperCase","slice","mealTimeLegendItems","shape","shapeStyle","borderColor","description","backgroundColor","glucoseData","loading","error","currentWeek","setCurrentWeek","handlePrevWeek","prev","handleNextWeek","setHours","endOfWeek","filter","d","weekSummary","readings","preMealReadings","postMealReadings","avgGlucose","reduce","sum","val","toFixed","avgPreMeal","avgPostMeal","highReadings","lowReadings","inRangeReadings","rangePercentage","daysWithReadings","Set","toDateString","size","totalReadings","formatDateRange","start","end","startStr","endStr","title","icon","isLoading","noData","onPrev","onNext","navigationLabel","items","content"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local/MCC_digital_health_data_visualizations/src/components/patient_charts/GlucoseChart.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport usePatientData from '../../hooks/usePatientData';\r\nimport ChartContainer from '../ChartContainer';\r\nimport Legend from '../Legend';\r\nimport InfoBox from '../InfoBox';\r\nimport './GlucoseChart.css';\r\nimport '../ChartStyles.css';\r\n\r\n// --- Constants ---\r\nconst DAYS_OF_WEEK = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\nconst RANGE_COLORS = {\r\n  'below range': 'var(--chart-color-warning)',\r\n  'in range': 'var(--chart-color-good)',\r\n  'above range': 'var(--chart-color-danger)',\r\n};\r\nconst TIME_LABELS = ['12am', '12pm', '12am'];\r\nconst DEFAULT_WEEK = new Date(2025, 4, 1);\r\n\r\nconst getChartConfig = (isExpanded) => ({\r\n  width: isExpanded ? 480 : 400,\r\n  height: isExpanded ? 380 : 360,\r\n  padding: { top: 70, right: 30, bottom: 60, left: 50 },\r\n  dayWidth: isExpanded ? 54 : 45,\r\n  yAxisLabels: [0, 4, 8, 12],\r\n  yAxisRange: 12,\r\n  fontSize: {\r\n    yAxis: 12,\r\n    yAxisTitle: 14,\r\n    timeLabel: 30,\r\n    dayLabel: 30,\r\n    dateLabel: 30,\r\n  },\r\n  barWidth: isExpanded ? 8 : 6,\r\n});\r\n\r\n// --- Helper Functions ---\r\nconst getPointColor = (range) => RANGE_COLORS[range.toLowerCase()] || RANGE_COLORS['in range'];\r\nconst isPreMeal = (measurementType) => measurementType === 'Pre meal';\r\nconst getTimePosition = (date, dayIndex, config) => {\r\n  const timeInHours = date.getHours() + date.getMinutes() / 60;\r\n  const timeRatio = timeInHours / 24;\r\n  const dayStart = config.padding.left + dayIndex * config.dayWidth;\r\n  return dayStart + (timeRatio * (config.dayWidth - 10)) + 5;\r\n};\r\n\r\n// --- Chart Sub-components ---\r\n\r\nconst YAxis = ({ config }) => {\r\n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\r\n  const chartWidth = config.width - config.padding.left - config.padding.right;\r\n\r\n  return (\r\n    <g className=\"y-axis\">\r\n      <text\r\n        className=\"y-axis-title\"\r\n        x={-(config.padding.top + chartHeight / 2)}\r\n        y={config.padding.left / 2 - 10}\r\n        transform=\"rotate(-90)\"\r\n        textAnchor=\"middle\"\r\n      >\r\n        mmol/L\r\n      </text>\r\n      {config.yAxisLabels.map(label => {\r\n        const y = config.padding.top + chartHeight - (label / config.yAxisRange) * chartHeight;\r\n        return (\r\n          <g key={label}>\r\n            <line\r\n              className=\"chart-grid-line-horizontal\"\r\n              x1={config.padding.left}\r\n              y1={y}\r\n              x2={config.padding.left + chartWidth}\r\n              y2={y}\r\n            />\r\n            <text className=\"chart-tick-label\" x={config.padding.left - 10} y={y} dy=\"0.3em\" textAnchor=\"end\">{label}</text>\r\n          </g>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n};\r\n\r\nconst XAxisAndGrid = ({ config, startOfWeek }) => (\r\n  <g className=\"x-axis-grid\">\r\n    {DAYS_OF_WEEK.map((day, i) => {\r\n      const x = config.padding.left + i * config.dayWidth;\r\n      const currentDay = new Date(startOfWeek);\r\n      currentDay.setDate(startOfWeek.getDate() + i);\r\n      \r\n      // Tick positions\r\n      const startTickX = x;\r\n      const middleTickX = x + config.dayWidth / 2;\r\n      \r\n      return (\r\n        <g key={i}>\r\n          {/* Vertical grid line */}\r\n          <line className=\"chart-grid-line-vertical\" x1={x} y1={config.padding.top} x2={x} y2={config.height - config.padding.bottom} />\r\n          \r\n          {/* X-axis tick marks */}\r\n          <line \r\n            className=\"x-axis-tick\" \r\n            x1={startTickX} \r\n            y1={config.height - config.padding.bottom} \r\n            x2={startTickX} \r\n            y2={config.height - config.padding.bottom + 5}\r\n            stroke=\"#666\"\r\n            strokeWidth=\"1\"\r\n          />\r\n          <line \r\n            className=\"x-axis-tick\" \r\n            x1={middleTickX} \r\n            y1={config.height - config.padding.bottom} \r\n            x2={middleTickX} \r\n            y2={config.height - config.padding.bottom + 5}\r\n            stroke=\"#666\"\r\n            strokeWidth=\"1\"\r\n          />\r\n          \r\n          {/* Time labels positioned at tick marks */}\r\n          <text \r\n            className=\"time-label\" \r\n            x={startTickX} \r\n            y={config.height - config.padding.bottom + 15} \r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.timeLabel}\r\n            style={{fontSize: '8px'}}\r\n          >\r\n            12a\r\n          </text>\r\n          <text \r\n            className=\"time-label\" \r\n            x={middleTickX} \r\n            y={config.height - config.padding.bottom + 15} \r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.timeLabel}\r\n            style={{fontSize: '8px'}}\r\n          >\r\n            12p\r\n          </text>\r\n          \r\n          {/* Day and date labels */}\r\n                    <text \r\n            className=\"x-axis-day-label\"\r\n            x={x + config.dayWidth / 2} \r\n            y={config.height - config.padding.bottom + 40} \r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.dayLabel}\r\n            style={{fontSize: '8px'}}\r\n          >\r\n            {day}\r\n          </text>\r\n          <text \r\n            className=\"x-axis-date-label\" \r\n            x={x + config.dayWidth / 2} \r\n            y={config.height - config.padding.bottom + 58} \r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.dateLabel}\r\n            style={{fontSize: '8px'}}\r\n          >\r\n            {currentDay.getDate()}\r\n          </text>\r\n        </g>\r\n      );\r\n    })}\r\n    {/* Final tick mark at the end of the last day */}\r\n    <line \r\n      className=\"x-axis-tick\" \r\n      x1={config.padding.left + DAYS_OF_WEEK.length * config.dayWidth} \r\n      y1={config.height - config.padding.bottom} \r\n      x2={config.padding.left + DAYS_OF_WEEK.length * config.dayWidth} \r\n      y2={config.height - config.padding.bottom + 5}\r\n      stroke=\"#666\"\r\n      strokeWidth=\"1\"\r\n    />\r\n    <text \r\n      className=\"time-label\" \r\n      x={config.padding.left + DAYS_OF_WEEK.length * config.dayWidth} \r\n      y={config.height - config.padding.bottom + 15} \r\n      textAnchor=\"middle\"\r\n      fontSize={config.fontSize.timeLabel}\r\n      style={{fontSize: '8px'}}\r\n    >\r\n      12a\r\n    </text>\r\n  </g>\r\n);\r\n\r\nconst DataPoints = ({ weekData, config }) => {\r\n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\r\n  return (\r\n    <g className=\"data-points\">\r\n      {weekData.map((reading, index) => {\r\n        const dayIndex = reading.date.getDay();\r\n        const x = getTimePosition(reading.date, dayIndex, config);\r\n        const y = config.padding.top + chartHeight - (reading.value / config.yAxisRange) * chartHeight;\r\n        const color = getPointColor(reading.range);\r\n        const isPre = isPreMeal(reading.measurementType);\r\n        \r\n        // Enhanced tooltip text\r\n        const tooltipText = `Glucose: ${reading.value} mmol/L - ${reading.range} - ${reading.measurementType} - ${reading.date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })} - ${reading.date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}`;\r\n        \r\n        return (\r\n          <rect\r\n            key={index}\r\n            x={x - config.barWidth / 2}\r\n            y={y}\r\n            width={config.barWidth}\r\n            height={(reading.value / config.yAxisRange) * chartHeight}\r\n            fill={isPre ? 'none' : color}\r\n            stroke={color}\r\n            strokeWidth={isPre ? 2 : 1}\r\n            style={{ cursor: 'pointer' }}\r\n          >\r\n            <title>{tooltipText}</title>\r\n          </rect>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n};\r\n\r\nconst Chart = ({ weekData, isExpanded, startOfWeek }) => {\r\n  const config = getChartConfig(isExpanded);\r\n  return (\r\n    <div className=\"glucose-svg-container\">\r\n      <svg width=\"100%\" height=\"100%\" viewBox={`0 0 ${config.width} ${config.height}`} className=\"glucose-svg\">\r\n        <rect width={config.width} height={config.height} fill=\"white\" />\r\n        <XAxisAndGrid config={config} startOfWeek={startOfWeek} />\r\n        <YAxis config={config} />\r\n        <DataPoints weekData={weekData} config={config} />\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst GlucoseChart = ({ patientId, isExpanded = false, onExpand, isPhysicianView = false }) => {\r\n  const healthRangeLegendItems = Object.entries(RANGE_COLORS).map(([label, color]) => ({\r\n    label: label.charAt(0).toUpperCase() + label.slice(1),\r\n    color,\r\n  }));\r\n\r\n  const mealTimeLegendItems = [\r\n    { \r\n      label: 'Pre-meal', \r\n      shape: 'outlined',\r\n      shapeStyle: { borderColor: 'var(--chart-color-text-secondary)' },\r\n      description: 'Blood glucose measurements taken before meals'\r\n    },\r\n    { \r\n      label: 'Post-meal', \r\n      shape: 'filled',\r\n      shapeStyle: { backgroundColor: 'var(--chart-color-text-secondary)' },\r\n      description: 'Blood glucose measurements taken after meals'\r\n    },\r\n  ];\r\n  const { glucoseData, loading, error } = usePatientData(patientId, 'glucose');\r\n  const [currentWeek, setCurrentWeek] = useState(DEFAULT_WEEK);\r\n\r\n  const handlePrevWeek = () => setCurrentWeek(prev => new Date(new Date(prev).setDate(prev.getDate() - 7)));\r\n  const handleNextWeek = () => setCurrentWeek(prev => new Date(new Date(prev).setDate(prev.getDate() + 7)));\r\n\r\n  const startOfWeek = new Date(currentWeek);\r\n  startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());\r\n  startOfWeek.setHours(0, 0, 0, 0);\r\n\r\n  const endOfWeek = new Date(startOfWeek);\r\n  endOfWeek.setDate(endOfWeek.getDate() + 6);\r\n  endOfWeek.setHours(23, 59, 59, 999);\r\n\r\n  const weekData = glucoseData.filter(d => d.date >= startOfWeek && d.date <= endOfWeek);\r\n\r\n  // Calculate summary statistics for physician view\r\n  const weekSummary = useMemo(() => {\r\n    if (!weekData.length) return null;\r\n\r\n    const readings = weekData.filter(d => d.value && d.value > 0);\r\n    const preMealReadings = readings.filter(d => d.measurementType === 'Pre meal');\r\n    const postMealReadings = readings.filter(d => d.measurementType === 'Post meal');\r\n\r\n    const avgGlucose = readings.length > 0 ? \r\n      (readings.reduce((sum, val) => sum + val.value, 0) / readings.length).toFixed(1) : 0;\r\n    \r\n    const avgPreMeal = preMealReadings.length > 0 ? \r\n      (preMealReadings.reduce((sum, val) => sum + val.value, 0) / preMealReadings.length).toFixed(1) : 0;\r\n    \r\n    const avgPostMeal = postMealReadings.length > 0 ? \r\n      (postMealReadings.reduce((sum, val) => sum + val.value, 0) / postMealReadings.length).toFixed(1) : 0;\r\n\r\n    const highReadings = readings.filter(d => d.range.toLowerCase() === 'above range').length;\r\n    const lowReadings = readings.filter(d => d.range.toLowerCase() === 'below range').length;\r\n    const inRangeReadings = readings.filter(d => d.range.toLowerCase() === 'in range').length;\r\n\r\n    const rangePercentage = readings.length > 0 ? \r\n      ((inRangeReadings / readings.length) * 100).toFixed(0) : 0;\r\n\r\n    const daysWithReadings = new Set(weekData.map(d => d.date.toDateString())).size;\r\n\r\n    return {\r\n      avgGlucose,\r\n      avgPreMeal,\r\n      avgPostMeal,\r\n      highReadings,\r\n      lowReadings,\r\n      inRangeReadings,\r\n      rangePercentage,\r\n      daysWithReadings,\r\n      totalReadings: readings.length\r\n    };\r\n  }, [weekData]);\r\n\r\n  const formatDateRange = (start, end) => {\r\n    const startStr = start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    const endStr = end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    return `${startStr} to ${endStr}`;\r\n  };\r\n\r\n  return (\r\n    <ChartContainer\r\n      title=\"Blood Glucose\"\r\n      icon=\"ðŸ©¸\"\r\n      isLoading={loading}\r\n      error={error}\r\n      noData={!loading && !error && (!glucoseData || glucoseData.length === 0)}\r\n      isExpanded={isExpanded}\r\n      onExpand={onExpand}\r\n      onPrev={handlePrevWeek}\r\n      onNext={handleNextWeek}\r\n      navigationLabel={formatDateRange(startOfWeek, endOfWeek)}\r\n    >\r\n      <div className=\"glucose-chart-container\">\r\n        <div className=\"glucose-legends-wrapper\">\r\n          <Legend title=\"Health Range\" items={healthRangeLegendItems} />\r\n          <Legend title=\"Prandial State\" items={mealTimeLegendItems} />\r\n        </div>\r\n        <div className={`glucose-chart-wrapper ${isExpanded ? 'expanded' : ''}`}>\r\n          <Chart weekData={weekData} isExpanded={isExpanded} startOfWeek={startOfWeek} />\r\n        </div>\r\n        \r\n        {/* Show InfoBox for patient view, summary for physician view */}\r\n        {isPhysicianView && weekSummary ? (\r\n          <div className=\"chart-summary\">\r\n            <h4>Week Summary</h4>\r\n            <div className=\"summary-stats\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Average Glucose:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.avgGlucose} mmol/L\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Pre-meal Average:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.avgPreMeal} mmol/L\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Post-meal Average:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.avgPostMeal} mmol/L\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">In Target Range:</span>\r\n                <span className=\"stat-value in-range\">\r\n                  {weekSummary.rangePercentage}% ({weekSummary.inRangeReadings}/{weekSummary.totalReadings})\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">High/Low Readings:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.highReadings} high, {weekSummary.lowReadings} low\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Reading Days:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.daysWithReadings}/7 days\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : !isPhysicianView ? (\r\n          <InfoBox \r\n            title=\"Blood Glucose Information\"\r\n            content=\"These are general targets for adults with diabetes: For blood sugar taken before a meal, the target is 4.0 to 7.0 mmol/L. For blood sugar two hours after a meal, the target is 5.0 to 10.0 mmol/L. The general target for an A1C is 7.0% or less. Always consult your healthcare provider to confirm the right targets for you.\"\r\n          />\r\n        ) : null}\r\n      </div>\r\n    </ChartContainer>\r\n  );\r\n};\r\n\r\nexport default GlucoseChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}