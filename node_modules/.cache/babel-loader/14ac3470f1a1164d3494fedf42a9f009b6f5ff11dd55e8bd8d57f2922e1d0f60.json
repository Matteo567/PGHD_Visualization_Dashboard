{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matteo\\\\Working_Folder\\\\a. MCC Thesis Local Experimental\\\\PGHD_Visualization_Dashboard\\\\src\\\\components\\\\patient_charts\\\\ExerciseChart.js\",\n  _s = $RefreshSig$();\n/**\n ExerciseChart.js - Exercise Activity Tracking Visualization\n \n This component provides comprehensive exercise monitoring:\n - Activity type breakdown (walking, swimming, running, biking, muscle-strengthening, balance)\n - Duration tracking and weekly summaries\n - Color-coded activity categorization\n - Interactive tooltips with exercise details\n - Navigation controls for time periods\n - Integration with patient data and chart navigation\n \n Architecture:\n - Uses custom SVG for stacked bar chart visualization\n - Implements activity categorization system with emoji indicators\n - Provides color-coded activity types for easy identification\n - Supports expandable views\n - Implements time-based navigation and data filtering\n \n Visualization Features:\n - Stacked bar chart showing daily activity breakdown\n - Color-coded activity types with emoji indicators\n - Interactive tooltips with detailed exercise information\n - Design adapting to container size\n - Dynamic Y-axis scaling based on data range\n \n Activity Categories:\n - Walking: Low-impact cardiovascular exercise\n - Swimming: Full-body cardiovascular workout\n - Running: High-impact cardiovascular exercise\n - Biking: Low-impact cardiovascular exercise\n - Muscle-Strengthening: Strength training activities\n - Balance: Balance and stability training\n - Other: Miscellaneous physical activities\n \n Component Structure:\n - Chart Container: Main SVG container with sizing\n - Y-Axis: Duration scale with dynamic labeling\n - X-Axis: Day-of-week labels with date information\n - Data Bars: Stacked activity bars with color coding\n - Legend: Activity type explanations with emojis\n - Tooltip: Detailed exercise information on hover\n \n Essential for physical activity monitoring and fitness tracking.\n */\n\nimport React, { useState, useRef } from 'react';\nimport usePatientData from '../../hooks/usePatientData';\nimport useChartNavigation from '../../hooks/useChartNavigation';\nimport Legend from '../Legend';\nimport './ExerciseChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst exerciseTypes = [{\n  key: 'walking',\n  label: 'Walking',\n  color: 'var(--chart-color-walking)',\n  emoji: '🚶'\n}, {\n  key: 'swimming',\n  label: 'Swimming',\n  color: 'var(--chart-color-swimming)',\n  emoji: '🏊‍♀️'\n}, {\n  key: 'running',\n  label: 'Running',\n  color: 'var(--chart-color-running)',\n  emoji: '🏃‍♂️'\n}, {\n  key: 'biking',\n  label: 'Biking',\n  color: 'var(--chart-color-biking)',\n  emoji: '🚴'\n}, {\n  key: 'muscle-strengthening',\n  label: 'Muscle-Strengthening',\n  color: 'var(--chart-color-resistance)',\n  emoji: '🏋️'\n}, {\n  key: 'balance',\n  label: 'Balance',\n  color: 'var(--chart-color-balance)',\n  emoji: '🧘'\n}, {\n  key: 'other',\n  label: 'Other',\n  color: 'var(--chart-color-other)',\n  emoji: '➕'\n}];\nconst exerciseLegendItems = exerciseTypes.map(({\n  label,\n  color,\n  emoji\n}) => ({\n  label: `${emoji} ${label}`,\n  color\n}));\nconst ExerciseChart = ({\n  patientId,\n  isExpanded = false,\n  onExpand,\n  viewMode = 'patient',\n  navigation,\n  screenshotMode = false,\n  showThreeMonthSummaries = false\n}) => {\n  _s();\n  var _exerciseTypes$find, _exerciseTypes$find2;\n  const {\n    exerciseData,\n    loading,\n    error\n  } = usePatientData(patientId, 'exercise');\n\n  // State for toggling between activity breakdown and weekly goals view\n  const [showWeeklyGoals, setShowWeeklyGoals] = useState(false);\n\n  // Use navigation from parent or fallback to internal navigation\n  const useInternalNavigation = !navigation;\n  const internalNavigation = useChartNavigation('exercise');\n  const nav = navigation || internalNavigation;\n\n  // Simple inline config - no factory pattern needed\n  const config = isExpanded ? {\n    width: 700,\n    height: 550,\n    padding: {\n      top: 80,\n      right: 60,\n      bottom: 100,\n      left: 80\n    },\n    dayWidth: 80,\n    fontSize: {\n      yAxis: 16,\n      yAxisTitle: 18,\n      timeLabel: 14,\n      dayLabel: 14,\n      dateLabel: 14,\n      emoji: 12\n    },\n    barWidth: 12\n  } : {\n    width: 450,\n    height: 350,\n    padding: {\n      top: 60,\n      right: 40,\n      bottom: 80,\n      left: 60\n    },\n    dayWidth: 50,\n    fontSize: {\n      yAxis: 14,\n      yAxisTitle: 16,\n      timeLabel: 12,\n      dayLabel: 12,\n      dateLabel: 12,\n      emoji: 10\n    },\n    barWidth: 8\n  };\n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\n  const {\n    start: startOfWeek,\n    end: endOfWeek\n  } = nav.getDateRange();\n  const weekData = exerciseData.filter(d => {\n    if (!d.date) return false;\n    const itemDate = new Date(d.date);\n    return itemDate >= startOfWeek && itemDate <= endOfWeek;\n  });\n\n  // Get 3-month data\n  const {\n    start: startOfThreeMonths,\n    end: endOfThreeMonths\n  } = nav.getThreeMonthRange();\n  const threeMonthData = exerciseData.filter(d => {\n    if (!d.date) return false;\n    const itemDate = new Date(d.date);\n    return itemDate >= startOfThreeMonths && itemDate <= endOfThreeMonths;\n  });\n\n  // Helper functions for exercise data processing\n  const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  const initializeDayData = () => ({\n    walking: 0,\n    swimming: 0,\n    running: 0,\n    biking: 0,\n    'muscle-strengthening': 0,\n    balance: 0,\n    other: 0,\n    totalMinutes: 0\n  });\n  const processExerciseData = weekData => {\n    const groupedData = {};\n\n    // Initialize all days\n    daysOfWeek.forEach(day => {\n      groupedData[day] = initializeDayData();\n    });\n\n    // Process each exercise item\n    weekData.forEach(item => {\n      if (!item.date) return;\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      const dayData = groupedData[dayName];\n      if (dayData) {\n        dayData.walking += Number(item.walking) || 0;\n        dayData.swimming += Number(item.swimming) || 0;\n        dayData.running += Number(item.running) || 0;\n        dayData.biking += Number(item.biking) || 0;\n        dayData['muscle-strengthening'] += Number(item['muscle-strengthening']) || 0;\n        dayData.balance += Number(item.balance) || 0;\n        dayData.other += Number(item.other) || 0;\n\n        // Calculate total minutes\n        dayData.totalMinutes = dayData.walking + dayData.swimming + dayData.running + dayData.biking + dayData['muscle-strengthening'] + dayData.balance + dayData.other;\n      }\n    });\n    return groupedData;\n  };\n  const groupedData = processExerciseData(weekData);\n\n  // Calculate weekly exercise categories for physician view\n  const aerobic = Object.values(groupedData).reduce((sum, day) => sum + day.walking + day.swimming + day.running + day.biking, 0);\n  const strength = Object.values(groupedData).reduce((sum, day) => sum + day['muscle-strengthening'], 0);\n  const flexibility = Object.values(groupedData).reduce((sum, day) => sum + day.balance, 0);\n  const strengthSessions = Object.values(groupedData).filter(day => day['muscle-strengthening'] > 0).length;\n  const flexibilitySessions = Object.values(groupedData).filter(day => day.balance > 0).length;\n  const weeklyCategories = {\n    aerobic,\n    strength,\n    flexibility,\n    strengthSessions,\n    flexibilitySessions\n  };\n\n  // Calculate percentages for physician view\n  const aerobicGoal = 150;\n  const strengthGoal = 2;\n  const flexibilityGoal = 1;\n  const categoryPercentages = {\n    aerobic: Math.min(100, Math.round(weeklyCategories.aerobic / aerobicGoal * 100)),\n    strength: Math.min(100, Math.round(weeklyCategories.strengthSessions / strengthGoal * 100)),\n    flexibility: Math.min(100, Math.round(weeklyCategories.flexibilitySessions / flexibilityGoal * 100))\n  };\n  const exerciseValues = Object.values(groupedData).map(day => day.totalMinutes);\n  const maxVal = exerciseValues.length > 0 ? Math.max(...exerciseValues, 0) : 0;\n  const maxDuration = Math.max(60, Math.ceil(maxVal / 30) * 30);\n  const generateYAxisLabels = max => {\n    if (max === 0) return [0];\n    const step = Math.max(15, Math.ceil(max / 6 / 15) * 15);\n    const labels = [];\n    for (let i = 0; i <= max; i += step) {\n      labels.push(i);\n    }\n    return labels;\n  };\n  const yAxisLabels = generateYAxisLabels(maxDuration);\n\n  // Calculate summary statistics for physician view\n  let weekSummary = null;\n  if (weekData.length > 0) {\n    const totalMinutes = Object.values(groupedData).reduce((sum, day) => sum + day.totalMinutes, 0);\n    const avgMinutesPerDay = (totalMinutes / 7).toFixed(0);\n\n    // Count days with exercise\n    const daysWithExercise = Object.values(groupedData).filter(day => day.totalMinutes > 0).length;\n\n    // Find most common exercise type\n    const exerciseTypeTotals = {};\n    exerciseTypes.forEach(type => {\n      exerciseTypeTotals[type.key] = Object.values(groupedData).reduce((sum, day) => sum + day[type.key], 0);\n    });\n    const mostCommonExercise = Object.entries(exerciseTypeTotals).sort(([, a], [, b]) => b - a)[0];\n\n    // Calculate exercise consistency (days with 30+ minutes)\n    const daysWithAdequateExercise = Object.values(groupedData).filter(day => day.totalMinutes >= 30).length;\n\n    // Calculate average session length\n    const totalSessions = weekData.filter(item => {\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      return groupedData[dayName] && groupedData[dayName].totalMinutes > 0;\n    }).length;\n    const avgSessionLength = totalSessions > 0 ? (totalMinutes / totalSessions).toFixed(0) : 0;\n    weekSummary = {\n      totalMinutes,\n      avgMinutesPerDay,\n      daysWithExercise,\n      mostCommonExercise: mostCommonExercise[0],\n      mostCommonExerciseMinutes: mostCommonExercise[1],\n      daysWithAdequateExercise,\n      totalSessions,\n      avgSessionLength\n    };\n  }\n\n  // Calculate 3-month summary statistics for physician view\n  let threeMonthSummary = null;\n  if (threeMonthData.length > 0) {\n    // Group 3-month data by day\n    const threeMonthGroupedData = {};\n    threeMonthData.forEach(item => {\n      if (!item.date) return;\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      if (!threeMonthGroupedData[dayName]) {\n        threeMonthGroupedData[dayName] = {\n          walking: 0,\n          swimming: 0,\n          running: 0,\n          biking: 0,\n          'muscle-strengthening': 0,\n          balance: 0,\n          other: 0,\n          totalMinutes: 0\n        };\n      }\n      threeMonthGroupedData[dayName].walking += Number(item.walking) || 0;\n      threeMonthGroupedData[dayName].swimming += Number(item.swimming) || 0;\n      threeMonthGroupedData[dayName].running += Number(item.running) || 0;\n      threeMonthGroupedData[dayName].biking += Number(item.biking) || 0;\n      threeMonthGroupedData[dayName]['muscle-strengthening'] += Number(item['muscle-strengthening']) || 0;\n      threeMonthGroupedData[dayName].balance += Number(item.balance) || 0;\n      threeMonthGroupedData[dayName].other += Number(item.other) || 0;\n      threeMonthGroupedData[dayName].totalMinutes = threeMonthGroupedData[dayName].walking + threeMonthGroupedData[dayName].swimming + threeMonthGroupedData[dayName].running + threeMonthGroupedData[dayName].biking + threeMonthGroupedData[dayName]['muscle-strengthening'] + threeMonthGroupedData[dayName].balance + threeMonthGroupedData[dayName].other;\n    });\n    const totalMinutes = Object.values(threeMonthGroupedData).reduce((sum, day) => sum + day.totalMinutes, 0);\n\n    // Calculate actual days in the 3-month period\n    const {\n      start: startOfThreeMonths,\n      end: endOfThreeMonths\n    } = nav.getThreeMonthRange();\n    const daysInThreeMonths = Math.ceil((endOfThreeMonths - startOfThreeMonths) / (1000 * 60 * 60 * 24)) + 1;\n    const avgMinutesPerDay = (totalMinutes / daysInThreeMonths).toFixed(0);\n\n    // Count days with exercise\n    const daysWithExercise = Object.values(threeMonthGroupedData).filter(day => day.totalMinutes > 0).length;\n\n    // Find most common exercise type\n    const exerciseTypeTotals = {};\n    exerciseTypes.forEach(type => {\n      exerciseTypeTotals[type.key] = Object.values(threeMonthGroupedData).reduce((sum, day) => sum + day[type.key], 0);\n    });\n    const mostCommonExercise = Object.entries(exerciseTypeTotals).sort(([, a], [, b]) => b - a)[0];\n\n    // Calculate average session length\n    const totalSessions = threeMonthData.filter(item => {\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      return threeMonthGroupedData[dayName] && threeMonthGroupedData[dayName].totalMinutes > 0;\n    }).length;\n    const avgSessionLength = totalSessions > 0 ? (totalMinutes / totalSessions).toFixed(0) : 0;\n    threeMonthSummary = {\n      totalMinutes,\n      avgMinutesPerDay,\n      daysWithExercise,\n      mostCommonExercise: mostCommonExercise[0],\n      mostCommonExerciseMinutes: mostCommonExercise[1],\n      totalSessions,\n      avgSessionLength\n    };\n  }\n  const formatDateRange = (start, end) => {\n    const startStr = start.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n    const endStr = end.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n    return `${startStr} to ${endStr}`;\n  };\n\n  // Physician/Unified view - simplified bar chart or weekly goals\n  if (viewMode === 'physician' || viewMode === 'unified' && showWeeklyGoals) {\n    const categories = [{\n      name: 'Aerobic',\n      value: weeklyCategories.aerobic,\n      goal: 150,\n      percentage: categoryPercentages.aerobic,\n      color: '#4CAF50',\n      description: '150 min/week goal'\n    }, {\n      name: 'Strength',\n      value: weeklyCategories.strengthSessions,\n      goal: 2,\n      percentage: categoryPercentages.strength,\n      color: '#2196F3',\n      description: '2+ sessions/week'\n    }, {\n      name: 'Balance',\n      value: weeklyCategories.flexibilitySessions,\n      goal: 1,\n      percentage: categoryPercentages.flexibility,\n      color: '#FF9800',\n      description: '1+ session/week'\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `exercise-chart-container ${isExpanded ? 'expanded' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"exercise-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"chart-title\",\n          children: \"Exercise Goals Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"chart-subtitle\",\n          children: nav.getFormattedDateRange()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), viewMode === 'unified' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${!showWeeklyGoals ? 'active' : ''}`,\n            onClick: () => setShowWeeklyGoals(false),\n            children: \"Activity Breakdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${showWeeklyGoals ? 'active' : ''}`,\n            onClick: () => setShowWeeklyGoals(true),\n            children: \"Weekly Goals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"physician-exercise-bars\",\n        children: categories.map((category, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exercise-category-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"category-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"category-name\",\n              children: category.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"category-percentage\",\n              children: [category.percentage, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bar-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bar-fill\",\n              style: {\n                width: `${category.percentage}%`,\n                backgroundColor: category.color,\n                opacity: category.percentage > 0 ? 0.8 : 0.3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"category-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"category-value\",\n              children: category.name === 'Aerobic' ? `${category.value} min` : `${category.value} sessions`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"category-goal\",\n              children: [\"Goal: \", category.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)]\n        }, category.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Week Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"Aerobic Activity:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [weeklyCategories.aerobic, \" minutes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"Strength Sessions:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [weeklyCategories.strengthSessions, \" sessions\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"Balance Sessions:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [weeklyCategories.flexibilitySessions, \" sessions\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"Goal Achievement:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [Object.values(categoryPercentages).filter(p => p >= 100).length, \"/3 categories\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `exercise-chart-container ${isExpanded ? 'expanded' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exercise-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"chart-title\",\n        children: \"Activity Breakdown by Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"chart-subtitle\",\n        children: nav.getFormattedDateRange()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }, this), viewMode === 'unified' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${!showWeeklyGoals ? 'active' : ''}`,\n          onClick: () => setShowWeeklyGoals(false),\n          children: \"Activity Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${showWeeklyGoals ? 'active' : ''}`,\n          onClick: () => setShowWeeklyGoals(true),\n          children: \"Weekly Goals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"100%\",\n      viewBox: `0 0 ${config.width} ${config.height}`,\n      className: \"exercise-svg\",\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"y-axis\",\n        children: [yAxisLabels.map(value => {\n          const y = config.padding.top + chartHeight - value / maxDuration * chartHeight;\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            className: \"y-axis-grid-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              className: \"chart-grid-line-horizontal\",\n              x1: config.padding.left,\n              y1: y,\n              x2: config.width - config.padding.right,\n              y2: y\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: config.padding.left - 15,\n              y: y + 3,\n              fontSize: config.fontSize.yAxis,\n              textAnchor: \"end\",\n              fill: \"var(--chart-color-text-secondary)\",\n              className: \"chart-tick-label\",\n              children: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this)]\n          }, value, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"text\", {\n          x: -(config.padding.top + chartHeight / 2),\n          y: config.padding.left / 2 - 5,\n          fontSize: config.fontSize.yAxisTitle,\n          textAnchor: \"middle\",\n          fill: \"var(--chart-color-text-primary)\",\n          transform: \"rotate(-90)\",\n          className: \"y-axis-title\",\n          children: \"Minutes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"x-axis\",\n        children: daysOfWeek.map((day, dayIndex) => {\n          const date = new Date(startOfWeek);\n          date.setDate(date.getDate() + dayIndex);\n          const x = config.padding.left + dayIndex * config.dayWidth + config.dayWidth / 2;\n          const dayData = groupedData[day];\n          const performedExercises = exerciseTypes.filter(type => (dayData[type.key] || 0) > 0);\n          const emojis = performedExercises.map(type => type.emoji).join(' ');\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            className: \"x-axis-label-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              className: \"chart-grid-line-vertical\",\n              x1: config.padding.left + dayIndex * config.dayWidth,\n              y1: config.padding.top,\n              x2: config.padding.left + dayIndex * config.dayWidth,\n              y2: config.height - config.padding.bottom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 15,\n              textAnchor: \"middle\",\n              fontSize: config.fontSize.dayLabel,\n              fill: \"var(--chart-color-text-primary)\",\n              className: \"x-axis-day-label\",\n              children: day\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 30,\n              textAnchor: \"middle\",\n              fontSize: config.fontSize.dateLabel,\n              fill: \"var(--chart-color-text-secondary)\",\n              className: \"x-axis-date-label\",\n              children: date.getDate()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 48,\n              textAnchor: \"middle\",\n              fontSize: config.fontSize.emoji,\n              children: emojis\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 19\n            }, this)]\n          }, dayIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"data-bars\",\n        children: daysOfWeek.map((day, dayIndex) => {\n          const dayData = groupedData[day];\n          const x = config.padding.left + dayIndex * config.dayWidth + config.dayWidth / 2;\n          let currentY = config.height - config.padding.bottom;\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            children: exerciseTypes.map(type => {\n              const minutes = Number(dayData[type.key]) || 0;\n              if (minutes <= 0) return null;\n              const segmentHeight = minutes / maxDuration * chartHeight;\n              const segmentY = currentY - segmentHeight;\n              const segment = /*#__PURE__*/_jsxDEV(\"g\", {\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: x - config.barWidth / 2,\n                  y: segmentY,\n                  width: config.barWidth,\n                  height: segmentHeight,\n                  fill: type.color,\n                  className: \"data-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"title\", {\n                    children: `${type.label}: ${Math.round(minutes)} min`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 536,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 25\n                }, this), segmentHeight >= 12 && /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: x,\n                  y: segmentY + segmentHeight / 2,\n                  textAnchor: \"middle\",\n                  fontSize: isExpanded ? 8 : 6,\n                  fill: \"black\",\n                  className: \"duration-label\",\n                  style: {\n                    fontWeight: 'bold'\n                  },\n                  children: Math.round(minutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 27\n                }, this)]\n              }, type.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 23\n              }, this);\n              currentY = segmentY;\n              return segment;\n            })\n          }, day, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      title: \"Exercise Type\",\n      items: exerciseLegendItems,\n      orientation: \"horizontal\",\n      size: \"medium\",\n      hide: screenshotMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 9\n    }, this), (viewMode === 'physician' || viewMode === 'unified') && weekSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Week Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Exercise:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.totalMinutes, \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Daily Average:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.avgMinutesPerDay, \" minutes/day\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Exercise Days:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.daysWithExercise, \"/7 days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Most Common:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [(_exerciseTypes$find = exerciseTypes.find(t => t.key === weekSummary.mostCommonExercise)) === null || _exerciseTypes$find === void 0 ? void 0 : _exerciseTypes$find.emoji, \" \", weekSummary.mostCommonExercise, \" (\", weekSummary.mostCommonExerciseMinutes, \" min)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Avg Session:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.avgSessionLength, \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 13\n      }, this), showThreeMonthSummaries && threeMonthSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"3-Month Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Exercise:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.totalMinutes, \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Daily Average:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.avgMinutesPerDay, \" minutes/day\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Exercise Days:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.daysWithExercise, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Most Common:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [(_exerciseTypes$find2 = exerciseTypes.find(t => t.key === threeMonthSummary.mostCommonExercise)) === null || _exerciseTypes$find2 === void 0 ? void 0 : _exerciseTypes$find2.emoji, \" \", threeMonthSummary.mostCommonExercise, \" (\", threeMonthSummary.mostCommonExerciseMinutes, \" min)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Avg Session:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.avgSessionLength, \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 7\n  }, this);\n};\n_s(ExerciseChart, \"JPlFOCKuH+Zt61+TzU8PjQV/C2M=\", false, function () {\n  return [usePatientData, useChartNavigation];\n});\n_c = ExerciseChart;\nexport default ExerciseChart;\nvar _c;\n$RefreshReg$(_c, \"ExerciseChart\");","map":{"version":3,"names":["React","useState","useRef","usePatientData","useChartNavigation","Legend","jsxDEV","_jsxDEV","exerciseTypes","key","label","color","emoji","exerciseLegendItems","map","ExerciseChart","patientId","isExpanded","onExpand","viewMode","navigation","screenshotMode","showThreeMonthSummaries","_s","_exerciseTypes$find","_exerciseTypes$find2","exerciseData","loading","error","showWeeklyGoals","setShowWeeklyGoals","useInternalNavigation","internalNavigation","nav","config","width","height","padding","top","right","bottom","left","dayWidth","fontSize","yAxis","yAxisTitle","timeLabel","dayLabel","dateLabel","barWidth","chartHeight","start","startOfWeek","end","endOfWeek","getDateRange","weekData","filter","d","date","itemDate","Date","startOfThreeMonths","endOfThreeMonths","getThreeMonthRange","threeMonthData","daysOfWeek","initializeDayData","walking","swimming","running","biking","balance","other","totalMinutes","processExerciseData","groupedData","forEach","day","item","dayName","isNaN","getTime","getDay","dayData","Number","aerobic","Object","values","reduce","sum","strength","flexibility","strengthSessions","length","flexibilitySessions","weeklyCategories","aerobicGoal","strengthGoal","flexibilityGoal","categoryPercentages","Math","min","round","exerciseValues","maxVal","max","maxDuration","ceil","generateYAxisLabels","step","labels","i","push","yAxisLabels","weekSummary","avgMinutesPerDay","toFixed","daysWithExercise","exerciseTypeTotals","type","mostCommonExercise","entries","sort","a","b","daysWithAdequateExercise","totalSessions","avgSessionLength","mostCommonExerciseMinutes","threeMonthSummary","threeMonthGroupedData","daysInThreeMonths","formatDateRange","startStr","toLocaleDateString","month","endStr","categories","name","value","goal","percentage","description","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getFormattedDateRange","onClick","category","index","style","backgroundColor","opacity","p","viewBox","y","x1","y1","x2","y2","x","textAnchor","fill","transform","dayIndex","setDate","getDate","performedExercises","emojis","join","currentY","minutes","segmentHeight","segmentY","segment","fontWeight","title","items","orientation","size","hide","find","t","_c","$RefreshReg$"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local Experimental/PGHD_Visualization_Dashboard/src/components/patient_charts/ExerciseChart.js"],"sourcesContent":["/**\n ExerciseChart.js - Exercise Activity Tracking Visualization\n \n This component provides comprehensive exercise monitoring:\n - Activity type breakdown (walking, swimming, running, biking, muscle-strengthening, balance)\n - Duration tracking and weekly summaries\n - Color-coded activity categorization\n - Interactive tooltips with exercise details\n - Navigation controls for time periods\n - Integration with patient data and chart navigation\n \n Architecture:\n - Uses custom SVG for stacked bar chart visualization\n - Implements activity categorization system with emoji indicators\n - Provides color-coded activity types for easy identification\n - Supports expandable views\n - Implements time-based navigation and data filtering\n \n Visualization Features:\n - Stacked bar chart showing daily activity breakdown\n - Color-coded activity types with emoji indicators\n - Interactive tooltips with detailed exercise information\n - Design adapting to container size\n - Dynamic Y-axis scaling based on data range\n \n Activity Categories:\n - Walking: Low-impact cardiovascular exercise\n - Swimming: Full-body cardiovascular workout\n - Running: High-impact cardiovascular exercise\n - Biking: Low-impact cardiovascular exercise\n - Muscle-Strengthening: Strength training activities\n - Balance: Balance and stability training\n - Other: Miscellaneous physical activities\n \n Component Structure:\n - Chart Container: Main SVG container with sizing\n - Y-Axis: Duration scale with dynamic labeling\n - X-Axis: Day-of-week labels with date information\n - Data Bars: Stacked activity bars with color coding\n - Legend: Activity type explanations with emojis\n - Tooltip: Detailed exercise information on hover\n \n Essential for physical activity monitoring and fitness tracking.\n */\n\nimport React, { useState, useRef } from 'react';\nimport usePatientData from '../../hooks/usePatientData';\nimport useChartNavigation from '../../hooks/useChartNavigation';\nimport Legend from '../Legend';\nimport './ExerciseChart.css';\n\nconst exerciseTypes = [\n  { key: 'walking', label: 'Walking', color: 'var(--chart-color-walking)', emoji: '🚶' },\n  { key: 'swimming', label: 'Swimming', color: 'var(--chart-color-swimming)', emoji: '🏊‍♀️' },\n  { key: 'running', label: 'Running', color: 'var(--chart-color-running)', emoji: '🏃‍♂️' },\n  { key: 'biking', label: 'Biking', color: 'var(--chart-color-biking)', emoji: '🚴' },\n  { key: 'muscle-strengthening', label: 'Muscle-Strengthening', color: 'var(--chart-color-resistance)', emoji: '🏋️' },\n  { key: 'balance', label: 'Balance', color: 'var(--chart-color-balance)', emoji: '🧘' },\n  { key: 'other', label: 'Other', color: 'var(--chart-color-other)', emoji: '➕' },\n];\n\nconst exerciseLegendItems = exerciseTypes.map(({ label, color, emoji }) => ({\n  label: `${emoji} ${label}`,\n  color,\n}));\n\nconst ExerciseChart = ({ patientId, isExpanded = false, onExpand, viewMode = 'patient', navigation, screenshotMode = false, showThreeMonthSummaries = false }) => {\n  const { exerciseData, loading, error } = usePatientData(patientId, 'exercise');\n  \n  // State for toggling between activity breakdown and weekly goals view\n  const [showWeeklyGoals, setShowWeeklyGoals] = useState(false);\n  \n  // Use navigation from parent or fallback to internal navigation\n  const useInternalNavigation = !navigation;\n  const internalNavigation = useChartNavigation('exercise');\n  const nav = navigation || internalNavigation;\n\n  // Simple inline config - no factory pattern needed\n  const config = isExpanded \n    ? {\n        width: 700,\n        height: 550,\n        padding: { top: 80, right: 60, bottom: 100, left: 80 },\n        dayWidth: 80,\n        fontSize: {\n          yAxis: 16,\n          yAxisTitle: 18,\n          timeLabel: 14,\n          dayLabel: 14,\n          dateLabel: 14,\n          emoji: 12,\n        },\n        barWidth: 12,\n      }\n    : {\n        width: 450,\n        height: 350,\n        padding: { top: 60, right: 40, bottom: 80, left: 60 },\n        dayWidth: 50,\n        fontSize: {\n          yAxis: 14,\n          yAxisTitle: 16,\n          timeLabel: 12,\n          dayLabel: 12,\n          dateLabel: 12,\n          emoji: 10,\n        },\n        barWidth: 8,\n      };\n  \n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\n\n  const { start: startOfWeek, end: endOfWeek } = nav.getDateRange();\n\n  const weekData = exerciseData.filter(d => {\n    if (!d.date) return false;\n    const itemDate = new Date(d.date);\n    return itemDate >= startOfWeek && itemDate <= endOfWeek;\n  });\n\n  // Get 3-month data\n  const { start: startOfThreeMonths, end: endOfThreeMonths } = nav.getThreeMonthRange();\n  const threeMonthData = exerciseData.filter(d => {\n    if (!d.date) return false;\n    const itemDate = new Date(d.date);\n    return itemDate >= startOfThreeMonths && itemDate <= endOfThreeMonths;\n  });\n\n  // Helper functions for exercise data processing\n  const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  \n  const initializeDayData = () => ({\n    walking: 0,\n    swimming: 0,\n    running: 0,\n    biking: 0,\n    'muscle-strengthening': 0,\n    balance: 0,\n    other: 0,\n    totalMinutes: 0\n  });\n\n  const processExerciseData = (weekData) => {\n    const groupedData = {};\n    \n    // Initialize all days\n    daysOfWeek.forEach(day => {\n      groupedData[day] = initializeDayData();\n    });\n    \n    // Process each exercise item\n    weekData.forEach(item => {\n      if (!item.date) return;\n      \n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      const dayData = groupedData[dayName];\n      \n      if (dayData) {\n        dayData.walking += Number(item.walking) || 0;\n        dayData.swimming += Number(item.swimming) || 0;\n        dayData.running += Number(item.running) || 0;\n        dayData.biking += Number(item.biking) || 0;\n        dayData['muscle-strengthening'] += Number(item['muscle-strengthening']) || 0;\n        dayData.balance += Number(item.balance) || 0;\n        dayData.other += Number(item.other) || 0;\n        \n        // Calculate total minutes\n        dayData.totalMinutes = dayData.walking + dayData.swimming + dayData.running + \n                             dayData.biking + dayData['muscle-strengthening'] + \n                             dayData.balance + dayData.other;\n      }\n    });\n    \n    return groupedData;\n  };\n\n  const groupedData = processExerciseData(weekData);\n\n  // Calculate weekly exercise categories for physician view\n  const aerobic = Object.values(groupedData).reduce((sum, day) => \n    sum + day.walking + day.swimming + day.running + day.biking, 0);\n  const strength = Object.values(groupedData).reduce((sum, day) => \n    sum + day['muscle-strengthening'], 0);\n  const flexibility = Object.values(groupedData).reduce((sum, day) => \n    sum + day.balance, 0);\n  \n  const strengthSessions = Object.values(groupedData).filter(day => day['muscle-strengthening'] > 0).length;\n  const flexibilitySessions = Object.values(groupedData).filter(day => day.balance > 0).length;\n  \n  const weeklyCategories = {\n    aerobic,\n    strength,\n    flexibility,\n    strengthSessions,\n    flexibilitySessions\n  };\n\n  // Calculate percentages for physician view\n  const aerobicGoal = 150;\n  const strengthGoal = 2;\n  const flexibilityGoal = 1;\n  \n  const categoryPercentages = {\n    aerobic: Math.min(100, Math.round((weeklyCategories.aerobic / aerobicGoal) * 100)),\n    strength: Math.min(100, Math.round((weeklyCategories.strengthSessions / strengthGoal) * 100)),\n    flexibility: Math.min(100, Math.round((weeklyCategories.flexibilitySessions / flexibilityGoal) * 100))\n  };\n\n  const exerciseValues = Object.values(groupedData).map(day => day.totalMinutes);\n  const maxVal = exerciseValues.length > 0 ? Math.max(...exerciseValues, 0) : 0;\n  const maxDuration = Math.max(60, Math.ceil(maxVal / 30) * 30);\n\n  const generateYAxisLabels = (max) => {\n    if (max === 0) return [0];\n    const step = Math.max(15, Math.ceil(max / 6 / 15) * 15);\n    const labels = [];\n    for (let i = 0; i <= max; i += step) {\n      labels.push(i);\n    }\n    return labels;\n  };\n\n  const yAxisLabels = generateYAxisLabels(maxDuration);\n\n  // Calculate summary statistics for physician view\n  let weekSummary = null;\n  if (weekData.length > 0) {\n\n    const totalMinutes = Object.values(groupedData).reduce((sum, day) => sum + day.totalMinutes, 0);\n    const avgMinutesPerDay = (totalMinutes / 7).toFixed(0);\n    \n    // Count days with exercise\n    const daysWithExercise = Object.values(groupedData).filter(day => day.totalMinutes > 0).length;\n    \n    // Find most common exercise type\n    const exerciseTypeTotals = {};\n    exerciseTypes.forEach(type => {\n      exerciseTypeTotals[type.key] = Object.values(groupedData).reduce((sum, day) => sum + day[type.key], 0);\n    });\n    \n    const mostCommonExercise = Object.entries(exerciseTypeTotals)\n      .sort(([,a], [,b]) => b - a)[0];\n    \n    // Calculate exercise consistency (days with 30+ minutes)\n    const daysWithAdequateExercise = Object.values(groupedData).filter(day => day.totalMinutes >= 30).length;\n    \n    // Calculate average session length\n    const totalSessions = weekData.filter(item => {\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      return groupedData[dayName] && groupedData[dayName].totalMinutes > 0;\n    }).length;\n    \n    const avgSessionLength = totalSessions > 0 ? (totalMinutes / totalSessions).toFixed(0) : 0;\n\n    weekSummary = {\n      totalMinutes,\n      avgMinutesPerDay,\n      daysWithExercise,\n      mostCommonExercise: mostCommonExercise[0],\n      mostCommonExerciseMinutes: mostCommonExercise[1],\n      daysWithAdequateExercise,\n      totalSessions,\n      avgSessionLength\n    };\n  }\n\n  // Calculate 3-month summary statistics for physician view\n  let threeMonthSummary = null;\n  if (threeMonthData.length > 0) {\n\n    // Group 3-month data by day\n    const threeMonthGroupedData = {};\n    threeMonthData.forEach(item => {\n      if (!item.date) return;\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      if (!threeMonthGroupedData[dayName]) {\n        threeMonthGroupedData[dayName] = { walking: 0, swimming: 0, running: 0, biking: 0, 'muscle-strengthening': 0, balance: 0, other: 0, totalMinutes: 0 };\n      }\n      threeMonthGroupedData[dayName].walking += Number(item.walking) || 0;\n      threeMonthGroupedData[dayName].swimming += Number(item.swimming) || 0;\n      threeMonthGroupedData[dayName].running += Number(item.running) || 0;\n      threeMonthGroupedData[dayName].biking += Number(item.biking) || 0;\n      threeMonthGroupedData[dayName]['muscle-strengthening'] += Number(item['muscle-strengthening']) || 0;\n      threeMonthGroupedData[dayName].balance += Number(item.balance) || 0;\n      threeMonthGroupedData[dayName].other += Number(item.other) || 0;\n      threeMonthGroupedData[dayName].totalMinutes = threeMonthGroupedData[dayName].walking + threeMonthGroupedData[dayName].swimming + threeMonthGroupedData[dayName].running + threeMonthGroupedData[dayName].biking + threeMonthGroupedData[dayName]['muscle-strengthening'] + threeMonthGroupedData[dayName].balance + threeMonthGroupedData[dayName].other;\n    });\n\n    const totalMinutes = Object.values(threeMonthGroupedData).reduce((sum, day) => sum + day.totalMinutes, 0);\n    \n    // Calculate actual days in the 3-month period\n    const { start: startOfThreeMonths, end: endOfThreeMonths } = nav.getThreeMonthRange();\n    const daysInThreeMonths = Math.ceil((endOfThreeMonths - startOfThreeMonths) / (1000 * 60 * 60 * 24)) + 1;\n    const avgMinutesPerDay = (totalMinutes / daysInThreeMonths).toFixed(0);\n    \n    // Count days with exercise\n    const daysWithExercise = Object.values(threeMonthGroupedData).filter(day => day.totalMinutes > 0).length;\n    \n    // Find most common exercise type\n    const exerciseTypeTotals = {};\n    exerciseTypes.forEach(type => {\n      exerciseTypeTotals[type.key] = Object.values(threeMonthGroupedData).reduce((sum, day) => sum + day[type.key], 0);\n    });\n    \n    const mostCommonExercise = Object.entries(exerciseTypeTotals)\n      .sort(([,a], [,b]) => b - a)[0];\n    \n    // Calculate average session length\n    const totalSessions = threeMonthData.filter(item => {\n      const date = new Date(item.date);\n      const dayName = !isNaN(date.getTime()) ? daysOfWeek[date.getDay()] : 'Invalid';\n      return threeMonthGroupedData[dayName] && threeMonthGroupedData[dayName].totalMinutes > 0;\n    }).length;\n    \n    const avgSessionLength = totalSessions > 0 ? (totalMinutes / totalSessions).toFixed(0) : 0;\n\n    threeMonthSummary = {\n      totalMinutes,\n      avgMinutesPerDay,\n      daysWithExercise,\n      mostCommonExercise: mostCommonExercise[0],\n      mostCommonExerciseMinutes: mostCommonExercise[1],\n      totalSessions,\n      avgSessionLength\n    };\n  }\n\n  const formatDateRange = (start, end) => {\n    const startStr = start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    const endStr = end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    return `${startStr} to ${endStr}`;\n  };\n\n  // Physician/Unified view - simplified bar chart or weekly goals\n  if (viewMode === 'physician' || (viewMode === 'unified' && showWeeklyGoals)) {\n    const categories = [\n      { \n        name: 'Aerobic', \n        value: weeklyCategories.aerobic, \n        goal: 150, \n        percentage: categoryPercentages.aerobic,\n        color: '#4CAF50',\n        description: '150 min/week goal'\n      },\n      { \n        name: 'Strength', \n        value: weeklyCategories.strengthSessions, \n        goal: 2, \n        percentage: categoryPercentages.strength,\n        color: '#2196F3',\n        description: '2+ sessions/week'\n      },\n      { \n        name: 'Balance', \n        value: weeklyCategories.flexibilitySessions, \n        goal: 1, \n        percentage: categoryPercentages.flexibility,\n        color: '#FF9800',\n        description: '1+ session/week'\n      }\n    ];\n\n    return (\n      <div className={`exercise-chart-container ${isExpanded ? 'expanded' : ''}`}>\n        <div className=\"exercise-header\">\n          <h3 className=\"chart-title\">Exercise Goals Progress</h3>\n          <h4 className=\"chart-subtitle\">{nav.getFormattedDateRange()}</h4>\n          \n          {/* View Toggle - Always show for unified mode */}\n          {viewMode === 'unified' && (\n            <div className=\"view-toggle\">\n              <button \n                className={`toggle-btn ${!showWeeklyGoals ? 'active' : ''}`}\n                onClick={() => setShowWeeklyGoals(false)}\n              >\n                Activity Breakdown\n              </button>\n              <button \n                className={`toggle-btn ${showWeeklyGoals ? 'active' : ''}`}\n                onClick={() => setShowWeeklyGoals(true)}\n              >\n                Weekly Goals\n              </button>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"physician-exercise-bars\">\n          {categories.map((category, index) => (\n            <div key={category.name} className=\"exercise-category-bar\">\n              <div className=\"category-header\">\n                <span className=\"category-name\">{category.name}</span>\n                <span className=\"category-percentage\">{category.percentage}%</span>\n              </div>\n              <div className=\"bar-container\">\n                <div \n                  className=\"bar-fill\" \n                  style={{ \n                    width: `${category.percentage}%`,\n                    backgroundColor: category.color,\n                    opacity: category.percentage > 0 ? 0.8 : 0.3\n                  }}\n                />\n              </div>\n              <div className=\"category-details\">\n                <span className=\"category-value\">\n                  {category.name === 'Aerobic' ? `${category.value} min` : `${category.value} sessions`}\n                </span>\n                <span className=\"category-goal\">Goal: {category.description}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"summary-container\">\n          <div className=\"chart-summary\">\n            <h4>Week Summary</h4>\n            <div className=\"summary-stats\">\n              <div className=\"stat-item\">\n                <span className=\"stat-label\">Aerobic Activity:</span>\n                <span className=\"stat-value\">{weeklyCategories.aerobic} minutes</span>\n              </div>\n              <div className=\"stat-item\">\n                <span className=\"stat-label\">Strength Sessions:</span>\n                <span className=\"stat-value\">{weeklyCategories.strengthSessions} sessions</span>\n              </div>\n              <div className=\"stat-item\">\n                <span className=\"stat-label\">Balance Sessions:</span>\n                <span className=\"stat-value\">{weeklyCategories.flexibilitySessions} sessions</span>\n              </div>\n              <div className=\"stat-item\">\n                <span className=\"stat-label\">Goal Achievement:</span>\n                <span className=\"stat-value\">\n                  {Object.values(categoryPercentages).filter(p => p >= 100).length}/3 categories\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n      <div className={`exercise-chart-container ${isExpanded ? 'expanded' : ''}`}>\n        <div className=\"exercise-header\">\n          <h3 className=\"chart-title\">Activity Breakdown by Type</h3>\n          <h4 className=\"chart-subtitle\">{nav.getFormattedDateRange()}</h4>\n          \n          {/* View Toggle */}\n          {viewMode === 'unified' && (\n            <div className=\"view-toggle\">\n              <button \n                className={`toggle-btn ${!showWeeklyGoals ? 'active' : ''}`}\n                onClick={() => setShowWeeklyGoals(false)}\n              >\n                Activity Breakdown\n              </button>\n              <button \n                className={`toggle-btn ${showWeeklyGoals ? 'active' : ''}`}\n                onClick={() => setShowWeeklyGoals(true)}\n              >\n                Weekly Goals\n              </button>\n            </div>\n          )}\n        </div>\n        \n        <svg \n          width=\"100%\" \n          viewBox={`0 0 ${config.width} ${config.height}`}\n          className=\"exercise-svg\"\n        >\n          <g className=\"y-axis\">\n            {yAxisLabels.map(value => {\n              const y = config.padding.top + chartHeight - (value / maxDuration) * chartHeight;\n              return (\n                <g key={value} className=\"y-axis-grid-group\">\n                  <line className=\"chart-grid-line-horizontal\" x1={config.padding.left} y1={y} x2={config.width - config.padding.right} y2={y} />\n                  <text x={config.padding.left - 15} y={y + 3} fontSize={config.fontSize.yAxis} textAnchor=\"end\" fill=\"var(--chart-color-text-secondary)\" className=\"chart-tick-label\">{value}</text>\n                </g>\n              );\n            })}\n            <text x={-(config.padding.top + chartHeight / 2)} y={config.padding.left / 2 - 5} fontSize={config.fontSize.yAxisTitle} textAnchor=\"middle\" fill=\"var(--chart-color-text-primary)\" transform=\"rotate(-90)\" className=\"y-axis-title\">Minutes</text>\n          </g>\n\n          <g className=\"x-axis\">\n            {daysOfWeek.map((day, dayIndex) => {\n              const date = new Date(startOfWeek);\n              date.setDate(date.getDate() + dayIndex);\n              const x = config.padding.left + dayIndex * config.dayWidth + config.dayWidth / 2;\n\n              const dayData = groupedData[day];\n              const performedExercises = exerciseTypes.filter(type => (dayData[type.key] || 0) > 0);\n              const emojis = performedExercises.map(type => type.emoji).join(' ');\n\n              return (\n                <g key={dayIndex} className=\"x-axis-label-group\">\n                  <line className=\"chart-grid-line-vertical\" x1={config.padding.left + dayIndex * config.dayWidth} y1={config.padding.top} x2={config.padding.left + dayIndex * config.dayWidth} y2={config.height - config.padding.bottom} />\n                  <text x={x} y={config.height - config.padding.bottom + 15} textAnchor=\"middle\" fontSize={config.fontSize.dayLabel} fill=\"var(--chart-color-text-primary)\" className=\"x-axis-day-label\">{day}</text>\n                  <text x={x} y={config.height - config.padding.bottom + 30} textAnchor=\"middle\" fontSize={config.fontSize.dateLabel} fill=\"var(--chart-color-text-secondary)\" className=\"x-axis-date-label\">{date.getDate()}</text>\n                  <text x={x} y={config.height - config.padding.bottom + 48} textAnchor=\"middle\" fontSize={config.fontSize.emoji}>{emojis}</text>\n                </g>\n              );\n            })}\n          </g>\n\n          <g className=\"data-bars\">\n            {daysOfWeek.map((day, dayIndex) => {\n              const dayData = groupedData[day];\n              const x = config.padding.left + dayIndex * config.dayWidth + config.dayWidth / 2;\n              let currentY = config.height - config.padding.bottom;\n\n              return (\n                <g key={day}>\n                  {exerciseTypes.map(type => {\n                    const minutes = Number(dayData[type.key]) || 0;\n                    if (minutes <= 0) return null;\n\n                    const segmentHeight = (minutes / maxDuration) * chartHeight;\n                    const segmentY = currentY - segmentHeight;\n\n                    const segment = (\n                      <g key={type.key}>\n                        <rect\n                          x={x - config.barWidth / 2}\n                          y={segmentY}\n                          width={config.barWidth}\n                          height={segmentHeight}\n                          fill={type.color}\n                          className=\"data-bar\"\n                        >\n                          <title>{`${type.label}: ${Math.round(minutes)} min`}</title>\n                        </rect>\n                        {/* Duration label inside the segment */}\n                        {segmentHeight >= 12 && (\n                          <text\n                            x={x}\n                            y={segmentY + segmentHeight / 2}\n                            textAnchor=\"middle\"\n                            fontSize={isExpanded ? 8 : 6}\n                            fill=\"black\"\n                            className=\"duration-label\"\n                            style={{ \n                              fontWeight: 'bold'\n                            }}\n                          >\n                            {Math.round(minutes)}\n                          </text>\n                        )}\n                      </g>\n                    );\n\n                    currentY = segmentY;\n                    return segment;\n                  })}\n                </g>\n              );\n            })}\n          </g>\n        </svg>\n        \n        <Legend \n          title=\"Exercise Type\" \n          items={exerciseLegendItems} \n          orientation=\"horizontal\" \n          size=\"medium\" \n          hide={screenshotMode}\n        />\n\n        {/* Show summary for physician/unified view */}\n        {(viewMode === 'physician' || viewMode === 'unified') && weekSummary && (\n          <div className=\"summary-container\">\n            <div className=\"chart-summary\">\n              <h4>Week Summary</h4>\n              <div className=\"summary-stats\">\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Total Exercise:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.totalMinutes} minutes\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Daily Average:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgMinutesPerDay} minutes/day\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Exercise Days:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.daysWithExercise}/7 days\n                  </span>\n                </div>\n\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Most Common:</span>\n                  <span className=\"stat-value\">\n                    {exerciseTypes.find(t => t.key === weekSummary.mostCommonExercise)?.emoji} {weekSummary.mostCommonExercise} ({weekSummary.mostCommonExerciseMinutes} min)\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Avg Session:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgSessionLength} minutes\n                  </span>\n                </div>\n              </div>\n            </div>\n            \n            {showThreeMonthSummaries && threeMonthSummary && (\n              <div className=\"chart-summary\">\n                <h4>3-Month Summary</h4>\n                <div className=\"summary-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Total Exercise:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.totalMinutes} minutes\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Daily Average:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgMinutesPerDay} minutes/day\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Exercise Days:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.daysWithExercise} days\n                    </span>\n                  </div>\n\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Most Common:</span>\n                    <span className=\"stat-value\">\n                      {exerciseTypes.find(t => t.key === threeMonthSummary.mostCommonExercise)?.emoji} {threeMonthSummary.mostCommonExercise} ({threeMonthSummary.mostCommonExerciseMinutes} min)\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Avg Session:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgSessionLength} minutes\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n  );\n};\n\nexport default ExerciseChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}