{"ast":null,"code":"/*\n usePatientData.js - Patient Data Management Hook\n \n This custom hook manages all patient data operations including fetching and caching\n patient data from CSV files, providing loading, error, and data states, handling\n data validation and error recovery, and offering convenient access to individual\n health metric datasets.\n \n Architecture:\n - Uses React hooks for state management (useState, useEffect)\n - Implements data caching to optimize performance\n - Provides comprehensive error handling and recovery\n - Offers convenient data access patterns for components\n \n State Management:\n - data: The complete patient data object\n - loading: Boolean indicating if data is being fetched\n - error: Error message if data fetching failed\n - lastFetchedId: Tracks the last patient ID to prevent unnecessary re-fetching\n \n Data Structure:\n - patientInfo: Patient demographics and medical information\n - glucoseData: Blood glucose readings with timestamps and ranges\n - bloodPressureData: Blood pressure measurements with systolic/diastolic values\n - exerciseData: Physical activity tracking with duration and type\n - moodData: Daily mood assessments\n - painData: Pain reports with location and intensity\n - sleepData: Sleep duration and quality measurements\n - mealData: Nutritional intake tracking\n \n Utility Functions:\n - refetch: Forces a fresh data fetch for the current patient\n - clearData: Clears all cached data and resets state\n - hasData: Boolean indicating if data is available\n - isEmpty: Boolean indicating if no data is available and not loading\n - isError: Boolean indicating if an error occurred\n */import React,{useState,useEffect}from'react';import{getPatientData}from'../services/dataService';/*\n Simple hook for loading patient data\n */const usePatientData=patientId=>{const[data,setData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const loadData=async id=>{if(!id||typeof id!=='string'){setLoading(false);setData(null);setError(null);return;}try{setLoading(true);setError(null);const patientData=await getPatientData(id);if(patientData&&patientData.patientInfo){setData(patientData);}else{throw new Error('Invalid data structure received');}}catch(err){const errorMessage=err instanceof Error?err.message:'Unknown error occurred';setError(errorMessage);setData(null);if(process.env.NODE_ENV==='development'){console.error('Error loading patient data:',err);}}finally{setLoading(false);}};useEffect(()=>{if(patientId){loadData(patientId);}else{setData(null);setError(null);setLoading(false);}},[patientId]);const refetch=()=>{if(patientId){loadData(patientId);}};const clearData=()=>{setData(null);setError(null);setLoading(false);};return{// Core data\ndata,loading,error,// Patient info\npatientInfo:(data===null||data===void 0?void 0:data.patientInfo)||null,// Individual data types for convenience\nglucoseData:(data===null||data===void 0?void 0:data.glucoseData)||[],bloodPressureData:(data===null||data===void 0?void 0:data.bloodPressureData)||[],exerciseData:(data===null||data===void 0?void 0:data.exerciseData)||[],moodData:(data===null||data===void 0?void 0:data.moodData)||[],painData:(data===null||data===void 0?void 0:data.painData)||[],mealData:(data===null||data===void 0?void 0:data.mealData)||[],sleepData:(data===null||data===void 0?void 0:data.sleepData)||[],// Actions\nrefetch,clearData,// Helper flags\nhasData:!!data,isEmpty:!loading&&!error&&!data,isError:!!error,// Data availability flags\nhasGlucoseData:((data===null||data===void 0?void 0:data.glucoseData)||[]).length>0,hasBloodPressureData:((data===null||data===void 0?void 0:data.bloodPressureData)||[]).length>0,hasExerciseData:((data===null||data===void 0?void 0:data.exerciseData)||[]).length>0,hasMoodData:((data===null||data===void 0?void 0:data.moodData)||[]).length>0,hasPainData:((data===null||data===void 0?void 0:data.painData)||[]).length>0,hasSleepData:((data===null||data===void 0?void 0:data.sleepData)||[]).length>0,hasMealData:((data===null||data===void 0?void 0:data.mealData)||[]).length>0};};export default usePatientData;","map":{"version":3,"names":["React","useState","useEffect","getPatientData","usePatientData","patientId","data","setData","loading","setLoading","error","setError","loadData","id","patientData","patientInfo","Error","err","errorMessage","message","process","env","NODE_ENV","console","refetch","clearData","glucoseData","bloodPressureData","exerciseData","moodData","painData","mealData","sleepData","hasData","isEmpty","isError","hasGlucoseData","length","hasBloodPressureData","hasExerciseData","hasMoodData","hasPainData","hasSleepData","hasMealData"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local Experimental/PGHD_Visualization_Dashboard/src/hooks/usePatientData.js"],"sourcesContent":["/*\n usePatientData.js - Patient Data Management Hook\n \n This custom hook manages all patient data operations including fetching and caching\n patient data from CSV files, providing loading, error, and data states, handling\n data validation and error recovery, and offering convenient access to individual\n health metric datasets.\n \n Architecture:\n - Uses React hooks for state management (useState, useEffect)\n - Implements data caching to optimize performance\n - Provides comprehensive error handling and recovery\n - Offers convenient data access patterns for components\n \n State Management:\n - data: The complete patient data object\n - loading: Boolean indicating if data is being fetched\n - error: Error message if data fetching failed\n - lastFetchedId: Tracks the last patient ID to prevent unnecessary re-fetching\n \n Data Structure:\n - patientInfo: Patient demographics and medical information\n - glucoseData: Blood glucose readings with timestamps and ranges\n - bloodPressureData: Blood pressure measurements with systolic/diastolic values\n - exerciseData: Physical activity tracking with duration and type\n - moodData: Daily mood assessments\n - painData: Pain reports with location and intensity\n - sleepData: Sleep duration and quality measurements\n - mealData: Nutritional intake tracking\n \n Utility Functions:\n - refetch: Forces a fresh data fetch for the current patient\n - clearData: Clears all cached data and resets state\n - hasData: Boolean indicating if data is available\n - isEmpty: Boolean indicating if no data is available and not loading\n - isError: Boolean indicating if an error occurred\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { getPatientData } from '../services/dataService';\n\n/*\n Simple hook for loading patient data\n */\nconst usePatientData = (patientId) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const loadData = async (id) => {\n    if (!id || typeof id !== 'string') {\n      setLoading(false);\n      setData(null);\n      setError(null);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const patientData = await getPatientData(id);\n      \n      if (patientData && patientData.patientInfo) {\n        setData(patientData);\n      } else {\n        throw new Error('Invalid data structure received');\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error occurred';\n      setError(errorMessage);\n      setData(null);\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Error loading patient data:', err);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (patientId) {\n      loadData(patientId);\n    } else {\n      setData(null);\n      setError(null);\n      setLoading(false);\n    }\n  }, [patientId]);\n\n  const refetch = () => {\n    if (patientId) {\n      loadData(patientId);\n    }\n  };\n\n  const clearData = () => {\n    setData(null);\n    setError(null);\n    setLoading(false);\n  };\n\n  return {\n    // Core data\n    data,\n    loading,\n    error,\n    \n    // Patient info\n    patientInfo: data?.patientInfo || null,\n    \n    // Individual data types for convenience\n    glucoseData: data?.glucoseData || [],\n    bloodPressureData: data?.bloodPressureData || [],\n    exerciseData: data?.exerciseData || [],\n    moodData: data?.moodData || [],\n    painData: data?.painData || [],\n    mealData: data?.mealData || [],\n    sleepData: data?.sleepData || [],\n    \n    // Actions\n    refetch,\n    clearData,\n    \n    // Helper flags\n    hasData: !!data,\n    isEmpty: !loading && !error && !data,\n    isError: !!error,\n    \n    // Data availability flags\n    hasGlucoseData: (data?.glucoseData || []).length > 0,\n    hasBloodPressureData: (data?.bloodPressureData || []).length > 0,\n    hasExerciseData: (data?.exerciseData || []).length > 0,\n    hasMoodData: (data?.moodData || []).length > 0,\n    hasPainData: (data?.painData || []).length > 0,\n    hasSleepData: (data?.sleepData || []).length > 0,\n    hasMealData: (data?.mealData || []).length > 0\n  };\n};\n\nexport default usePatientData;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}