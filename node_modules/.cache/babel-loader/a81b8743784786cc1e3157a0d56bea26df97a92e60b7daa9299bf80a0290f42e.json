{"ast":null,"code":"import React,{useState,useRef,useLayoutEffect,useMemo}from'react';import usePatientData from'../../hooks/usePatientData';import ChartContainer from'../ChartContainer';import Legend from'../Legend';import InfoBox from'../InfoBox';import Tooltip from'../ui/Tooltip';import'./BloodPressureChart.css';import'../ChartStyles.css';// --- Constants ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TIME_LABELS=['12a','12p','12a'];const TIME_HOURS=[0,12,24];const getChartConfig=function(isExpanded){let containerWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:400;// Use responsive width with minimum constraints\nconst minWidth=320;const maxWidth=isExpanded?Math.min(700,containerWidth*0.6):600;const responsiveWidth=Math.max(minWidth,Math.min(maxWidth,containerWidth||400));const config={width:responsiveWidth,// Responsive width based on container\nheight:isExpanded?320:180,// Increased height for expanded view\npadding:{top:40,right:20,bottom:60,// Increased bottom padding for expanded view\nleft:isExpanded?70:60// Increased left padding for expanded view\n},yAxisRange:{systolic:200,diastolic:120},yAxisOffset:{systolic:0,diastolic:0},fontSize:{yAxis:isExpanded?14:12,yAxisTitle:isExpanded?16:14,timeLabel:isExpanded?10:8,dayLabel:isExpanded?10:8,dateLabel:isExpanded?10:8}};// Calculate dimensions based on the fixed configuration\nconst contentWidth=config.width-config.padding.left-config.padding.right;config.dayWidth=contentWidth/7;config.barWidth=isExpanded?12:6;config.dayPadding=isExpanded?8:4;// Y-axis labels change based on the expanded state for clarity.\nconfig.yAxisLabels={systolic:isExpanded?[0,40,80,120,160,200]:[0,100,200],diastolic:isExpanded?[0,20,40,60,80,100,120]:[0,60,120]};return config;};// --- Helper Functions ---\nconst getWeekStart=date=>{const d=new Date(date);const day=d.getDay();const diff=d.getDate()-day;return new Date(d.setDate(diff));};const formatDayLabel=date=>date.toLocaleDateString('en-US',{weekday:'short'});const getTimePosition=(date,dayIndex,config)=>{const hour=date.getHours()+date.getMinutes()/60;const timeRatio=hour/24;const dayContentWidth=config.dayWidth-config.dayPadding*2;return config.padding.left+dayIndex*config.dayWidth+config.dayPadding+timeRatio*dayContentWidth;};// --- Chart Sub-components ---\nconst YAxis=_ref=>{let{config,type}=_ref;const chartHeight=config.height-config.padding.top-config.padding.bottom;const yAxisLabels=config.yAxisLabels[type];const valueRange=config.yAxisRange[type];const yOffset=config.yAxisOffset[type];return/*#__PURE__*/_jsxs(\"g\",{className:\"y-axis\",children:[/*#__PURE__*/_jsx(\"text\",{x:config.padding.left/3,y:config.padding.top+chartHeight/2,fontSize:config.fontSize.yAxisTitle,textAnchor:\"middle\",fill:\"#666\",transform:\"rotate(-90, \".concat(config.padding.left/3,\", \").concat(config.padding.top+chartHeight/2,\")\"),children:\"mm Hg\"}),yAxisLabels.map(value=>{const y=config.height-config.padding.bottom-(value-yOffset)/valueRange*chartHeight;return/*#__PURE__*/_jsxs(\"g\",{className:\"y-axis-grid-group\",children:[/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-horizontal\",x1:config.padding.left,y1:y,x2:config.width-config.padding.right,y2:y}),/*#__PURE__*/_jsx(\"text\",{x:config.padding.left-10,y:y+3,fontSize:config.fontSize.yAxis,textAnchor:\"end\",fill:\"#666\",children:value})]},value);})]});};const XAxis=_ref2=>{let{config,weekDays}=_ref2;return/*#__PURE__*/_jsxs(\"g\",{className:\"x-axis\",children:[weekDays.map((day,dayIndex)=>{const dayX=config.padding.left+dayIndex*config.dayWidth;const dayCenterX=dayX+config.dayWidth/2;// Tick positions\nconst startTickX=dayX;const middleTickX=dayX+config.dayWidth/2;return/*#__PURE__*/_jsxs(\"g\",{className:\"x-axis-label-group\",children:[/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:startTickX,y1:config.height-config.padding.bottom,x2:startTickX,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:middleTickX,y1:config.height-config.padding.bottom,x2:middleTickX,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:startTickX,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},fill:\"#999\",children:\"12a\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:middleTickX,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},fill:\"#999\",children:\"12p\"}),/*#__PURE__*/_jsx(\"text\",{x:dayCenterX,y:config.height-config.padding.bottom+35,textAnchor:\"middle\",className:\"day-label\",fontSize:config.fontSize.dayLabel,style:{fontSize:'8px'},fill:\"#666\",children:formatDayLabel(day)}),/*#__PURE__*/_jsx(\"text\",{x:dayCenterX,y:config.height-config.padding.bottom+52,textAnchor:\"middle\",className:\"date-label\",fontSize:config.fontSize.dateLabel,style:{fontSize:'8px'},fill:\"#888\",children:day.getDate()})]},dayIndex);}),/*#__PURE__*/_jsx(\"line\",{className:\"x-axis-tick\",x1:config.padding.left+weekDays.length*config.dayWidth,y1:config.height-config.padding.bottom,x2:config.padding.left+weekDays.length*config.dayWidth,y2:config.height-config.padding.bottom+5,stroke:\"#666\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{className:\"time-label\",x:config.padding.left+weekDays.length*config.dayWidth,y:config.height-config.padding.bottom+15,textAnchor:\"middle\",fontSize:config.fontSize.timeLabel,style:{fontSize:'8px'},fill:\"#999\",children:\"12a\"})]});};const GridLines=_ref3=>{let{config,weekDays}=_ref3;return/*#__PURE__*/_jsxs(\"g\",{className:\"grid-lines\",children:[weekDays.map((_,dayIndex)=>{const dayX=config.padding.left+dayIndex*config.dayWidth;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical\",x1:dayX,y1:config.padding.top,x2:dayX,y2:config.height-config.padding.bottom}),[0,12].map(hour=>{const timeRatio=hour/24;const x=config.padding.left+dayIndex*config.dayWidth+timeRatio*config.dayWidth;return/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical-time\",x1:x,y1:config.padding.top,x2:x,y2:config.height-config.padding.bottom},\"\".concat(dayIndex,\"-\").concat(hour));})]},dayIndex);}),/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical\",x1:config.padding.left+weekDays.length*config.dayWidth,y1:config.padding.top,x2:config.padding.left+weekDays.length*config.dayWidth,y2:config.height-config.padding.bottom})]});};const DataBars=_ref4=>{let{readings,type,config,onBarHover,onBarLeave}=_ref4;const chartHeight=config.height-config.padding.top-config.padding.bottom;const valueRange=config.yAxisRange[type];const yOffset=config.yAxisOffset[type];const getColor=type==='systolic'?getSystolicColor:getDiastolicColor;return/*#__PURE__*/_jsx(\"g\",{className:\"data-bars\",children:readings.map((reading,index)=>{const readingDate=new Date(reading.date);const dayIndex=readingDate.getDay();const x=getTimePosition(readingDate,dayIndex,config);const value=reading[type];const barHeight=value/valueRange*chartHeight;const y=config.height-config.padding.bottom-barHeight;const handleMouseEnter=event=>{const tooltipData={type:type==='systolic'?'Systolic':'Diastolic',value:value,unit:'mmHg',time:readingDate.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}),date:readingDate.toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'}),position:{x:event.clientX,y:event.clientY}};onBarHover(tooltipData);};const handleMouseLeave=()=>{onBarLeave();};return/*#__PURE__*/_jsx(\"rect\",{x:x-config.barWidth/2,y:y,width:config.barWidth,height:Math.max(0,barHeight),fill:getColor(value),style:{cursor:'pointer'},onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave},index);})});};const Chart=_ref5=>{let{type,weekData,isExpanded,weekDays,containerWidth,onBarHover,onBarLeave}=_ref5;const config=getChartConfig(isExpanded,containerWidth);const readings=weekData.filter(d=>d[type]&&d[type]>0);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-section \".concat(isExpanded?'expanded':''),children:[/*#__PURE__*/_jsx(\"h4\",{className:\"chart-subtitle\",children:type==='systolic'?'Systolic':'Diastolic'}),/*#__PURE__*/_jsx(\"div\",{className:\"bp-svg-container\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"100%\",height:\"100%\",viewBox:\"0 0 \".concat(config.width,\" \").concat(config.height),className:\"chart-svg\",children:[/*#__PURE__*/_jsx(GridLines,{config:config,weekDays:weekDays}),/*#__PURE__*/_jsx(YAxis,{config:config,type:type}),/*#__PURE__*/_jsx(XAxis,{config:config,weekDays:weekDays}),/*#__PURE__*/_jsx(DataBars,{readings:readings,type:type,config:config,onBarHover:onBarHover,onBarLeave:onBarLeave})]})})]});};const getSystolicColor=value=>{if(value<120)return'var(--chart-color-good)';if(value<130)return'var(--chart-color-warning)';return'var(--chart-color-danger)';};const getDiastolicColor=value=>{if(value<80)return'var(--chart-color-good)';if(value<90)return'var(--chart-color-warning)';return'var(--chart-color-danger)';};const bloodPressureLegendItems=[{color:'var(--chart-color-good)',label:'Normal',description:'Blood pressure within healthy range'},{color:'var(--chart-color-warning)',label:'Elevated',description:'Blood pressure slightly elevated'},{color:'var(--chart-color-danger)',label:'High',description:'Blood pressure high - requires attention'}];// --- Main Component ---\nconst BloodPressureChart=_ref6=>{let{patientId,isExpanded=false,onExpand,isPhysicianView=false}=_ref6;const{bloodPressureData,loading,error}=usePatientData(patientId,'bloodPressure');const[currentWeek,setCurrentWeek]=useState(new Date(2025,4,1));const[containerWidth,setContainerWidth]=useState(400);const[tooltipData,setTooltipData]=useState(null);const[tooltipPosition,setTooltipPosition]=useState({x:0,y:0});const containerRef=useRef(null);// Resize observer to track container width changes\nuseLayoutEffect(()=>{const observeContainer=()=>{if(containerRef.current){const resizeObserver=new ResizeObserver(entries=>{for(let entry of entries){const{width}=entry.contentRect;setContainerWidth(width);}});resizeObserver.observe(containerRef.current);return()=>resizeObserver.disconnect();}};const cleanup=observeContainer();return cleanup;},[]);const weekStart=getWeekStart(currentWeek);const weekEnd=new Date(weekStart);weekEnd.setDate(weekEnd.getDate()+6);const weekData=bloodPressureData.filter(d=>{const readingDate=new Date(d.date);return readingDate>=weekStart&&readingDate<=weekEnd;});const weekDays=Array.from({length:7},(_,i)=>{const d=new Date(weekStart);d.setDate(weekStart.getDate()+i);return d;});const goToPreviousWeek=()=>setCurrentWeek(prev=>new Date(prev.setDate(prev.getDate()-7)));const goToNextWeek=()=>setCurrentWeek(prev=>new Date(prev.setDate(prev.getDate()+7)));const formatDateRange=(start,end)=>{const startStr=start.toLocaleDateString('en-US',{month:'short',day:'numeric'});const endStr=end.toLocaleDateString('en-US',{month:'short',day:'numeric'});return\"\".concat(startStr,\" to \").concat(endStr);};const handleBarHover=data=>{setTooltipData(data);setTooltipPosition(data.position);};const handleBarLeave=()=>{setTooltipData(null);};// Calculate summary statistics for physician view\nconst weekSummary=useMemo(()=>{if(!weekData.length)return null;const systolicReadings=weekData.filter(d=>d.systolic&&d.systolic>0).map(d=>d.systolic);const diastolicReadings=weekData.filter(d=>d.diastolic&&d.diastolic>0).map(d=>d.diastolic);const avgSystolic=systolicReadings.length>0?(systolicReadings.reduce((sum,val)=>sum+val,0)/systolicReadings.length).toFixed(0):0;const avgDiastolic=diastolicReadings.length>0?(diastolicReadings.reduce((sum,val)=>sum+val,0)/diastolicReadings.length).toFixed(0):0;const maxSystolic=systolicReadings.length>0?Math.max(...systolicReadings):0;const maxDiastolic=diastolicReadings.length>0?Math.max(...diastolicReadings):0;const getRiskCategory=(systolic,diastolic)=>{if(systolic>=135||diastolic>=85)return'High Risk';if(systolic>=121||diastolic>=80)return'Medium Risk';return'Low Risk';};const avgRisk=getRiskCategory(parseFloat(avgSystolic),parseFloat(avgDiastolic));const daysWithReadings=new Set(weekData.map(d=>d.date.toDateString())).size;return{avgSystolic,avgDiastolic,maxSystolic,maxDiastolic,avgRisk,daysWithReadings,totalReadings:weekData.length};},[weekData]);return/*#__PURE__*/_jsxs(ChartContainer,{title:\"Blood Pressure\",icon:\"\\u2764\\uFE0F\",isLoading:loading,error:error,noData:!loading&&!error&&(!bloodPressureData||bloodPressureData.length===0),onPrev:goToPreviousWeek,onNext:goToNextWeek,navigationLabel:formatDateRange(weekStart,weekEnd),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bp-chart-container\",ref:containerRef,children:[/*#__PURE__*/_jsx(Legend,{title:\"Blood Pressure Category:\",items:bloodPressureLegendItems}),/*#__PURE__*/_jsxs(\"div\",{className:\"bp-chart-content \".concat(isExpanded?'expanded':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bp-charts-wrapper\",children:[/*#__PURE__*/_jsx(Chart,{type:\"systolic\",weekData:weekData,isExpanded:isExpanded,weekDays:weekDays,containerWidth:containerWidth,onBarHover:handleBarHover,onBarLeave:handleBarLeave}),/*#__PURE__*/_jsx(Chart,{type:\"diastolic\",weekData:weekData,isExpanded:isExpanded,weekDays:weekDays,containerWidth:containerWidth,onBarHover:handleBarHover,onBarLeave:handleBarLeave})]}),isPhysicianView&&weekSummary?/*#__PURE__*/_jsxs(\"div\",{className:\"chart-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Week Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Average BP:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.avgSystolic,\"/\",weekSummary.avgDiastolic,\" mmHg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Peak BP:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.maxSystolic,\"/\",weekSummary.maxDiastolic,\" mmHg\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Risk Category:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value \".concat(weekSummary.avgRisk.toLowerCase().replace(' ','-')),children:weekSummary.avgRisk})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Reading Days:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.daysWithReadings,\"/7 days\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Total Readings:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:weekSummary.totalReadings})]})]})]}):!isPhysicianView?/*#__PURE__*/_jsx(InfoBox,{title:\"Blood Pressure Information\",content:\"These are general targets: a blood pressure of 120/80 or less is considered low risk. Readings between 121-134 (systolic) or 80-84 (diastolic) are medium risk, while 135/85 or higher is high risk. For those with diabetes, a reading of 130/80 or higher is considered high risk. Always consult a healthcare professional for your personal targets.\"}):null]})]}),/*#__PURE__*/_jsx(Tooltip,{isVisible:!!tooltipData,content:tooltipData&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip-title\",children:[tooltipData.type,\" Blood Pressure\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip-value\",children:[tooltipData.value,\" \",tooltipData.unit]}),/*#__PURE__*/_jsx(\"div\",{className:\"tooltip-time\",children:tooltipData.time}),/*#__PURE__*/_jsx(\"div\",{className:\"tooltip-date\",children:tooltipData.date})]}),position:tooltipPosition,containerRef:containerRef})]});};export default BloodPressureChart;","map":{"version":3,"names":["React","useState","useRef","useLayoutEffect","useMemo","usePatientData","ChartContainer","Legend","InfoBox","Tooltip","jsx","_jsx","jsxs","_jsxs","TIME_LABELS","TIME_HOURS","getChartConfig","isExpanded","containerWidth","arguments","length","undefined","minWidth","maxWidth","Math","min","responsiveWidth","max","config","width","height","padding","top","right","bottom","left","yAxisRange","systolic","diastolic","yAxisOffset","fontSize","yAxis","yAxisTitle","timeLabel","dayLabel","dateLabel","contentWidth","dayWidth","barWidth","dayPadding","yAxisLabels","getWeekStart","date","d","Date","day","getDay","diff","getDate","setDate","formatDayLabel","toLocaleDateString","weekday","getTimePosition","dayIndex","hour","getHours","getMinutes","timeRatio","dayContentWidth","YAxis","_ref","type","chartHeight","valueRange","yOffset","className","children","x","y","textAnchor","fill","transform","concat","map","value","x1","y1","x2","y2","XAxis","_ref2","weekDays","dayX","dayCenterX","startTickX","middleTickX","stroke","strokeWidth","style","GridLines","_ref3","_","DataBars","_ref4","readings","onBarHover","onBarLeave","getColor","getSystolicColor","getDiastolicColor","reading","index","readingDate","barHeight","handleMouseEnter","event","tooltipData","unit","time","toLocaleTimeString","minute","hour12","month","position","clientX","clientY","handleMouseLeave","cursor","onMouseEnter","onMouseLeave","Chart","_ref5","weekData","filter","viewBox","bloodPressureLegendItems","color","label","description","BloodPressureChart","_ref6","patientId","onExpand","isPhysicianView","bloodPressureData","loading","error","currentWeek","setCurrentWeek","setContainerWidth","setTooltipData","tooltipPosition","setTooltipPosition","containerRef","observeContainer","current","resizeObserver","ResizeObserver","entries","entry","contentRect","observe","disconnect","cleanup","weekStart","weekEnd","Array","from","i","goToPreviousWeek","prev","goToNextWeek","formatDateRange","start","end","startStr","endStr","handleBarHover","data","handleBarLeave","weekSummary","systolicReadings","diastolicReadings","avgSystolic","reduce","sum","val","toFixed","avgDiastolic","maxSystolic","maxDiastolic","getRiskCategory","avgRisk","parseFloat","daysWithReadings","Set","toDateString","size","totalReadings","title","icon","isLoading","noData","onPrev","onNext","navigationLabel","ref","items","toLowerCase","replace","content","isVisible"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local/MCC_digital_health_data_visualizations/src/components/patient_charts/BloodPressureChart.js"],"sourcesContent":["import React, { useState, useRef, useLayoutEffect, useMemo } from 'react';\r\nimport usePatientData from '../../hooks/usePatientData';\r\nimport ChartContainer from '../ChartContainer';\r\nimport Legend from '../Legend';\r\nimport InfoBox from '../InfoBox';\r\nimport Tooltip from '../ui/Tooltip';\r\nimport './BloodPressureChart.css';\r\nimport '../ChartStyles.css';\r\n\r\n// --- Constants ---\r\nconst TIME_LABELS = ['12a', '12p', '12a'];\r\nconst TIME_HOURS = [0, 12, 24];\r\n\r\nconst getChartConfig = (isExpanded, containerWidth = 400) => {\r\n  // Use responsive width with minimum constraints\r\n  const minWidth = 320;\r\n  const maxWidth = isExpanded ? Math.min(700, containerWidth * 0.6) : 600;\r\n  const responsiveWidth = Math.max(minWidth, Math.min(maxWidth, containerWidth || 400));\r\n  \r\n  const config = {\r\n    width: responsiveWidth,             // Responsive width based on container\r\n    height: isExpanded ? 320 : 180,     // Increased height for expanded view\r\n    padding: {\r\n      top: 40,\r\n      right: 20,\r\n      bottom: 60,                       // Increased bottom padding for expanded view\r\n      left: isExpanded ? 70 : 60,       // Increased left padding for expanded view\r\n    },\r\n    yAxisRange: { systolic: 200, diastolic: 120 },\r\n    yAxisOffset: { systolic: 0, diastolic: 0 },\r\n    fontSize: {\r\n      yAxis: isExpanded ? 14 : 12,\r\n      yAxisTitle: isExpanded ? 16 : 14,\r\n      timeLabel: isExpanded ? 10 : 8,\r\n      dayLabel: isExpanded ? 10 : 8,\r\n      dateLabel: isExpanded ? 10 : 8,\r\n    },\r\n  };\r\n\r\n  // Calculate dimensions based on the fixed configuration\r\n  const contentWidth = config.width - config.padding.left - config.padding.right;\r\n  config.dayWidth = contentWidth / 7;\r\n  config.barWidth = isExpanded ? 12 : 6;\r\n  config.dayPadding = isExpanded ? 8 : 4;\r\n\r\n  // Y-axis labels change based on the expanded state for clarity.\r\n  config.yAxisLabels = {\r\n    systolic: isExpanded ? [0, 40, 80, 120, 160, 200] : [0, 100, 200],\r\n    diastolic: isExpanded ? [0, 20, 40, 60, 80, 100, 120] : [0, 60, 120],\r\n  };\r\n\r\n  return config;\r\n};\r\n\r\n// --- Helper Functions ---\r\nconst getWeekStart = (date) => {\r\n  const d = new Date(date);\r\n  const day = d.getDay();\r\n  const diff = d.getDate() - day;\r\n  return new Date(d.setDate(diff));\r\n};\r\n\r\nconst formatDayLabel = (date) => date.toLocaleDateString('en-US', { weekday: 'short' });\r\n\r\nconst getTimePosition = (date, dayIndex, config) => {\r\n  const hour = date.getHours() + date.getMinutes() / 60;\r\n  const timeRatio = hour / 24;\r\n  const dayContentWidth = config.dayWidth - config.dayPadding * 2;\r\n  return config.padding.left + (dayIndex * config.dayWidth) + config.dayPadding + (timeRatio * dayContentWidth);\r\n};\r\n\r\n// --- Chart Sub-components ---\r\n\r\nconst YAxis = ({ config, type }) => {\r\n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\r\n  const yAxisLabels = config.yAxisLabels[type];\r\n  const valueRange = config.yAxisRange[type];\r\n  const yOffset = config.yAxisOffset[type];\r\n\r\n  return (\r\n    <g className=\"y-axis\">\r\n      <text\r\n        x={config.padding.left / 3}\r\n        y={config.padding.top + chartHeight / 2}\r\n        fontSize={config.fontSize.yAxisTitle}\r\n        textAnchor=\"middle\"\r\n        fill=\"#666\"\r\n        transform={`rotate(-90, ${config.padding.left / 3}, ${config.padding.top + chartHeight / 2})`}\r\n      >\r\n        mm Hg\r\n      </text>\r\n      {yAxisLabels.map(value => {\r\n        const y = config.height - config.padding.bottom - ((value - yOffset) / valueRange) * chartHeight;\r\n        return (\r\n          <g key={value} className=\"y-axis-grid-group\">\r\n                        <line className=\"chart-grid-line-horizontal\" x1={config.padding.left} y1={y} x2={config.width - config.padding.right} y2={y} />\r\n            <text x={config.padding.left - 10} y={y + 3} fontSize={config.fontSize.yAxis} textAnchor=\"end\" fill=\"#666\">{value}</text>\r\n          </g>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n};\r\n\r\nconst XAxis = ({ config, weekDays }) => (\r\n  <g className=\"x-axis\">\r\n    {weekDays.map((day, dayIndex) => {\r\n      const dayX = config.padding.left + dayIndex * config.dayWidth;\r\n      const dayCenterX = dayX + config.dayWidth / 2;\r\n      \r\n      // Tick positions\r\n      const startTickX = dayX;\r\n      const middleTickX = dayX + config.dayWidth / 2;\r\n\r\n      return (\r\n        <g key={dayIndex} className=\"x-axis-label-group\">\r\n          {/* X-axis tick marks */}\r\n          <line \r\n            className=\"x-axis-tick\" \r\n            x1={startTickX} \r\n            y1={config.height - config.padding.bottom} \r\n            x2={startTickX} \r\n            y2={config.height - config.padding.bottom + 5}\r\n            stroke=\"#666\"\r\n            strokeWidth=\"1\"\r\n          />\r\n          <line \r\n            className=\"x-axis-tick\" \r\n            x1={middleTickX} \r\n            y1={config.height - config.padding.bottom} \r\n            x2={middleTickX} \r\n            y2={config.height - config.padding.bottom + 5}\r\n            stroke=\"#666\"\r\n            strokeWidth=\"1\"\r\n          />\r\n          \r\n          {/* Time labels positioned at tick marks */}\r\n          <text\r\n            className=\"time-label\"\r\n            x={startTickX}\r\n            y={config.height - config.padding.bottom + 15}\r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.timeLabel}\r\n            style={{fontSize: '8px'}}\r\n            fill=\"#999\"\r\n          >\r\n            12a\r\n          </text>\r\n          <text\r\n            className=\"time-label\"\r\n            x={middleTickX}\r\n            y={config.height - config.padding.bottom + 15}\r\n            textAnchor=\"middle\"\r\n            fontSize={config.fontSize.timeLabel}\r\n            style={{fontSize: '8px'}}\r\n            fill=\"#999\"\r\n          >\r\n            12p\r\n          </text>\r\n\r\n          {/* Day and Date Labels */}\r\n          <text\r\n            x={dayCenterX}\r\n            y={config.height - config.padding.bottom + 35}\r\n            textAnchor=\"middle\"\r\n            className=\"day-label\"\r\n            fontSize={config.fontSize.dayLabel}\r\n            style={{fontSize: '8px'}}\r\n            fill=\"#666\"\r\n          >\r\n            {formatDayLabel(day)}\r\n          </text>\r\n          <text\r\n            x={dayCenterX}\r\n            y={config.height - config.padding.bottom + 52}\r\n            textAnchor=\"middle\"\r\n            className=\"date-label\"\r\n            fontSize={config.fontSize.dateLabel}\r\n            style={{fontSize: '8px'}}\r\n            fill=\"#888\"\r\n          >\r\n            {day.getDate()}\r\n          </text>\r\n        </g>\r\n      );\r\n    })}\r\n    {/* Final tick mark at the end of the last day */}\r\n    <line \r\n      className=\"x-axis-tick\" \r\n      x1={config.padding.left + weekDays.length * config.dayWidth} \r\n      y1={config.height - config.padding.bottom} \r\n      x2={config.padding.left + weekDays.length * config.dayWidth} \r\n      y2={config.height - config.padding.bottom + 5}\r\n      stroke=\"#666\"\r\n      strokeWidth=\"1\"\r\n    />\r\n    <text\r\n      className=\"time-label\"\r\n      x={config.padding.left + weekDays.length * config.dayWidth}\r\n      y={config.height - config.padding.bottom + 15}\r\n      textAnchor=\"middle\"\r\n      fontSize={config.fontSize.timeLabel}\r\n      style={{fontSize: '8px'}}\r\n      fill=\"#999\"\r\n    >\r\n      12a\r\n    </text>\r\n  </g>\r\n);\r\n\r\nconst GridLines = ({ config, weekDays }) => (\r\n  <g className=\"grid-lines\">\r\n    {/* Vertical day and time lines */}\r\n    {weekDays.map((_, dayIndex) => {\r\n      const dayX = config.padding.left + dayIndex * config.dayWidth;\r\n      return (\r\n        <g key={dayIndex}>\r\n          <line className=\"chart-grid-line-vertical\" x1={dayX} y1={config.padding.top} x2={dayX} y2={config.height - config.padding.bottom} />\r\n          {/* Time lines at 12am and 12pm within each day */}\r\n          {[0, 12].map(hour => {\r\n            const timeRatio = hour / 24;\r\n            const x = config.padding.left + (dayIndex * config.dayWidth) + (timeRatio * config.dayWidth);\r\n            return <line key={`${dayIndex}-${hour}`} className=\"chart-grid-line-vertical-time\" x1={x} y1={config.padding.top} x2={x} y2={config.height - config.padding.bottom} />;\r\n          })}\r\n        </g>\r\n      );\r\n    })}\r\n    {/* Final grid line at the end of the last day */}\r\n    <line \r\n      className=\"chart-grid-line-vertical\" \r\n      x1={config.padding.left + weekDays.length * config.dayWidth} \r\n      y1={config.padding.top} \r\n      x2={config.padding.left + weekDays.length * config.dayWidth} \r\n      y2={config.height - config.padding.bottom} \r\n    />\r\n  </g>\r\n);\r\n\r\nconst DataBars = ({ readings, type, config, onBarHover, onBarLeave }) => {\r\n  const chartHeight = config.height - config.padding.top - config.padding.bottom;\r\n  const valueRange = config.yAxisRange[type];\r\n  const yOffset = config.yAxisOffset[type];\r\n  const getColor = type === 'systolic' ? getSystolicColor : getDiastolicColor;\r\n\r\n  return (\r\n    <g className=\"data-bars\">\r\n      {readings.map((reading, index) => {\r\n        const readingDate = new Date(reading.date);\r\n        const dayIndex = readingDate.getDay();\r\n        const x = getTimePosition(readingDate, dayIndex, config);\r\n        const value = reading[type];\r\n        const barHeight = (value / valueRange) * chartHeight;\r\n        const y = config.height - config.padding.bottom - barHeight;\r\n\r\n        const handleMouseEnter = (event) => {\r\n          const tooltipData = {\r\n            type: type === 'systolic' ? 'Systolic' : 'Diastolic',\r\n            value: value,\r\n            unit: 'mmHg',\r\n            time: readingDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true }),\r\n            date: readingDate.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),\r\n            position: { x: event.clientX, y: event.clientY }\r\n          };\r\n          onBarHover(tooltipData);\r\n        };\r\n\r\n        const handleMouseLeave = () => {\r\n          onBarLeave();\r\n        };\r\n\r\n        return (\r\n          <rect\r\n            key={index}\r\n            x={x - config.barWidth / 2}\r\n            y={y}\r\n            width={config.barWidth}\r\n            height={Math.max(0, barHeight)}\r\n            fill={getColor(value)}\r\n            style={{ cursor: 'pointer' }}\r\n            onMouseEnter={handleMouseEnter}\r\n            onMouseLeave={handleMouseLeave}\r\n          />\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n};\r\n\r\nconst Chart = ({ type, weekData, isExpanded, weekDays, containerWidth, onBarHover, onBarLeave }) => {\r\n  const config = getChartConfig(isExpanded, containerWidth);\r\n  const readings = weekData.filter(d => d[type] && d[type] > 0);\r\n\r\n  return (\r\n    <div className={`chart-section ${isExpanded ? 'expanded' : ''}`}>\r\n      <h4 className=\"chart-subtitle\">{type === 'systolic' ? 'Systolic' : 'Diastolic'}</h4>\r\n      <div className=\"bp-svg-container\">\r\n        <svg\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          viewBox={`0 0 ${config.width} ${config.height}`}\r\n          className=\"chart-svg\"\r\n        >\r\n          <GridLines config={config} weekDays={weekDays} />\r\n          <YAxis config={config} type={type} />\r\n          <XAxis config={config} weekDays={weekDays} />\r\n          <DataBars readings={readings} type={type} config={config} onBarHover={onBarHover} onBarLeave={onBarLeave} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getSystolicColor = (value) => {\r\n  if (value < 120) return 'var(--chart-color-good)';\r\n  if (value < 130) return 'var(--chart-color-warning)';\r\n  return 'var(--chart-color-danger)';\r\n};\r\n\r\nconst getDiastolicColor = (value) => {\r\n  if (value < 80) return 'var(--chart-color-good)';\r\n  if (value < 90) return 'var(--chart-color-warning)';\r\n  return 'var(--chart-color-danger)';\r\n};\r\n\r\nconst bloodPressureLegendItems = [\r\n  { color: 'var(--chart-color-good)', label: 'Normal', description: 'Blood pressure within healthy range' },\r\n  { color: 'var(--chart-color-warning)', label: 'Elevated', description: 'Blood pressure slightly elevated' },\r\n  { color: 'var(--chart-color-danger)', label: 'High', description: 'Blood pressure high - requires attention' },\r\n];\r\n\r\n\r\n// --- Main Component ---\r\nconst BloodPressureChart = ({ patientId, isExpanded = false, onExpand, isPhysicianView = false }) => {\r\n  const { bloodPressureData, loading, error } = usePatientData(patientId, 'bloodPressure');\r\n  const [currentWeek, setCurrentWeek] = useState(new Date(2025, 4, 1));\r\n  const [containerWidth, setContainerWidth] = useState(400);\r\n  const [tooltipData, setTooltipData] = useState(null);\r\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\r\n  const containerRef = useRef(null);\r\n\r\n  // Resize observer to track container width changes\r\n  useLayoutEffect(() => {\r\n    const observeContainer = () => {\r\n      if (containerRef.current) {\r\n        const resizeObserver = new ResizeObserver(entries => {\r\n          for (let entry of entries) {\r\n            const { width } = entry.contentRect;\r\n            setContainerWidth(width);\r\n          }\r\n        });\r\n\r\n        resizeObserver.observe(containerRef.current);\r\n        return () => resizeObserver.disconnect();\r\n      }\r\n    };\r\n\r\n    const cleanup = observeContainer();\r\n    return cleanup;\r\n  }, []);\r\n\r\n  const weekStart = getWeekStart(currentWeek);\r\n  const weekEnd = new Date(weekStart);\r\n  weekEnd.setDate(weekEnd.getDate() + 6);\r\n\r\n  const weekData = bloodPressureData.filter(d => {\r\n    const readingDate = new Date(d.date);\r\n    return readingDate >= weekStart && readingDate <= weekEnd;\r\n  });\r\n\r\n  const weekDays = Array.from({ length: 7 }, (_, i) => {\r\n    const d = new Date(weekStart);\r\n    d.setDate(weekStart.getDate() + i);\r\n    return d;\r\n  });\r\n\r\n  const goToPreviousWeek = () => setCurrentWeek(prev => new Date(prev.setDate(prev.getDate() - 7)));\r\n  const goToNextWeek = () => setCurrentWeek(prev => new Date(prev.setDate(prev.getDate() + 7)));\r\n\r\n  const formatDateRange = (start, end) => {\r\n    const startStr = start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    const endStr = end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    return `${startStr} to ${endStr}`;\r\n  };\r\n\r\n  const handleBarHover = (data) => {\r\n    setTooltipData(data);\r\n    setTooltipPosition(data.position);\r\n  };\r\n\r\n  const handleBarLeave = () => {\r\n    setTooltipData(null);\r\n  };\r\n\r\n  // Calculate summary statistics for physician view\r\n  const weekSummary = useMemo(() => {\r\n    if (!weekData.length) return null;\r\n\r\n    const systolicReadings = weekData.filter(d => d.systolic && d.systolic > 0).map(d => d.systolic);\r\n    const diastolicReadings = weekData.filter(d => d.diastolic && d.diastolic > 0).map(d => d.diastolic);\r\n\r\n    const avgSystolic = systolicReadings.length > 0 ? \r\n      (systolicReadings.reduce((sum, val) => sum + val, 0) / systolicReadings.length).toFixed(0) : 0;\r\n    const avgDiastolic = diastolicReadings.length > 0 ? \r\n      (diastolicReadings.reduce((sum, val) => sum + val, 0) / diastolicReadings.length).toFixed(0) : 0;\r\n\r\n    const maxSystolic = systolicReadings.length > 0 ? Math.max(...systolicReadings) : 0;\r\n    const maxDiastolic = diastolicReadings.length > 0 ? Math.max(...diastolicReadings) : 0;\r\n\r\n    const getRiskCategory = (systolic, diastolic) => {\r\n      if (systolic >= 135 || diastolic >= 85) return 'High Risk';\r\n      if (systolic >= 121 || diastolic >= 80) return 'Medium Risk';\r\n      return 'Low Risk';\r\n    };\r\n\r\n    const avgRisk = getRiskCategory(parseFloat(avgSystolic), parseFloat(avgDiastolic));\r\n    const daysWithReadings = new Set(weekData.map(d => d.date.toDateString())).size;\r\n\r\n    return {\r\n      avgSystolic,\r\n      avgDiastolic,\r\n      maxSystolic,\r\n      maxDiastolic,\r\n      avgRisk,\r\n      daysWithReadings,\r\n      totalReadings: weekData.length\r\n    };\r\n  }, [weekData]);\r\n\r\n  return (\r\n    <ChartContainer\r\n      title=\"Blood Pressure\"\r\n      icon=\"❤️\"\r\n      isLoading={loading}\r\n      error={error}\r\n      noData={!loading && !error && (!bloodPressureData || bloodPressureData.length === 0)}\r\n      onPrev={goToPreviousWeek}\r\n      onNext={goToNextWeek}\r\n      navigationLabel={formatDateRange(weekStart, weekEnd)}\r\n    >\r\n      <div className=\"bp-chart-container\" ref={containerRef}>\r\n        <Legend title=\"Blood Pressure Category:\" items={bloodPressureLegendItems} />\r\n        <div className={`bp-chart-content ${isExpanded ? 'expanded' : ''}`}>\r\n        <div className=\"bp-charts-wrapper\">\r\n          <Chart \r\n            type=\"systolic\" \r\n            weekData={weekData} \r\n            isExpanded={isExpanded} \r\n            weekDays={weekDays} \r\n            containerWidth={containerWidth}\r\n            onBarHover={handleBarHover}\r\n            onBarLeave={handleBarLeave}\r\n          />\r\n          <Chart \r\n            type=\"diastolic\" \r\n            weekData={weekData} \r\n            isExpanded={isExpanded} \r\n            weekDays={weekDays} \r\n            containerWidth={containerWidth}\r\n            onBarHover={handleBarHover}\r\n            onBarLeave={handleBarLeave}\r\n          />\r\n        </div>\r\n        \r\n        {/* Show InfoBox for patient view, summary for physician view */}\r\n        {isPhysicianView && weekSummary ? (\r\n          <div className=\"chart-summary\">\r\n            <h4>Week Summary</h4>\r\n            <div className=\"summary-stats\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Average BP:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.avgSystolic}/{weekSummary.avgDiastolic} mmHg\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Peak BP:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.maxSystolic}/{weekSummary.maxDiastolic} mmHg\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Risk Category:</span>\r\n                <span className={`stat-value ${weekSummary.avgRisk.toLowerCase().replace(' ', '-')}`}>\r\n                  {weekSummary.avgRisk}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Reading Days:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.daysWithReadings}/7 days\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">Total Readings:</span>\r\n                <span className=\"stat-value\">\r\n                  {weekSummary.totalReadings}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : !isPhysicianView ? (\r\n          <InfoBox \r\n            title=\"Blood Pressure Information\"\r\n            content=\"These are general targets: a blood pressure of 120/80 or less is considered low risk. Readings between 121-134 (systolic) or 80-84 (diastolic) are medium risk, while 135/85 or higher is high risk. For those with diabetes, a reading of 130/80 or higher is considered high risk. Always consult a healthcare professional for your personal targets.\"\r\n          />\r\n        ) : null}\r\n      </div>\r\n      </div>\r\n      \r\n      {/* Custom Tooltip */}\r\n      <Tooltip\r\n        isVisible={!!tooltipData}\r\n        content={tooltipData && (\r\n          <div>\r\n            <div className=\"tooltip-title\">{tooltipData.type} Blood Pressure</div>\r\n            <div className=\"tooltip-value\">{tooltipData.value} {tooltipData.unit}</div>\r\n            <div className=\"tooltip-time\">{tooltipData.time}</div>\r\n            <div className=\"tooltip-date\">{tooltipData.date}</div>\r\n          </div>\r\n        )}\r\n        position={tooltipPosition}\r\n        containerRef={containerRef}\r\n      />\r\n    </ChartContainer>\r\n  );\r\n};\r\n\r\nexport default BloodPressureChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}