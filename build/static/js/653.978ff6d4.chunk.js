"use strict";(self.webpackChunkhealth_dashboard=self.webpackChunkhealth_dashboard||[]).push([[653],{653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>pe});var s=a(43),i=a(555),n=a(766),l=a.n(n);const r={header:!0,skipEmptyLines:!0,transformHeader:e=>e.trim(),transform:e=>null===e||void 0===e?void 0:e.trim()};const o=class{static async getPatientData(e){if(!e)throw new Error("Patient ID is required");try{const t=await(async e=>{try{const t=await fetch("/synthetic_patients/".concat(e,".csv?v=").concat(Date.now()));if(!t.ok)throw new Error("Failed to fetch CSV for ".concat(e,": ").concat(t.status," ").concat(t.statusText));const a=await t.text();if(!a||0===a.trim().length)throw new Error("Empty CSV file for patient ".concat(e));const s=l().parse(a,r);return s.errors.length>0&&console.error("CSV parsing errors for ".concat(e,":"),s.errors),s.data}catch(t){throw console.error("Error fetching or parsing CSV for ".concat(e,":"),t),t}})(e);if(!Array.isArray(t)||0===t.length)throw new Error("No data found for patient ".concat(e));return this.processPatientData(t,e)}catch(t){throw console.error("Error fetching patient data for ".concat(e,":"),t),t}}static processPatientData(e,t){if(!Array.isArray(e)||0===e.length)throw new Error("Invalid data structure for patient ".concat(t));const a=e[0];if(!a)throw new Error("No valid data rows found for patient ".concat(t));const s={patientId:t,patientNumber:t,name:a.Name||"Not specified",age:a.Age||"Not specified",gender:a.Gender||"Not specified",dataAvailable:"May 2025"},n=[],l=a.Medication_Names||"",r=a.Medication_Types||"",o=a.Medication_Categories||"",c=a.Medication_Dosages||"",d=l?l.split("; ").filter(Boolean):[],h=r?r.split("; ").filter(Boolean):[],m=o?o.split("; ").filter(Boolean):[],g=c?c.split("; ").filter(Boolean):[];for(let i=0;i<Math.max(d.length,h.length,m.length,g.length);i++){const e=d[i]||"",t=(h[i],m[i],g[i]||"");e&&e.trim()&&!e.includes("Dose not specified")&&e.length<100&&!e.includes("Folic Acid Iron Magnesium Calcium Pain and Inflammation")&&n.push({name:e.trim(),schedule:t.trim(),category:"",dosage:""})}const x=new Set;[...new Set(e.map(e=>e.Chronic_Conditions||e.Conditions).filter(Boolean))].forEach(e=>{e.split(",").forEach(e=>x.add(e.trim()))});const u=this.processGlucoseData(e),p=this.processBloodPressureData(e),v=this.processExerciseData(e),f=this.processMoodData(e),y=this.processPainData(e),j=this.processSleepData(e),b=this.processMealData(e);return{patientInfo:(0,i.A)((0,i.A)({},s),{},{detailedMedications:n,conditions:Array.from(x)}),glucoseData:u,bloodPressureData:p,exerciseData:v,moodData:f,painData:y,mealData:b,sleepData:j,rawData:e}}static processGlucoseData(e){return e.flatMap(e=>{const t=new Date(e.Date),a=[];if(void 0!==e.Glucose_1)for(let s=1;s<=4;s++){const i=parseFloat(e["Glucose_".concat(s)]),n=e["Glucose_Time_".concat(s)];if(i>0&&n){const[l,r]=n.split(":").map(Number),o=new Date(t);o.setHours(l,r),a.push({date:o,value:i,range:e["Glucose_Range_".concat(s)],measurementType:e["Glucose_Measurement_Type_".concat(s)]})}}else{const s=parseFloat(e.Glucose_Level);if(s>0){const e=Math.floor(24*Math.random()),i=Math.floor(60*Math.random()),n=new Date(t);n.setHours(e,i);let l="in range";s<70?l="below range":s>180&&(l="above range"),a.push({date:n,value:s,range:l,measurementType:"Random"})}}return a})}static processBloodPressureData(e){return e.flatMap(e=>{const t=new Date(e.Date),a=[];if(void 0!==e.Systolic_1)for(let s=1;s<=4;s++){const i=parseInt(e["Systolic_".concat(s)]),n=parseInt(e["Diastolic_".concat(s)]),l=e["BP_Time_".concat(s)];if(i>0&&n>0&&l){const[r,o]=l.split(":").map(Number),c=new Date(t);c.setHours(r,o),a.push({date:c,systolic:i,diastolic:n,systolicType:e["Systolic_Type_".concat(s)],diastolicType:e["Diastolic_Type_".concat(s)]})}}else{const s=parseInt(e.Systolic_BP),i=parseInt(e.Diastolic_BP);if(s>0&&i>0){const e=Math.floor(24*Math.random()),n=Math.floor(60*Math.random()),l=new Date(t);l.setHours(e,n);let r="normal",o="normal";s>=180||i>=120?(r="hypertensive crisis",o="hypertensive crisis"):s>=140||i>=90?(r="high",o="high"):(s>=130||i>=80)&&(r="elevated",o="elevated"),a.push({date:l,systolic:s,diastolic:i,systolicType:r,diastolicType:o})}}return a})}static processExerciseData(e){const t={};return e.forEach(e=>{const a=new Date(e.Date),s=a.toDateString();t[s]||(t[s]={date:a,walking:0,swimming:0,running:0,"resistance/weights":0,biking:0,"balance/stretching":0,other:0,totalMinutes:0});if(void 0!==e.Exercise_Type_1)for(let l=1;l<=3;l++){var i;const a=null===(i=e["Exercise_Type_".concat(l)])||void 0===i?void 0:i.toLowerCase(),n=parseFloat(e["Exercise_Minutes_".concat(l)]);a&&n>0&&this.categorizeExercise(a,n,t[s])}else{var n;const a=null===(n=e.Exercise_Type)||void 0===n?void 0:n.toLowerCase(),i=parseFloat(e.Exercise_Minutes);a&&i>0&&this.categorizeExercise(a,i,t[s])}}),Object.values(t).filter(e=>e.totalMinutes>0)}static categorizeExercise(e,t,a){e.includes("walking")?a.walking+=t:e.includes("swimming")?a.swimming+=t:e.includes("running")?a.running+=t:e.includes("resistance")||e.includes("weights")?a["resistance/weights"]+=t:e.includes("biking")?a.biking+=t:e.includes("balance")||e.includes("stretching")?a["balance/stretching"]+=t:a.other+=t,a.totalMinutes+=t}static processMoodData(e){return e.filter(e=>e.Mood).map(e=>({date:new Date(e.Date),mood:e.Mood,category:e.Mood||"neutral"}))}static processPainData(e){return e.filter(e=>e.Pain_Location&&e.Pain_Level).map(e=>({date:new Date(e.Date),location:e.Pain_Location.toLowerCase(),level:parseInt(e.Pain_Level)}))}static processSleepData(e){return e.filter(e=>e.Sleep_Hours&&e.Sleep_Quality).map(e=>({date:new Date(e.Date),hours:parseFloat(e.Sleep_Hours),quality:e.Sleep_Quality,qualityCode:parseInt(e.Sleep_Quality_Code)}))}static processMealData(e){return e.filter(e=>["Breakfast","Lunch","Dinner","Late Night Snack"].some(t=>{const a=e["".concat(t,"_Time")],s=e["".concat(t,"_Protein")],i=e["".concat(t,"_Carbohydrates")],n=e["".concat(t,"_Vegetables")],l=e["".concat(t,"_Fruit")],r=e["".concat(t,"_Alcohol")],o=e["".concat(t,"_Added_Sugar")];return a&&(1===s||"1"===s||1===i||"1"===i||1===n||"1"===n||1===l||"1"===l||1===r||"1"===r||o&&""!==o&&"NaN"!==o)}))}},c=e=>{const[t,a]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0),[l,r]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),h=(0,s.useCallback)(async e=>{if(e!==c||!t||l){if(!e||"string"!==typeof e)return n(!1),a(null),void r(null);try{n(!0),r(null);const t=await o.getPatientData(e);if(!t||!t.patientInfo)throw new Error("Invalid data structure received");a(t),d(e)}catch(s){const e=s instanceof Error?s.message:"Unknown error occurred";r(e),a(null),console.error("Error loading patient data:",s)}finally{n(!1)}}},[c,t,l]);(0,s.useEffect)(()=>{e?h(e):(a(null),r(null),d(null),n(!1))},[e,h]);const m=(0,s.useCallback)(()=>{e&&(d(null),h(e))},[e,h]),g=(0,s.useCallback)(()=>{a(null),r(null),d(null),n(!1)},[]);return{data:t,loading:i,error:l,patientInfo:(null===t||void 0===t?void 0:t.patientInfo)||null,glucoseData:(null===t||void 0===t?void 0:t.glucoseData)||[],bloodPressureData:(null===t||void 0===t?void 0:t.bloodPressureData)||[],exerciseData:(null===t||void 0===t?void 0:t.exerciseData)||[],moodData:(null===t||void 0===t?void 0:t.moodData)||[],painData:(null===t||void 0===t?void 0:t.painData)||[],mealData:(null===t||void 0===t?void 0:t.mealData)||[],sleepData:(null===t||void 0===t?void 0:t.sleepData)||[],refetch:m,clearData:g,hasData:!!t,isEmpty:!i&&!l&&!t,isError:!!l,hasGlucoseData:((null===t||void 0===t?void 0:t.glucoseData)||[]).length>0,hasBloodPressureData:((null===t||void 0===t?void 0:t.bloodPressureData)||[]).length>0,hasExerciseData:((null===t||void 0===t?void 0:t.exerciseData)||[]).length>0,hasMoodData:((null===t||void 0===t?void 0:t.moodData)||[]).length>0,hasPainData:((null===t||void 0===t?void 0:t.painData)||[]).length>0,hasSleepData:((null===t||void 0===t?void 0:t.sleepData)||[]).length>0,hasMealData:((null===t||void 0===t?void 0:t.mealData)||[]).length>0}};var d=a(250);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(2025,4,1);const[a,i]=(0,s.useState)(t),n="mood"===e?"month":"week",l="mood"===e?"Month":"Week",r=(0,s.useCallback)(()=>{i(e=>{const t=new Date(e);return"month"===n?t.setMonth(t.getMonth()-1):t.setDate(t.getDate()-7),t})},[n]),o=(0,s.useCallback)(()=>{i(e=>{const t=new Date(e);return"month"===n?t.setMonth(t.getMonth()+1):t.setDate(t.getDate()+7),t})},[n]),c=(0,s.useCallback)(()=>{if("month"===n){return{start:new Date(a.getFullYear(),a.getMonth(),1),end:new Date(a.getFullYear(),a.getMonth()+1,0)}}{const e=new Date(a);e.setDate(e.getDate()-e.getDay()),e.setHours(0,0,0,0);const t=new Date(e);return t.setDate(t.getDate()+6),t.setHours(23,59,59,999),{start:e,end:t}}},[a,n]),d=(0,s.useCallback)(()=>a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),[a]),h=(0,s.useCallback)(()=>{const{start:e,end:t}=c(),a=e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=t.toLocaleDateString("en-US",{month:"short",day:"numeric"});return"".concat(a," - ").concat(s)},[c]),m=(0,s.useCallback)(()=>{const e=new Date(a),t=new Date(a);t.setMonth(t.getMonth()-3);const s=new Date(2024,6,1);t<s&&t.setTime(s.getTime());const i=new Date(2025,6,31);return e>i&&e.setTime(i.getTime()),{start:t,end:e}},[a]),g=(0,s.useCallback)(()=>{const{start:e,end:t}=m(),a=e.toLocaleDateString("en-US",{month:"short",year:"numeric"}),s=t.toLocaleDateString("en-US",{month:"short",year:"numeric"});return"".concat(a," - ").concat(s)},[m]);return{currentDate:a,navigationType:n,navigationLabel:l,goToPrevious:r,goToNext:o,getDateRange:c,getThreeMonthRange:m,getCurrentMonthYear:d,getCurrentWeekDisplay:h,getThreeMonthDisplay:g}};var m=a(579);const g=e=>{let{title:t,items:a,orientation:i="horizontal",size:n="medium",containerWidth:l=null}=e;const r=(0,s.useRef)(null),[o,c]=(0,s.useState)(null);if((0,s.useEffect)(()=>{const e=()=>{if(r.current){const t=[".glucose-chart-wrapper",".chart-section",".bp-svg-container",".exercise-chart-content",".sleep-chart",".pain-chart-wrapper",".meal-chart-wrapper",".mood-calendar-wrapper",".pain-line-chart-container"];let a=null,s=0;for(const e of t){const t=r.current.closest(e);if(t){a=t;const e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)||0,n=parseFloat(e.paddingRight)||0;s=t.offsetWidth-i-n;break}}if(!a&&r.current.closest(".pain-legend-wrapper")){var e;const t=null===(e=r.current.closest(".pain-chart-container"))||void 0===e?void 0:e.querySelector(".pain-chart-wrapper");if(t){a=t;const e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)||0,n=parseFloat(e.paddingRight)||0;s=t.offsetWidth-i-n}}if(!a){const e=[".glucose-chart-container",".bp-chart-container",".exercise-chart-container",".sleep-chart-content",".pain-chart-container",".meal-contents-chart-container",".mood-calendar-container"];for(const t of e){const e=r.current.closest(t);if(e){a=e;const t=e.querySelector(".glucose-chart-wrapper, .chart-section, .bp-svg-container, .exercise-chart-content, .sleep-chart, .pain-chart-wrapper, .meal-chart-wrapper, .mood-calendar-wrapper");if(t){const e=window.getComputedStyle(t),a=parseFloat(e.paddingLeft)||0,i=parseFloat(e.paddingRight)||0;s=t.offsetWidth-a-i}else{const t=window.getComputedStyle(e),a=parseFloat(t.paddingLeft)||0,i=parseFloat(t.paddingRight)||0;s=e.offsetWidth-a-i}break}}}if(!a){const e=r.current.closest(".visualization-content");if(e){a=e;const t=window.getComputedStyle(e),i=parseFloat(t.paddingLeft)||0,n=parseFloat(t.paddingRight)||0;s=e.offsetWidth-i-n}}if(a&&s>0){const e=Math.max(s-32,200);c(e)}}};e();const t=new ResizeObserver(e);return r.current&&t.observe(r.current),window.addEventListener("resize",e),()=>{t.disconnect(),window.removeEventListener("resize",e)}},[]),!a||0===a.length)return null;const d=o||l,h=d?{width:d,maxWidth:d}:{};return(0,m.jsxs)("div",{ref:r,className:"legend-container legend-".concat(i," legend-").concat(n),style:h,children:[t&&(0,m.jsx)("h4",{className:"legend-title",children:t}),(0,m.jsx)("div",{className:"legend-items",children:a.map((e,t)=>(0,m.jsxs)("div",{className:"legend-item",style:e.style,title:e.description||e.label,children:[e.color&&(0,m.jsx)("span",{className:"legend-color-indicator",style:{backgroundColor:e.color},"aria-label":"Color indicator for ".concat(e.label)}),e.icon&&(0,m.jsx)("span",{className:"legend-icon","aria-label":"Icon for ".concat(e.label),children:e.icon}),e.shape&&(0,m.jsx)("span",{className:"legend-shape legend-shape-".concat(e.shape),style:e.shapeStyle,"aria-label":"".concat(e.shape," indicator for ").concat(e.label)}),(0,m.jsx)("span",{className:"legend-label",children:e.label})]},t))})]})},x=e=>{let{title:t,content:a,className:s=""}=e;return(0,m.jsxs)("div",{className:"info-box ".concat(s),children:[t&&(0,m.jsx)("h4",{className:"info-box-title",children:t}),(0,m.jsx)("div",{className:"info-box-content",children:a})]})},u=e=>{let{isVisible:t,content:a,position:i={x:0,y:0},containerRef:n=null}=e;const[l,r]=(0,s.useState)({x:0,y:0});return(0,s.useEffect)(()=>{if(t){let e=i.x,t=i.y;const a=180,s=70;e+=15,t=t-s-5,e+a>window.innerWidth&&(e=e-a-30),t<0&&(t=t+s+20),r({x:e,y:t})}},[t,i]),t?(0,m.jsx)("div",{className:"custom-tooltip",style:{left:"".concat(l.x,"px"),top:"".concat(l.y,"px")},children:a}):null},p=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;const s={dashboard:{width:450,height:350,padding:{top:60,right:40,bottom:80,left:60},dayWidth:50,fontSize:{yAxis:14,yAxisTitle:16,timeLabel:12,dayLabel:12,dateLabel:12},barWidth:8},expanded:{width:700,height:550,padding:{top:80,right:60,bottom:100,left:80},dayWidth:80,fontSize:{yAxis:16,yAxisTitle:18,timeLabel:14,dayLabel:14,dateLabel:14},barWidth:12}},n=t?s.expanded:s.dashboard;switch(e){case"glucose":return(0,i.A)((0,i.A)({},n),{},{yAxisLabels:[0,4,8,12],yAxisRange:12});case"bloodPressure":return(0,i.A)((0,i.A)({},n),{},{yAxisRange:{systolic:200,diastolic:120},yAxisOffset:{systolic:0,diastolic:0},yAxisLabels:{systolic:t?[0,40,80,120,160,200]:[0,100,200],diastolic:t?[0,20,40,60,80,100,120]:[0,60,120]},dayPadding:t?10:6});case"exercise":return(0,i.A)((0,i.A)({},n),{},{fontSize:(0,i.A)((0,i.A)({},n.fontSize),{},{emoji:t?12:10})});case"mealContents":const e=Math.min(a-40,t?800:600)-180;let s,l,r;if(e<500){const t=Math.max(140,.25*e),a=e-(180-t);s=Math.max(60,a/7),l=t+7*s,r={top:50,right:30,bottom:100,left:t}}else s=Math.max(70,Math.min(100,e/7)),l=180+7*s,r={top:50,right:40,bottom:100,left:140};const o=t?90:70;return{width:l,height:4*o+(r.top+r.bottom),padding:r,dayWidth:s,mealHeight:o,fontSize:{dayLabel:t?12:10,dateLabel:t?10:8,mealLabel:t?10:8,timeLabel:t?8:6}};case"pain":return(0,i.A)((0,i.A)({},n),{},{height:t?600:450});case"sleep":return(0,i.A)((0,i.A)({},n),{},{yAxisLabels:[0,2,4,6,8,10,12],yAxisRange:12});default:return(0,i.A)((0,i.A)({},n),{},{yAxisLabels:[0,25,50,75,100],yAxisRange:100})}},v=e=>{var t,a;let{config:s,type:i="single",title:n="",unit:l="",className:r="y-axis"}=e;const o=s.height-s.padding.top-s.padding.bottom,c=(s.width,s.padding.left,s.padding.right,"bloodPressure"===i?{systolic:s.yAxisLabels.systolic,diastolic:s.yAxisLabels.diastolic}:{single:s.yAxisLabels}),d="bloodPressure"===i?s.yAxisRange:{single:s.yAxisRange},h=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.map(e=>{const i=s.height-s.padding.bottom-(e-a)/t*o;return(0,m.jsxs)("g",{className:"y-axis-grid-group",children:[(0,m.jsx)("line",{className:"chart-grid-line-horizontal",x1:s.padding.left,y1:i,x2:s.width-s.padding.right,y2:i}),(0,m.jsx)("text",{x:s.padding.left-10,y:i+3,fontSize:s.fontSize.yAxis,textAnchor:"end",fill:"var(--chart-color-neutral)",children:e})]},e)})};return(0,m.jsxs)("g",{className:r,children:[n&&(0,m.jsxs)("text",{className:"y-axis-title",x:s.padding.left/3,y:s.padding.top+o/2,fontSize:s.fontSize.yAxisTitle,textAnchor:"middle",fill:"var(--chart-color-neutral)",transform:"rotate(-90, ".concat(s.padding.left/3,", ").concat(s.padding.top+o/2,")"),children:[n," ",l&&"(".concat(l,")")]}),"bloodPressure"===i?(0,m.jsxs)(m.Fragment,{children:[h(c.systolic,d.systolic,null===(t=s.yAxisOffset)||void 0===t?void 0:t.systolic),h(c.diastolic,d.diastolic,null===(a=s.yAxisOffset)||void 0===a?void 0:a.diastolic)]}):h(c.single,d.single)]})},f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y={"below range":"var(--chart-color-yellow)","in range":"var(--chart-color-blue)","above range":"var(--chart-color-orange)"},j=(new Date(2025,4,1),e=>{let{config:t,startOfWeek:a}=e;return(0,m.jsxs)("g",{className:"x-axis-grid",children:[f.map((e,s)=>{const i=t.padding.left+s*t.dayWidth,n=new Date(a);n.setDate(a.getDate()+s);const l=i,r=i+t.dayWidth/2;return(0,m.jsxs)("g",{children:[(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:i,y1:t.padding.top,x2:i,y2:t.height-t.padding.bottom}),(0,m.jsx)("line",{className:"x-axis-tick",x1:l,y1:t.height-t.padding.bottom,x2:l,y2:t.height-t.padding.bottom+5,stroke:"var(--chart-color-neutral)",strokeWidth:"1"}),(0,m.jsx)("line",{className:"x-axis-tick",x1:r,y1:t.height-t.padding.bottom,x2:r,y2:t.height-t.padding.bottom+5,stroke:"var(--chart-color-neutral)",strokeWidth:"1"}),(0,m.jsx)("text",{className:"time-label",x:l,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12a"}),(0,m.jsx)("text",{className:"time-label",x:r,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12p"}),(0,m.jsx)("text",{className:"x-axis-day-label",x:i+t.dayWidth/2,y:t.height-t.padding.bottom+40,textAnchor:"middle",fontSize:t.fontSize.dayLabel,style:{fontSize:"8px"},children:e}),(0,m.jsx)("text",{className:"x-axis-date-label",x:i+t.dayWidth/2,y:t.height-t.padding.bottom+58,textAnchor:"middle",fontSize:t.fontSize.dateLabel,style:{fontSize:"8px"},children:n.getDate()})]},s)}),(0,m.jsx)("line",{className:"x-axis-tick",x1:t.padding.left+f.length*t.dayWidth,y1:t.height-t.padding.bottom,x2:t.padding.left+f.length*t.dayWidth,y2:t.height-t.padding.bottom+5,stroke:"#666",strokeWidth:"1"}),(0,m.jsx)("text",{className:"time-label",x:t.padding.left+f.length*t.dayWidth,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12a"})]})}),b=e=>{let{weekData:t,config:a,onBarHover:s,onBarLeave:i}=e;const n=a.height-a.padding.top-a.padding.bottom;return(0,m.jsx)("g",{className:"data-points",children:t.map((e,t)=>{const l=e.date.getDay(),r=((e,t,a)=>{const s=(e.getHours()+e.getMinutes()/60)/24;return a.padding.left+t*a.dayWidth+s*(a.dayWidth-10)+5})(e.date,l,a),o=a.padding.top+n-e.value/a.yAxisRange*n,c=(d=e.range,y[d.toLowerCase()]||y["in range"]);var d;const h="Pre meal"===e.measurementType;return(0,m.jsx)("rect",{x:r-a.barWidth/2,y:o,width:a.barWidth,height:e.value/a.yAxisRange*n,fill:h?"none":c,stroke:c,strokeWidth:h?2:1,style:{cursor:"pointer"},onMouseEnter:t=>{const a={value:e.value,unit:"mmol/L",range:e.range,measurementType:e.measurementType,time:e.date.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),date:e.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),position:{x:t.clientX,y:t.clientY}};s(a)},onMouseLeave:()=>{i()}},t)})})},N=e=>{let{weekData:t,isExpanded:a,startOfWeek:s,onBarHover:i,onBarLeave:n,monthLabel:l}=e;const r=p("glucose",a);return(0,m.jsxs)("div",{className:"glucose-svg-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Blood Glucose"}),l&&(0,m.jsx)("h4",{className:"chart-subtitle",children:l}),(0,m.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(r.width," ").concat(r.height),className:"glucose-svg",children:[(0,m.jsx)("rect",{width:r.width,height:r.height,fill:"white"}),(0,m.jsx)(j,{config:r,startOfWeek:s}),(0,m.jsx)(v,{config:r,title:"mmol/L"}),(0,m.jsx)(b,{weekData:t,config:r,onBarHover:i,onBarLeave:n})]})]})},w=e=>{let{patientId:t,isExpanded:a=!1,onExpand:i,viewMode:n="patient",navigation:l}=e;const r=Object.entries(y).map(e=>{let[t,a]=e;return{label:t.charAt(0).toUpperCase()+t.slice(1),color:a}}),{glucoseData:o,loading:d,error:p}=c(t,"glucose"),[v,f]=(0,s.useState)(null),[j,b]=(0,s.useState)({x:0,y:0}),w=(0,s.useRef)(null),k=h("glucose"),S=l||k,{start:M,end:D}=S.getDateRange(),C=o.filter(e=>e.date>=M&&e.date<=D),{start:L,end:A}=S.getThreeMonthRange(),W=o.filter(e=>e.date>=L&&e.date<=A),z=(0,s.useMemo)(()=>{if(!C.length)return null;const e=C.filter(e=>e.value&&e.value>0),t=e.filter(e=>"Pre meal"===e.measurementType),a=e.filter(e=>"Post meal"===e.measurementType),s=e.length>0?(e.reduce((e,t)=>e+t.value,0)/e.length).toFixed(1):0,i=t.length>0?(t.reduce((e,t)=>e+t.value,0)/t.length).toFixed(1):0,n=a.length>0?(a.reduce((e,t)=>e+t.value,0)/a.length).toFixed(1):0,l=e.filter(e=>"above range"===e.range.toLowerCase()).length,r=e.filter(e=>"below range"===e.range.toLowerCase()).length,o=e.filter(e=>"in range"===e.range.toLowerCase()).length;return{avgGlucose:s,avgPreMeal:i,avgPostMeal:n,highReadings:l,lowReadings:r,inRangeReadings:o,rangePercentage:e.length>0?(o/e.length*100).toFixed(0):0,daysWithReadings:new Set(C.map(e=>e.date.toDateString())).size,totalReadings:e.length}},[C]),E=(0,s.useMemo)(()=>{if(!W.length)return null;const e=W.filter(e=>e.value&&e.value>0),t=e.filter(e=>"Pre meal"===e.measurementType),a=e.filter(e=>"Post meal"===e.measurementType),s=e.length>0?(e.reduce((e,t)=>e+t.value,0)/e.length).toFixed(1):0,i=t.length>0?(t.reduce((e,t)=>e+t.value,0)/t.length).toFixed(1):0,n=a.length>0?(a.reduce((e,t)=>e+t.value,0)/a.length).toFixed(1):0,l=e.filter(e=>"above range"===e.range.toLowerCase()).length,r=e.filter(e=>"below range"===e.range.toLowerCase()).length,o=e.filter(e=>"in range"===e.range.toLowerCase()).length;return{avgGlucose:s,avgPreMeal:i,avgPostMeal:n,highReadings:l,lowReadings:r,inRangeReadings:o,rangePercentage:e.length>0?(o/e.length*100).toFixed(0):0,daysWithReadings:new Set(W.map(e=>e.date.toDateString())).size,totalReadings:e.length}},[W]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"glucose-chart-container",ref:w,children:[(0,m.jsx)("div",{className:"glucose-chart-wrapper ".concat(a?"expanded":""),children:(0,m.jsx)(N,{weekData:C,isExpanded:a,startOfWeek:M,onBarHover:e=>{f(e),b(e.position)},onBarLeave:()=>{f(null)},monthLabel:S.getCurrentMonthYear()})}),(0,m.jsxs)("div",{className:"glucose-legends-wrapper",children:[(0,m.jsx)(g,{title:"Health Range",items:r}),(0,m.jsx)(g,{title:"Prandial State",items:[{label:"Pre-meal",shape:"outlined",shapeStyle:{borderColor:"var(--chart-color-text-secondary)"},description:"Blood glucose measurements taken before meals"},{label:"Post-meal",shape:"filled",shapeStyle:{backgroundColor:"var(--chart-color-text-secondary)"},description:"Blood glucose measurements taken after meals"}]})]}),"physician"===n&&z?(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Glucose:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.avgGlucose," mmol/L"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Readings In Range:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.rangePercentage,"% (",z.inRangeReadings,"/",z.totalReadings,")"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"High/Low Readings:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.highReadings," high, ",z.lowReadings," low"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Reading Days:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.daysWithReadings,"/7 days"]})]})]})]}),E&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Glucose:"}),(0,m.jsxs)("span",{className:"stat-value",children:[E.avgGlucose," mmol/L"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Readings In Range:"}),(0,m.jsxs)("span",{className:"stat-value",children:[E.rangePercentage,"% (",E.inRangeReadings,"/",E.totalReadings,")"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"High/Low Readings:"}),(0,m.jsxs)("span",{className:"stat-value",children:[E.highReadings," high, ",E.lowReadings," low"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Reading Days:"}),(0,m.jsxs)("span",{className:"stat-value",children:[E.daysWithReadings," days"]})]})]})]})]}):"patient"===n?(0,m.jsx)(x,{title:"Blood Glucose Information",content:"These are general targets for adults with diabetes: For blood sugar taken before a meal, the target is 4.0 to 7.0 mmol/L. For blood sugar two hours after a meal, the target is 5.0 to 10.0 mmol/L. The general target for an A1C is 7.0% or less (Diabetes Canada). Always consult your healthcare provider to confirm the right targets for you."}):null]}),(0,m.jsx)(u,{isVisible:!!v,content:v&&(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"tooltip-title",children:"Blood Glucose"}),(0,m.jsxs)("div",{className:"tooltip-value",children:[v.value," ",v.unit]}),(0,m.jsx)("div",{className:"tooltip-range ".concat(v.range.toLowerCase().replace(" ","-")),children:v.range}),(0,m.jsxs)("div",{className:"tooltip-time",children:[v.measurementType," - ",v.time]}),(0,m.jsx)("div",{className:"tooltip-date",children:v.date})]}),position:j})]})},k=e=>{let{config:t,type:a}=e;const s=t.height-t.padding.top-t.padding.bottom,i=t.yAxisLabels[a],n=t.yAxisRange[a],l=t.yAxisOffset[a];return(0,m.jsxs)("g",{className:"y-axis",children:[(0,m.jsx)("text",{x:t.padding.left/3,y:t.padding.top+s/2,fontSize:t.fontSize.yAxisTitle,textAnchor:"middle",className:"y-axis-title",transform:"rotate(-90, ".concat(t.padding.left/3,", ").concat(t.padding.top+s/2,")"),children:"mm Hg"}),i.map(e=>{const a=t.height-t.padding.bottom-(e-l)/n*s;return(0,m.jsxs)("g",{className:"y-axis-grid-group",children:[(0,m.jsx)("line",{className:"chart-grid-line-horizontal",x1:t.padding.left,y1:a,x2:t.width-t.padding.right,y2:a}),(0,m.jsx)("text",{x:t.padding.left-10,y:a+3,fontSize:t.fontSize.yAxis,textAnchor:"end",className:"chart-tick-label",children:e})]},e)})]})},S=e=>{let{config:t,weekDays:a}=e;return(0,m.jsxs)("g",{className:"x-axis",children:[a.map((e,a)=>{const s=t.padding.left+a*t.dayWidth,i=s+t.dayWidth/2,n=s,l=s+t.dayWidth/2;return(0,m.jsxs)("g",{className:"x-axis-label-group",children:[(0,m.jsx)("line",{className:"x-axis-tick",x1:n,y1:t.height-t.padding.bottom,x2:n,y2:t.height-t.padding.bottom+5,stroke:"var(--chart-color-neutral)",strokeWidth:"1"}),(0,m.jsx)("line",{className:"x-axis-tick",x1:l,y1:t.height-t.padding.bottom,x2:l,y2:t.height-t.padding.bottom+5,stroke:"var(--chart-color-neutral)",strokeWidth:"1"}),(0,m.jsx)("text",{className:"time-label",x:n,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12a"}),(0,m.jsx)("text",{className:"time-label",x:l,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12p"}),(0,m.jsx)("text",{x:i,y:t.height-t.padding.bottom+35,textAnchor:"middle",className:"x-axis-day-label",fontSize:t.fontSize.dayLabel,style:{fontSize:"8px"},children:(r=e,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getDay()])}),(0,m.jsx)("text",{x:i,y:t.height-t.padding.bottom+52,textAnchor:"middle",className:"x-axis-date-label",fontSize:t.fontSize.dateLabel,style:{fontSize:"8px"},children:e.getDate()})]},a);var r}),(0,m.jsx)("line",{className:"x-axis-tick",x1:t.padding.left+a.length*t.dayWidth,y1:t.height-t.padding.bottom,x2:t.padding.left+a.length*t.dayWidth,y2:t.height-t.padding.bottom+5,stroke:"var(--chart-color-neutral)",strokeWidth:"1"}),(0,m.jsx)("text",{className:"time-label",x:t.padding.left+a.length*t.dayWidth,y:t.height-t.padding.bottom+15,textAnchor:"middle",fontSize:t.fontSize.timeLabel,style:{fontSize:"8px"},children:"12a"})]})},M=e=>{let{config:t,weekDays:a}=e;return(0,m.jsxs)("g",{className:"grid-lines",children:[a.map((e,a)=>{const s=t.padding.left+a*t.dayWidth;return(0,m.jsxs)("g",{children:[(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:s,y1:t.padding.top,x2:s,y2:t.height-t.padding.bottom}),[0,12].map(e=>{const s=e/24,i=t.padding.left+a*t.dayWidth+s*t.dayWidth;return(0,m.jsx)("line",{className:"chart-grid-line-vertical-time",x1:i,y1:t.padding.top,x2:i,y2:t.height-t.padding.bottom},"".concat(a,"-").concat(e))})]},a)}),(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:t.padding.left+a.length*t.dayWidth,y1:t.padding.top,x2:t.padding.left+a.length*t.dayWidth,y2:t.height-t.padding.bottom})]})},D=e=>{let{readings:t,type:a,config:s,onBarHover:i,onBarLeave:n}=e;const l=s.height-s.padding.top-s.padding.bottom,r=s.yAxisRange[a],o=(s.yAxisOffset[a],"systolic"===a?L:A);return(0,m.jsx)("g",{className:"data-bars",children:t.map((e,t)=>{const c=new Date(e.date),d=c.getDay(),h=((e,t,a)=>{const s=(e.getHours()+e.getMinutes()/60)/24,i=a.dayWidth-2*a.dayPadding;return a.padding.left+t*a.dayWidth+a.dayPadding+s*i})(c,d,s),g=e[a],x=g/r*l,u=s.height-s.padding.bottom-x;return(0,m.jsx)("rect",{x:h-s.barWidth/2,y:u,width:s.barWidth,height:Math.max(0,x),fill:o(g),style:{cursor:"pointer"},onMouseEnter:e=>{const t={type:"systolic"===a?"Systolic":"Diastolic",value:g,unit:"mmHg",time:c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),date:c.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),position:{x:e.clientX,y:e.clientY}};i(t)},onMouseLeave:()=>{n()}},t)})})},C=e=>{let{type:t,weekData:a,isExpanded:s,weekDays:i,containerWidth:n,onBarHover:l,onBarLeave:r}=e;const o=p("bloodPressure",s,n),c=a.filter(e=>e[t]&&e[t]>0);return(0,m.jsxs)("div",{className:"chart-section ".concat(s?"expanded":""),children:[(0,m.jsx)("h4",{className:"chart-subtitle",children:"systolic"===t?"Systolic":"Diastolic"}),(0,m.jsx)("div",{className:"bp-svg-container",children:(0,m.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(o.width," ").concat(o.height),className:"chart-svg",children:[(0,m.jsx)(M,{config:o,weekDays:i}),(0,m.jsx)(k,{config:o,type:t}),(0,m.jsx)(S,{config:o,weekDays:i}),(0,m.jsx)(D,{readings:c,type:t,config:o,onBarHover:l,onBarLeave:r})]})})]})},L=e=>e<90?"var(--chart-color-danger)":e<120?"var(--chart-color-blue)":e<140?"var(--chart-color-yellow)":"var(--chart-color-orange)",A=e=>e<60?"var(--chart-color-danger)":e<80?"var(--chart-color-blue)":e<90?"var(--chart-color-yellow)":"var(--chart-color-orange)",W=[{color:"var(--chart-color-danger)",label:"Low",description:"Blood pressure below normal range"},{color:"var(--chart-color-blue)",label:"Ideal",description:"Blood pressure within ideal range"},{color:"var(--chart-color-yellow)",label:"Pre-high",description:"Blood pressure elevated but not yet high"},{color:"var(--chart-color-orange)",label:"High",description:"Blood pressure high - requires attention"}],z=e=>{let{patientId:t,isExpanded:a=!1,onExpand:i,viewMode:n="patient",navigation:l}=e;const{bloodPressureData:r,loading:o,error:d}=c(t,"bloodPressure"),[p,v]=(0,s.useState)(400),[f,y]=(0,s.useState)(null),[j,b]=(0,s.useState)({x:0,y:0}),N=(0,s.useRef)(null),w=h("bloodPressure"),k=l||w;(0,s.useLayoutEffect)(()=>(()=>{if(N.current){const e=new ResizeObserver(e=>{for(let t of e){const{width:e}=t.contentRect;v(e)}});return e.observe(N.current),()=>e.disconnect()}})(),[]);const{start:S,end:M}=k.getDateRange(),D=r.filter(e=>{const t=new Date(e.date);return t>=S&&t<=M}),{start:L,end:A}=k.getThreeMonthRange(),z=r.filter(e=>{const t=new Date(e.date);return t>=L&&t<=A}),E=Array.from({length:7},(e,t)=>{const a=new Date(S);return a.setDate(S.getDate()+t),a}),F=e=>{y(e),b(e.position)},P=()=>{y(null)},T=(0,s.useMemo)(()=>{if(!D.length)return null;const e=D.filter(e=>e.systolic&&e.systolic>0).map(e=>e.systolic),t=D.filter(e=>e.diastolic&&e.diastolic>0).map(e=>e.diastolic),a=e.length>0?(e.reduce((e,t)=>e+t,0)/e.length).toFixed(0):0,s=t.length>0?(t.reduce((e,t)=>e+t,0)/t.length).toFixed(0):0;var i,n;return{avgSystolic:a,avgDiastolic:s,maxSystolic:e.length>0?Math.max(...e):0,maxDiastolic:t.length>0?Math.max(...t):0,avgRisk:(i=parseFloat(a),n=parseFloat(s),i>=135||n>=85?"High Risk":i>=121||n>=80?"Medium Risk":"Low Risk"),daysWithReadings:new Set(D.map(e=>e.date.toDateString())).size,totalReadings:D.length}},[D]),R=(0,s.useMemo)(()=>{if(!z.length)return null;const e=z.filter(e=>e.systolic&&e.systolic>0).map(e=>e.systolic),t=z.filter(e=>e.diastolic&&e.diastolic>0).map(e=>e.diastolic),a=e.length>0?(e.reduce((e,t)=>e+t,0)/e.length).toFixed(0):0,s=t.length>0?(t.reduce((e,t)=>e+t,0)/t.length).toFixed(0):0;var i,n;return{avgSystolic:a,avgDiastolic:s,maxSystolic:e.length>0?Math.max(...e):0,maxDiastolic:t.length>0?Math.max(...t):0,avgRisk:(i=parseFloat(a),n=parseFloat(s),i>=135||n>=85?"High Risk":i>=121||n>=80?"Medium Risk":"Low Risk"),daysWithReadings:new Set(z.map(e=>e.date.toDateString())).size,totalReadings:z.length}},[z]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"bp-chart-container ".concat(a?"expanded":""),ref:N,children:[(0,m.jsx)("h3",{className:"bp-main-title",children:"Blood Pressure"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:k.getCurrentMonthYear()}),(0,m.jsxs)("div",{className:"bp-charts-wrapper",children:[(0,m.jsx)(C,{type:"systolic",weekData:D,isExpanded:a,weekDays:E,containerWidth:p,onBarHover:F,onBarLeave:P}),(0,m.jsx)(C,{type:"diastolic",weekData:D,isExpanded:a,weekDays:E,containerWidth:p,onBarHover:F,onBarLeave:P})]}),(0,m.jsx)(g,{title:"Blood Pressure Category:",items:W}),"physician"===n&&T?(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average BP:"}),(0,m.jsxs)("span",{className:"stat-value",children:[T.avgSystolic,"/",T.avgDiastolic," mmHg"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Peak BP:"}),(0,m.jsxs)("span",{className:"stat-value",children:[T.maxSystolic,"/",T.maxDiastolic," mmHg"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Reading Days:"}),(0,m.jsxs)("span",{className:"stat-value",children:[T.daysWithReadings,"/7 days"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Readings:"}),(0,m.jsx)("span",{className:"stat-value",children:T.totalReadings})]})]})]}),R&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average BP:"}),(0,m.jsxs)("span",{className:"stat-value",children:[R.avgSystolic,"/",R.avgDiastolic," mmHg"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Peak BP:"}),(0,m.jsxs)("span",{className:"stat-value",children:[R.maxSystolic,"/",R.maxDiastolic," mmHg"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Readings:"}),(0,m.jsx)("span",{className:"stat-value",children:R.totalReadings})]})]})]})]}):(0,m.jsx)(x,{title:"Blood Pressure Information",content:"Blood pressure readings help monitor cardiovascular health. Systolic pressure (top number) measures pressure when the heart beats, while diastolic pressure (bottom number) measures pressure when the heart rests between beats."})]}),(0,m.jsx)(u,{isVisible:!!f,content:f&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"tooltip-title",children:[f.type," Blood Pressure"]}),(0,m.jsxs)("div",{className:"tooltip-value",children:[f.value," ",f.unit]}),(0,m.jsx)("div",{className:"tooltip-time",children:f.time}),(0,m.jsx)("div",{className:"tooltip-date",children:f.date})]}),position:j})]})},E=[{key:"walking",label:"Walking",color:"var(--chart-color-walking)",emoji:"\ud83d\udeb6"},{key:"swimming",label:"Swimming",color:"var(--chart-color-swimming)",emoji:"\ud83c\udfca\u200d\u2640\ufe0f"},{key:"running",label:"Running",color:"var(--chart-color-running)",emoji:"\ud83c\udfc3\u200d\u2642\ufe0f"},{key:"resistance/weights",label:"Resistance/Weights",color:"var(--chart-color-resistance)",emoji:"\ud83c\udfcb\ufe0f"},{key:"biking",label:"Biking",color:"var(--chart-color-biking)",emoji:"\ud83d\udeb4"},{key:"balance/stretching",label:"Balance/Stretching",color:"var(--chart-color-balance)",emoji:"\ud83e\uddd8"},{key:"other",label:"Other",color:"var(--chart-color-other)",emoji:"\u2795"}],F=E.map(e=>{let{label:t,color:a,emoji:s}=e;return{label:"".concat(s," ").concat(t),color:a}}),P=e=>{var t,a;let{patientId:i,isExpanded:n=!1,onExpand:l,viewMode:r="patient",navigation:o}=e;const{exerciseData:d,loading:x,error:u}=c(i,"exercise"),v=h("exercise"),f=o||v,y=p("exercise",n),j=y.height-y.padding.top-y.padding.bottom,{start:b,end:N}=f.getDateRange(),w=d.filter(e=>{if(!e.date)return!1;const t=new Date(e.date);return t>=b&&t<=N}),{start:k,end:S}=f.getThreeMonthRange(),M=d.filter(e=>{if(!e.date)return!1;const t=new Date(e.date);return t>=k&&t<=S}),D=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],C=D.reduce((e,t)=>(e[t]={walking:0,swimming:0,running:0,"resistance/weights":0,biking:0,"balance/stretching":0,other:0,totalMinutes:0},e),{});w.forEach(e=>{if(!e.date)return;const t=D[new Date(e.date).getDay()];C[t]&&(C[t].walking+=Number(e.walking)||0,C[t].swimming+=Number(e.swimming)||0,C[t].running+=Number(e.running)||0,C[t]["resistance/weights"]+=Number(e["resistance/weights"])||0,C[t].biking+=Number(e.biking)||0,C[t]["balance/stretching"]+=Number(e["balance/stretching"])||0,C[t].other+=Number(e.other)||0,C[t].totalMinutes=C[t].walking+C[t].swimming+C[t].running+C[t]["resistance/weights"]+C[t].biking+C[t]["balance/stretching"]+C[t].other)});const L=Math.max(...Object.values(C).map(e=>e.totalMinutes),0),A=Math.max(60,30*Math.ceil(L/30)),W=(e=>{if(0===e)return[0];const t=Math.max(15,15*Math.ceil(e/6/15)),a=[];for(let s=0;s<=e;s+=t)a.push(s);return a})(A),z=(0,s.useMemo)(()=>{if(!w.length)return null;const e=Object.values(C).reduce((e,t)=>e+t.totalMinutes,0),t=(e/7).toFixed(0),a=Object.values(C).filter(e=>e.totalMinutes>0).length,s={};E.forEach(e=>{s[e.key]=Object.values(C).reduce((t,a)=>t+a[e.key],0)});const i=Object.entries(s).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],n=Object.values(C).filter(e=>e.totalMinutes>=30).length,l=w.filter(e=>{const t=D[new Date(e.date).getDay()];return C[t]&&C[t].totalMinutes>0}).length,r=l>0?(e/l).toFixed(0):0;return{totalMinutes:e,avgMinutesPerDay:t,daysWithExercise:a,mostCommonExercise:i[0],mostCommonExerciseMinutes:i[1],daysWithAdequateExercise:n,totalSessions:l,avgSessionLength:r}},[w,C]),P=(0,s.useMemo)(()=>{if(!M.length)return null;const e={};M.forEach(t=>{if(!t.date)return;const a=D[new Date(t.date).getDay()];e[a]||(e[a]={walking:0,swimming:0,running:0,"resistance/weights":0,biking:0,"balance/stretching":0,other:0,totalMinutes:0}),e[a].walking+=Number(t.walking)||0,e[a].swimming+=Number(t.swimming)||0,e[a].running+=Number(t.running)||0,e[a]["resistance/weights"]+=Number(t["resistance/weights"])||0,e[a].biking+=Number(t.biking)||0,e[a]["balance/stretching"]+=Number(t["balance/stretching"])||0,e[a].other+=Number(t.other)||0,e[a].totalMinutes=e[a].walking+e[a].swimming+e[a].running+e[a]["resistance/weights"]+e[a].biking+e[a]["balance/stretching"]+e[a].other});const t=Object.values(e).reduce((e,t)=>e+t.totalMinutes,0),{start:a,end:s}=f.getThreeMonthRange(),i=(t/(Math.ceil((s-a)/864e5)+1)).toFixed(0),n=Object.values(e).filter(e=>e.totalMinutes>0).length,l={};E.forEach(t=>{l[t.key]=Object.values(e).reduce((e,a)=>e+a[t.key],0)});const r=Object.entries(l).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],o=M.filter(t=>{const a=D[new Date(t.date).getDay()];return e[a]&&e[a].totalMinutes>0}).length,c=o>0?(t/o).toFixed(0):0;return{totalMinutes:t,avgMinutesPerDay:i,daysWithExercise:n,mostCommonExercise:r[0],mostCommonExerciseMinutes:r[1],totalSessions:o,avgSessionLength:c}},[M]);return(0,m.jsxs)("div",{className:"exercise-chart-container ".concat(n?"expanded":""),children:[(0,m.jsx)("h3",{className:"chart-title",children:"Activity Breakdown by Type"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:f.getCurrentMonthYear()}),(0,m.jsxs)("svg",{width:"100%",viewBox:"0 0 ".concat(y.width," ").concat(y.height),className:"exercise-svg",children:[(0,m.jsxs)("g",{className:"y-axis",children:[W.map(e=>{const t=y.padding.top+j-e/A*j;return(0,m.jsxs)("g",{className:"y-axis-grid-group",children:[(0,m.jsx)("line",{className:"chart-grid-line-horizontal",x1:y.padding.left,y1:t,x2:y.width-y.padding.right,y2:t}),(0,m.jsx)("text",{x:y.padding.left-15,y:t+3,fontSize:y.fontSize.yAxis,textAnchor:"end",fill:"var(--chart-color-text-secondary)",className:"chart-tick-label",children:e})]},e)}),(0,m.jsx)("text",{x:-(y.padding.top+j/2),y:y.padding.left/2-5,fontSize:y.fontSize.yAxisTitle,textAnchor:"middle",fill:"var(--chart-color-text-primary)",transform:"rotate(-90)",className:"y-axis-title",children:"Minutes"})]}),(0,m.jsx)("g",{className:"x-axis",children:D.map((e,t)=>{const a=new Date(b);a.setDate(a.getDate()+t);const s=y.padding.left+t*y.dayWidth+y.dayWidth/2,i=C[e],n=E.filter(e=>(i[e.key]||0)>0).map(e=>e.emoji).join(" ");return(0,m.jsxs)("g",{className:"x-axis-label-group",children:[(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:y.padding.left+t*y.dayWidth,y1:y.padding.top,x2:y.padding.left+t*y.dayWidth,y2:y.height-y.padding.bottom}),(0,m.jsx)("text",{x:s,y:y.height-y.padding.bottom+15,textAnchor:"middle",fontSize:y.fontSize.dayLabel,fill:"var(--chart-color-text-primary)",className:"x-axis-day-label",children:e}),(0,m.jsx)("text",{x:s,y:y.height-y.padding.bottom+30,textAnchor:"middle",fontSize:y.fontSize.dateLabel,fill:"var(--chart-color-text-secondary)",className:"x-axis-date-label",children:a.getDate()}),(0,m.jsx)("text",{x:s,y:y.height-y.padding.bottom+48,textAnchor:"middle",fontSize:y.fontSize.emoji,children:n})]},t)})}),(0,m.jsx)("g",{className:"data-bars",children:D.map((e,t)=>{const a=C[e],s=y.padding.left+t*y.dayWidth+y.dayWidth/2;let i=y.height-y.padding.bottom;return(0,m.jsx)("g",{children:E.map(e=>{const t=Number(a[e.key])||0;if(t<=0)return null;const l=t/A*j,r=i-l,o=(0,m.jsxs)("g",{children:[(0,m.jsx)("rect",{x:s-y.barWidth/2,y:r,width:y.barWidth,height:l,fill:e.color,className:"data-bar",children:(0,m.jsx)("title",{children:"".concat(e.label,": ").concat(Math.round(t)," min")})}),l>=12&&(0,m.jsx)("text",{x:s,y:r+l/2,textAnchor:"middle",fontSize:n?8:6,fill:"black",className:"duration-label",style:{fontWeight:"bold"},children:Math.round(t)})]},e.key);return i=r,o})},e)})})]}),(0,m.jsx)(g,{title:"Exercise Type",items:F,orientation:"horizontal",size:"medium"}),"physician"===r&&z&&(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Exercise:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.totalMinutes," minutes"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Daily Average:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.avgMinutesPerDay," minutes/day"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Exercise Days:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.daysWithExercise,"/7 days"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common:"}),(0,m.jsxs)("span",{className:"stat-value",children:[null===(t=E.find(e=>e.key===z.mostCommonExercise))||void 0===t?void 0:t.emoji," ",z.mostCommonExercise," (",z.mostCommonExerciseMinutes," min)"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Avg Session:"}),(0,m.jsxs)("span",{className:"stat-value",children:[z.avgSessionLength," minutes"]})]})]})]}),P&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Exercise:"}),(0,m.jsxs)("span",{className:"stat-value",children:[P.totalMinutes," minutes"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Daily Average:"}),(0,m.jsxs)("span",{className:"stat-value",children:[P.avgMinutesPerDay," minutes/day"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Exercise Days:"}),(0,m.jsxs)("span",{className:"stat-value",children:[P.daysWithExercise," days"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common:"}),(0,m.jsxs)("span",{className:"stat-value",children:[null===(a=E.find(e=>e.key===P.mostCommonExercise))||void 0===a?void 0:a.emoji," ",P.mostCommonExercise," (",P.mostCommonExerciseMinutes," min)"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Avg Session:"}),(0,m.jsxs)("span",{className:"stat-value",children:[P.avgSessionLength," minutes"]})]})]})]})]})]})},T={happy:"\ud83d\ude0a",sad:"\ud83d\ude22",angry:"\ud83d\ude20"},R={happy:"var(--chart-color-mood-happy)",sad:"var(--chart-color-mood-sad)",angry:"var(--chart-color-mood-angry)"},B={happy:"var(--chart-color-mood-happy-bg)",sad:"var(--chart-color-mood-sad-bg)",angry:"var(--chart-color-mood-angry-bg)"},H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=e=>e&&T[e.toLowerCase()]?e.toLowerCase():null,V=e=>T[I(e)],_=e=>R[I(e)],Q=Object.entries(T).map(e=>{let[t,a]=e;return{icon:a,label:t.charAt(0).toUpperCase()+t.slice(1),style:{backgroundColor:B[t],borderColor:R[t]}}}),O=e=>{let{config:t}=e;return(0,m.jsx)("g",{className:"calendar-header",children:H.map((e,a)=>(0,m.jsx)("text",{x:t.startX+a*t.cellWidth,y:t.dayLabelY,className:"day-name-label",style:{fontSize:t.dayLabelFontSize},children:e},e))})},Y=e=>{let{config:t,date:a,moods:s}=e;const i=a.getDate(),n=a.getDay(),l=Math.floor((i-1+new Date(a.getFullYear(),a.getMonth(),1).getDay())/7),r=t.startX+n*t.cellWidth,o=t.startY+l*(t.cellHeight+2),c=s.length>0?s[0]:null;return(0,m.jsxs)("g",{className:"day-cell-group",transform:"translate(".concat(r-t.cellWidth/2,", ").concat(o-t.cellHeight/2,")"),children:[(0,m.jsx)("rect",{width:t.cellWidth,height:t.cellHeight,fill:(d=c,B[I(d)]||"#ffffff"),className:"day-cell-bg"}),(0,m.jsx)("text",{x:t.dateLabelX,y:t.dateLabelY,className:"date-label",style:{fontSize:t.dateLabelFontSize},children:i}),c&&(0,m.jsx)("text",{x:t.cellWidth/2,y:.65*t.cellHeight,className:"mood-icon",fill:_(c),style:{fontSize:t.moodIconFontSize},children:V(c)})]});var d},Z=e=>{let{isExpanded:t,moodByDate:a,currentMonth:s,monthDisplay:i}=e;const n=(e=>({svgWidth:e?700:350,svgHeight:e?600:300,cellWidth:e?100:50,cellHeight:e?85:44,dayLabelY:e?55:30,dayLabelFontSize:e?16:9,dateLabelX:e?12:5,dateLabelY:e?22:12,dateLabelFontSize:e?14:8,moodIconFontSize:e?36:20,startX:e?50:25,startY:e?100:55}))(t),l=s.getFullYear(),r=s.getMonth(),o=new Date(l,r+1,0).getDate();return(0,m.jsxs)("div",{className:"mood-calendar-svg-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Mood Calendar"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:i}),(0,m.jsxs)("svg",{viewBox:"0 0 ".concat(n.svgWidth," ").concat(n.svgHeight),className:"mood-calendar-svg",children:[(0,m.jsx)("rect",{width:n.svgWidth,height:n.svgHeight,fill:"white"}),(0,m.jsx)(O,{config:n}),(0,m.jsx)("g",{className:"calendar-body",children:[...Array(o)].map((e,t)=>{const s=t+1,i=new Date(l,r,s);return(0,m.jsx)(Y,{config:n,date:i,moods:a[s]||[]},t)})})]})]})},G=e=>{let{patientId:t,isExpanded:a=!1,onExpand:i,viewMode:n="patient",navigation:l}=e;const{moodData:r,isLoading:o,error:d}=c(t,"mood"),x=h("mood"),u=l||x,p=u.currentDate,v=r.filter(e=>e.date.getFullYear()===p.getFullYear()&&e.date.getMonth()===p.getMonth()).reduce((e,t)=>{const a=t.date.getDate();return e[a]||(e[a]=[]),e[a].push(t.mood),e},{}),f=u.getCurrentMonthYear(),{start:y,end:j}=u.getThreeMonthRange(),b=r.filter(e=>e.date>=y&&e.date<=j),N=(0,s.useMemo)(()=>{const e=r.filter(e=>e.date.getFullYear()===p.getFullYear()&&e.date.getMonth()===p.getMonth());if(0===e.length)return null;const t={};Object.keys(T).forEach(e=>{t[e]=0}),e.forEach(e=>{const a=I(e.mood);a&&void 0!==t[a]&&t[a]++});const a=Object.entries(t).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],s=e.length,i={};Object.entries(t).forEach(e=>{let[t,a]=e;i[t]=s>0?(a/s*100).toFixed(0):0});const n=new Date(p.getFullYear(),p.getMonth()+1,0).getDate(),l=new Set(e.map(e=>e.date.getDate())).size,o=(3*t.happy+1*t.sad+1*t.angry)/s,c=o>=2.5?"Positive":o>=1.5?"Mixed":"Needs Attention";return{totalEntries:s,daysWithMood:l,daysInMonth:n,mostCommonMood:a[0],mostCommonMoodCount:a[1],moodCounts:t,moodPercentages:i,moodTrend:c}},[r,p]),w=(0,s.useMemo)(()=>{if(0===b.length)return null;const e={};Object.keys(T).forEach(t=>{e[t]=0}),b.forEach(t=>{const a=I(t.mood);a&&void 0!==e[a]&&e[a]++});const t=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],a=b.length,s={};Object.entries(e).forEach(e=>{let[t,i]=e;s[t]=a>0?(i/a*100).toFixed(0):0});const{start:i,end:n}=u.getThreeMonthRange(),l=Math.ceil((n-i)/864e5)+1,r=new Set(b.map(e=>e.date.toDateString())).size,o=(3*e.happy+1*e.sad+1*e.angry)/a,c=o>=2.5?"Positive":o>=1.5?"Mixed":"Needs Attention";return{totalEntries:a,daysWithMood:r,daysInThreeMonths:l,mostCommonMood:t[0],mostCommonMoodCount:t[1],moodCounts:e,moodPercentages:s,moodTrend:c}},[b]);return(0,m.jsxs)("div",{className:"mood-calendar-container",children:[(0,m.jsx)("div",{className:"mood-calendar-wrapper ".concat(a?"expanded":""),children:(0,m.jsx)(Z,{isExpanded:a,moodByDate:v,currentMonth:p,monthDisplay:f})}),(0,m.jsx)("div",{className:"mood-calendar-legend-wrapper",children:(0,m.jsx)(g,{title:"Mood",items:Q})}),"physician"===n&&N&&(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Mood Entries:"}),(0,m.jsxs)("span",{className:"stat-value",children:[N.totalEntries," entries"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common Mood:"}),(0,m.jsxs)("span",{className:"stat-value",children:[T[N.mostCommonMood]," ",N.mostCommonMood.charAt(0).toUpperCase()+N.mostCommonMood.slice(1)," (",N.mostCommonMoodCount,"x)"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Mood Distribution:"}),(0,m.jsxs)("span",{className:"stat-value",children:["\ud83d\ude0a",N.moodPercentages.happy,"% \ud83d\ude22",N.moodPercentages.sad,"% \ud83d\ude20",N.moodPercentages.angry,"%"]})]})]})]}),w&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Mood Entries:"}),(0,m.jsxs)("span",{className:"stat-value",children:[w.totalEntries," entries"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common Mood:"}),(0,m.jsxs)("span",{className:"stat-value",children:[T[w.mostCommonMood]," ",w.mostCommonMood.charAt(0).toUpperCase()+w.mostCommonMood.slice(1)," (",w.mostCommonMoodCount,"x)"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Mood Distribution:"}),(0,m.jsxs)("span",{className:"stat-value",children:["\ud83d\ude0a",w.moodPercentages.happy,"% \ud83d\ude22",w.moodPercentages.sad,"% \ud83d\ude20",w.moodPercentages.angry,"%"]})]})]})]})]})]})},K=e=>{let{painLocation:t,painColor:a,className:s,view:i="front"}=e;const n="#F5F5F5",l="#CCCCCC",r={head:n,neck:n,chest:n,stomach:n,leftShoulder:n,rightShoulder:n,upperBack:n,lowerBack:n,leftShoulderBlade:n,rightShoulderBlade:n,leftHip:n,rightHip:n,leftArm:n,rightArm:n,leftElbow:n,rightElbow:n,leftForearm:n,rightForearm:n,leftHand:n,rightHand:n,leftThigh:n,rightThigh:n,leftKnee:n,rightKnee:n,leftCalf:n,rightCalf:n,leftFoot:n,rightFoot:n},o={head:"head",neck:"neck",chest:"front"===i?"chest":null,stomach:"front"===i?"stomach":null,abdomen:"front"===i?"stomach":null,belly:"front"===i?"stomach":null,leftShoulder:"front"===i?"leftShoulder":null,rightShoulder:"front"===i?"rightShoulder":null,shoulder:"front"===i?"leftShoulder":null,shoulders:"front"===i?"leftShoulder":null,back:"back"===i?"upperBack":null,upperBack:"back"===i?"upperBack":null,lowerBack:"back"===i?"lowerBack":null,spine:"back"===i?"upperBack":null,leftShoulderBlade:"back"===i?"leftShoulderBlade":null,rightShoulderBlade:"back"===i?"rightShoulderBlade":null,shoulderBlade:"back"===i?"leftShoulderBlade":null,shoulderBlades:"back"===i?"leftShoulderBlade":null,hip:"leftHip",hips:"leftHip",leftHip:"leftHip",rightHip:"rightHip",arm:"leftArm",arms:"leftArm",leftArm:"leftArm",rightArm:"rightArm",elbow:"leftElbow",elbows:"leftElbow",leftElbow:"leftElbow",rightElbow:"rightElbow",forearm:"leftForearm",forearms:"leftForearm",leftForearm:"leftForearm",rightForearm:"rightForearm",hand:"leftHand",hands:"leftHand",leftHand:"leftHand",rightHand:"rightHand",leg:"leftThigh",legs:"leftThigh",leftThigh:"leftThigh",rightThigh:"rightThigh",thigh:"leftThigh",thighs:"leftThigh",knee:"leftKnee",knees:"leftKnee",leftKnee:"leftKnee",rightKnee:"rightKnee",calf:"leftCalf",calves:"leftCalf",leftCalf:"leftCalf",rightCalf:"rightCalf",foot:"leftFoot",feet:"leftFoot",leftFoot:"leftFoot",rightFoot:"rightFoot",ankle:"leftFoot",ankles:"leftFoot"}[t];o&&null!==o&&(r[o]=a,"elbow"===t||"elbows"===t?(r.leftElbow=a,r.rightElbow=a):"shoulder"===t||"shoulders"===t?"front"===i?(r.leftShoulder=a,r.rightShoulder=a):(r.leftShoulderBlade=a,r.rightShoulderBlade=a):"arm"===t||"arms"===t?(r.leftArm=a,r.rightArm=a):"forearm"===t||"forearms"===t?(r.leftForearm=a,r.rightForearm=a):"hand"===t||"hands"===t?(r.leftHand=a,r.rightHand=a):"leg"===t||"legs"===t||"thigh"===t||"thighs"===t?(r.leftThigh=a,r.rightThigh=a):"knee"===t||"knees"===t?(r.leftKnee=a,r.rightKnee=a):"calf"===t||"calves"===t?(r.leftCalf=a,r.rightCalf=a):"foot"===t||"feet"===t||"ankle"===t||"ankles"===t?(r.leftFoot=a,r.rightFoot=a):"hip"!==t&&"hips"!==t||(r.leftHip=a,r.rightHip=a));return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 180",className:s,preserveAspectRatio:"xMidYMid meet",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",transition:"all 0.2s ease"},children:"front"===i?(0,m.jsxs)("g",{id:"body-front",children:[(0,m.jsx)("ellipse",{cx:"75",cy:"15",rx:"12",ry:"15",fill:r.head,stroke:l,strokeWidth:1}),(0,m.jsx)("rect",{x:"68",y:"30",width:"14",height:"8",fill:r.neck,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M60,38 Q75,35 90,38 L85,85 Q75,90 65,85 Z",fill:r.chest,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M65,85 Q75,88 85,85 L80,110 Q75,115 70,110 Z",fill:r.stomach,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"55",cy:"40",rx:"8",ry:"6",fill:r.leftShoulder,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"95",cy:"40",rx:"8",ry:"6",fill:r.rightShoulder,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M47,40 Q45,50 43,65 L50,67 Q52,52 55,42 Z",fill:r.leftArm,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M103,40 Q105,50 107,65 L100,67 Q98,52 95,42 Z",fill:r.rightArm,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"46",cy:"70",rx:"4",ry:"6",fill:r.leftElbow,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"104",cy:"70",rx:"4",ry:"6",fill:r.rightElbow,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M42,70 Q44,80 46,90 L50,88 Q48,78 50,72 Z",fill:r.leftForearm,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M108,70 Q106,80 104,90 L100,88 Q102,78 100,72 Z",fill:r.rightForearm,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"48",cy:"95",rx:"5",ry:"8",fill:r.leftHand,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"102",cy:"95",rx:"5",ry:"8",fill:r.rightHand,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"65",cy:"105",rx:"8",ry:"6",fill:r.leftHip,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"85",cy:"105",rx:"8",ry:"6",fill:r.rightHip,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M65,110 Q70,115 75,120 L73,140 Q70,135 67,130 Z",fill:r.leftThigh,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M85,110 Q80,115 75,120 L77,140 Q80,135 83,130 Z",fill:r.rightThigh,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"70",cy:"145",rx:"6",ry:"4",fill:r.leftKnee,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"80",cy:"145",rx:"6",ry:"4",fill:r.rightKnee,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M67,149 Q70,155 73,165 L70,167 Q67,161 70,155 Z",fill:r.leftCalf,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M83,149 Q80,155 77,165 L80,167 Q83,161 80,155 Z",fill:r.rightCalf,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"70",cy:"170",rx:"8",ry:"4",fill:r.leftFoot,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"80",cy:"170",rx:"8",ry:"4",fill:r.rightFoot,stroke:l,strokeWidth:1})]}):(0,m.jsxs)("g",{id:"body-back",children:[(0,m.jsx)("ellipse",{cx:"75",cy:"15",rx:"12",ry:"15",fill:r.head,stroke:l,strokeWidth:1}),(0,m.jsx)("rect",{x:"68",y:"30",width:"14",height:"8",fill:r.neck,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M60,38 Q75,35 90,38 L85,70 Q75,75 65,70 Z",fill:r.upperBack,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M65,70 Q75,75 85,70 L80,110 Q75,115 70,110 Z",fill:r.lowerBack,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"55",cy:"45",rx:"6",ry:"8",fill:r.leftShoulderBlade,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"95",cy:"45",rx:"6",ry:"8",fill:r.rightShoulderBlade,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M47,40 Q45,50 43,65 L50,67 Q52,52 55,42 Z",fill:r.leftArm,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M103,40 Q105,50 107,65 L100,67 Q98,52 95,42 Z",fill:r.rightArm,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"46",cy:"70",rx:"4",ry:"6",fill:r.leftElbow,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"104",cy:"70",rx:"4",ry:"6",fill:r.rightElbow,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M42,70 Q44,80 46,90 L50,88 Q48,78 50,72 Z",fill:r.leftForearm,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M108,70 Q106,80 104,90 L100,88 Q102,78 100,72 Z",fill:r.rightForearm,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"48",cy:"95",rx:"5",ry:"8",fill:r.leftHand,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"102",cy:"95",rx:"5",ry:"8",fill:r.rightHand,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"65",cy:"105",rx:"8",ry:"6",fill:r.leftHip,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"85",cy:"105",rx:"8",ry:"6",fill:r.rightHip,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M65,110 Q70,115 75,120 L73,140 Q70,135 67,130 Z",fill:r.leftThigh,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M85,110 Q80,115 75,120 L77,140 Q80,135 83,130 Z",fill:r.rightThigh,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"70",cy:"145",rx:"6",ry:"4",fill:r.leftKnee,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"80",cy:"145",rx:"6",ry:"4",fill:r.rightKnee,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M67,149 Q70,155 73,165 L70,167 Q67,161 70,155 Z",fill:r.leftCalf,stroke:l,strokeWidth:1}),(0,m.jsx)("path",{d:"M83,149 Q80,155 77,165 L80,167 Q83,161 80,155 Z",fill:r.rightCalf,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"70",cy:"170",rx:"8",ry:"4",fill:r.leftFoot,stroke:l,strokeWidth:1}),(0,m.jsx)("ellipse",{cx:"80",cy:"170",rx:"8",ry:"4",fill:r.rightFoot,stroke:l,strokeWidth:1})]})})},q=e=>{let{patientId:t,isExpanded:a=!1,onExpand:i,viewMode:n="patient",navigation:l}=e;const{painData:r,isLoading:o,error:d}=c(t,"pain"),x=h("pain"),u=l||x,p=e=>["#ffffe5","#fff7bc","#f7f7b3","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#b34703","#993404","#662506"][Math.min(e,10)],v=Array.from({length:11},(e,t)=>t).map(e=>({color:p(e),label:"".concat(e)})),{start:f,end:y}=u.getDateRange(),j=r.filter(e=>e.date>=f&&e.date<=y),{start:b,end:N}=u.getThreeMonthRange(),w=r.filter(e=>e.date>=b&&e.date<=N),{chartData:k,mostCommonLocation:S,averagePainLevel:M}=(0,s.useMemo)(()=>{if(!j.length)return{chartData:[],mostCommonLocation:null,averagePainLevel:0};const e=new Map,t=new Map;j.forEach(a=>{const s=a.date.toDateString();e.set(s,a.level);const i=a.location.toLowerCase();t.set(i,(t.get(i)||0)+1)});let a=null,s=0;for(const[l,r]of t)r>s&&(s=r,a=l);const i=[];for(let l=0;l<7;l++){const t=new Date(f);t.setDate(t.getDate()+l);const a=t.toDateString(),s=e.get(a)||0;i.push({date:t,day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],level:s,color:p(s)})}const n=j.reduce((e,t)=>e+t.level,0);return{chartData:i,mostCommonLocation:a,averagePainLevel:j.length>0?n/j.length:0}},[j,f]),D=(0,s.useMemo)(()=>{if(!w.length)return null;const e=new Map,t=new Map;w.forEach(a=>{const s=a.date.toDateString();e.set(s,a.level);const i=a.location.toLowerCase();t.set(i,(t.get(i)||0)+1)});let a=null,s=0;for(const[m,g]of t)g>s&&(s=g,a=m);const i=w.reduce((e,t)=>e+t.level,0),n=w.length>0?i/w.length:0,{start:l,end:r}=u.getThreeMonthRange(),o=Math.ceil((r-l)/864e5)+1,c=new Set(w.map(e=>e.date.toDateString())).size,d={};for(let m=0;m<=10;m++)d[m]=0;w.forEach(e=>{d[e.level]++});const h=Object.entries(d).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0];return{totalEntries:w.length,daysWithPain:c,daysInThreeMonths:o,mostCommonLocation:a,mostCommonLocationCount:s,averagePainLevel:n,mostCommonPainLevel:parseInt(h[0]),mostCommonPainLevelCount:h[1]}},[w]),C=e=>{let{data:t,isExpanded:a}=e;const s={width:a?600:400,height:a?200:150,padding:{top:20,right:30,bottom:40,left:50},yAxisRange:10,fontSize:{yAxis:a?10:8,xAxis:a?10:8}},i=s.width-s.padding.left-s.padding.right,n=s.height-s.padding.top-s.padding.bottom,l=i/6,r=t.map((e,t)=>{const a=s.padding.left+t*l,i=s.padding.top+n-e.level/s.yAxisRange*n;return"".concat(0===t?"M":"L"," ").concat(a," ").concat(i)}).join(" ");return(0,m.jsx)("div",{className:"pain-line-chart",children:(0,m.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(s.width," ").concat(s.height),children:[[0,2,4,6,8,10].map(e=>{const t=s.padding.top+n-e/s.yAxisRange*n;return(0,m.jsxs)("g",{children:[(0,m.jsx)("line",{x1:s.padding.left,y1:t,x2:s.width-s.padding.right,y2:t,stroke:"#e0e0e0",strokeWidth:"1",strokeDasharray:"2,2"}),(0,m.jsx)("text",{x:s.padding.left-10,y:t+3,fontSize:s.fontSize.yAxis,textAnchor:"end",fill:"var(--chart-color-text-secondary)",children:e})]},e)}),t.map((e,t)=>{const a=s.padding.left+t*l;return(0,m.jsx)("text",{x:a,y:s.height-s.padding.bottom+15,fontSize:s.fontSize.xAxis,textAnchor:"middle",className:"x-axis-day-label",children:e.day},t)}),(0,m.jsx)("path",{d:r,stroke:"var(--chart-color-primary)",strokeWidth:"3",fill:"none"}),t.map((e,t)=>{const a=s.padding.left+t*l,i=s.padding.top+n-e.level/s.yAxisRange*n;return(0,m.jsx)("circle",{cx:a,cy:i,r:"4",fill:e.color,stroke:"var(--chart-color-primary)",strokeWidth:"2"},t)})]})})},L=e=>{let{location:t,level:a}=e;const s=p(a),i=t.toLowerCase();return(0,m.jsx)("div",{className:"body-container",children:(0,m.jsxs)("div",{className:"body-views",children:[(0,m.jsxs)("div",{className:"body-view",children:[(0,m.jsx)("div",{className:"body-view-label",children:"Front"}),(0,m.jsx)(K,{className:"body-svg",painLocation:i,painColor:s,view:"front"})]}),(0,m.jsxs)("div",{className:"body-view",children:[(0,m.jsx)("div",{className:"body-view-label",children:"Back"}),(0,m.jsx)(K,{className:"body-svg",painLocation:i,painColor:s,view:"back"})]})]})})};return"patient"===n?(0,m.jsxs)("div",{className:"pain-chart-container",children:[(0,m.jsxs)("div",{className:"pain-chart-header",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Pain"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:u.getCurrentMonthYear()})]}),(0,m.jsxs)("div",{className:"pain-content-wrapper",children:[(0,m.jsx)("div",{className:"pain-list",children:j.length>0?j.map((e,t)=>(0,m.jsxs)("div",{className:"pain-list-item",children:[(0,m.jsxs)("div",{className:"pain-item-info",children:[(0,m.jsx)("div",{className:"pain-item-date",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,m.jsxs)("div",{className:"pain-item-details",children:[(0,m.jsxs)("div",{className:"pain-level",children:[(0,m.jsx)("strong",{children:"Pain Level:"})," ",e.level,"/10"]}),(0,m.jsxs)("div",{className:"pain-location",children:[(0,m.jsx)("strong",{children:"Location:"})," ",e.location]})]})]}),(0,m.jsx)("div",{className:"pain-item-body",children:(0,m.jsx)(L,{location:e.location,level:e.level})})]},t)):(0,m.jsx)("div",{className:"no-pain-data",children:"No pain data available for this week"})}),(0,m.jsx)("div",{className:"pain-legend-wrapper",children:(0,m.jsx)(g,{title:"Pain Intensity Scale (0-10)",items:v})})]})]}):(0,m.jsxs)("div",{className:"physician-pain-chart-container",children:[(0,m.jsxs)("div",{className:"pain-line-chart-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Pain"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:u.getCurrentMonthYear()}),(0,m.jsx)(C,{data:k,isExpanded:a})]}),(0,m.jsx)("div",{className:"pain-location-info",children:(0,m.jsxs)("h4",{children:["Pain Location: ",S||"N/A"]})}),(0,m.jsx)("div",{className:"pain-legend-wrapper",children:(0,m.jsx)(g,{title:"Pain Intensity Scale (0-10)",items:v})}),(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Pain Intensity:"}),(0,m.jsxs)("span",{className:"stat-value",children:[M.toFixed(1),"/10"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common Location:"}),(0,m.jsx)("span",{className:"stat-value",children:S||"N/A"})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Days with Pain:"}),(0,m.jsxs)("span",{className:"stat-value",children:[j.length,"/7"]})]})]})]}),D&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Pain Intensity:"}),(0,m.jsxs)("span",{className:"stat-value",children:[D.averagePainLevel.toFixed(1),"/10"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Most Common Location:"}),(0,m.jsxs)("span",{className:"stat-value",children:[D.mostCommonLocation||"N/A"," (",D.mostCommonLocationCount,"x)"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Days with Pain:"}),(0,m.jsxs)("span",{className:"stat-value",children:[D.daysWithPain,"/",D.daysInThreeMonths]})]})]})]})]})]})},U=["Breakfast","Lunch","Dinner","Late Night Snack"],X=["Protein","Carbohydrates","Vegetables","Fruit","Alcohol"],J=["","1-20g","20-40g","40-60g","60g+"],$=(new Date(2025,4,1),{Protein:"\ud83e\udd69",Carbohydrates:"\ud83c\udf5e",Vegetables:"\ud83e\udd66",Fruit:"\ud83c\udf4e",Alcohol:"\ud83c\udf77"}),ee={"":"","1-20g":"\ud83c\udf6d","20-40g":"\ud83c\udf6b","40-60g":"\ud83c\udf69","60g+":"\ud83c\udf82"},te=(e,t)=>{const a={},s=t.replace(/\s+/g,"_");X.forEach(t=>{const i="".concat(s,"_").concat(t);a[t]=1===e[i]||"1"===e[i]});const i="".concat(s,"_Added_Sugar");return a["Added Sugar"]=e[i]||"",a},ae=e=>{let{config:t,weekDays:a}=e;return(0,m.jsxs)("g",{className:"x-axis",children:[a.map((e,a)=>{const s=t.padding.left+a*t.dayWidth+t.dayWidth/2;return(0,m.jsxs)("g",{children:[(0,m.jsx)("text",{x:s,y:t.height-t.padding.bottom+30,fontSize:t.fontSize.dayLabel,textAnchor:"middle",className:"x-axis-day-label",children:(i=e,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()])}),(0,m.jsx)("text",{x:s,y:t.height-t.padding.bottom+45,fontSize:t.fontSize.dateLabel,textAnchor:"middle",className:"x-axis-date-label",children:e.getDate()}),(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:t.padding.left+a*t.dayWidth,y1:t.padding.top,x2:t.padding.left+a*t.dayWidth,y2:t.height-t.padding.bottom})]},a);var i}),(0,m.jsx)("line",{className:"chart-grid-line-vertical",x1:t.padding.left+7*t.dayWidth,y1:t.padding.top,x2:t.padding.left+7*t.dayWidth,y2:t.height-t.padding.bottom})]})},se=e=>{let{config:t}=e;return(0,m.jsxs)("g",{className:"y-axis",children:[U.map((e,a)=>{const s=t.padding.top+a*t.mealHeight+t.mealHeight/2,i=(e=>{const a=e>10?5:25;return Math.max(10,t.padding.left-a)})(e.length);return(0,m.jsxs)("g",{children:[(0,m.jsx)("text",{x:i,y:s,fontSize:t.fontSize.mealLabel,textAnchor:"end",className:"y-axis-title",children:e}),(0,m.jsx)("line",{className:"chart-grid-line-horizontal",x1:t.padding.left,y1:t.padding.top+a*t.mealHeight,x2:t.padding.left+7*t.dayWidth,y2:t.padding.top+a*t.mealHeight})]},e)}),(0,m.jsx)("line",{className:"chart-grid-line-horizontal",x1:t.padding.left,y1:t.padding.top+4*t.mealHeight,x2:t.padding.left+7*t.dayWidth,y2:t.padding.top+4*t.mealHeight})]})},ie=e=>{let{config:t,dayIndex:a,mealIndex:s,mealData:i,mealTime:n,isExpanded:l}=e;const r=t.padding.left+a*t.dayWidth+5,o=t.padding.top+s*t.mealHeight+5,c=t.dayWidth-10,d=t.mealHeight-10,h=c/3,g=(d-20)/2,x=Math.min(h,g),u=Math.max(8,Math.min(16,.35*x)),p=Math.max(8,Math.min(16,.4*x)),v=l?1.3*u:u,f=l?1.4*p:p,y=[...X,"Added Sugar"];return(0,m.jsxs)("g",{className:"meal-cell",children:[(0,m.jsx)("rect",{x:r,y:o,width:c,height:d,fill:"#f9f9f9",stroke:"#ddd",strokeWidth:"1"}),(0,m.jsx)("text",{x:r+c/2,y:o+12,fontSize:t.fontSize.timeLabel,textAnchor:"middle",className:"time-label",children:n}),y.map((e,t)=>{const a=Math.floor(t/3),s=r+t%3*h+h/2,n=o+20+a*g+g/2;let l=!1,c="";return"Added Sugar"===e?(l=i[e]&&ee[i[e]],c=ee[i[e]]||""):(l=i[e],c=$[e]||""),(0,m.jsxs)("g",{children:[(0,m.jsx)("circle",{cx:s,cy:n,r:v,fill:"#f5f5f5",stroke:"#ddd",strokeWidth:"1",opacity:.3}),l&&c&&(0,m.jsx)("text",{x:s,y:n,fontSize:f,textAnchor:"middle",dominantBaseline:"central",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, sans-serif"},children:c})]},e)})]})},ne=e=>{let{config:t,weekDays:a,patientData:s,isExpanded:i}=e;return s&&0!==s.length?(0,m.jsx)("g",{className:"meal-grid",children:a.map((e,a)=>{const n=s.find(t=>new Date(t.Date).toDateString()===e.toDateString());return n?U.map((e,s)=>{const l=te(n,e),r=((e,t)=>{const a=t.replace(/\s+/g,"_");return e["".concat(a,"_Time")]||""})(n,e);return(0,m.jsx)(ie,{config:t,dayIndex:a,mealIndex:s,mealData:l,mealTime:r,isExpanded:i},"".concat(a,"-").concat(s))}):null})}):null},le=e=>{let{patientId:t,isExpanded:a=!1,onExpand:i,viewMode:n="patient",navigation:l}=e;const{mealData:r,loading:o,error:d}=c(t),x=h("mealContents"),u=l||x,v=(0,s.useRef)(null),[f,y]=(0,s.useState)(500),j=p("mealContents",a,f);(0,s.useEffect)(()=>{const e=()=>{if(v.current){const e=v.current.offsetWidth;y(e)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[a]);const{start:b,end:N}=u.getDateRange(),w=Array.from({length:7},(e,t)=>{const a=new Date(b);return a.setDate(b.getDate()+t),a}),{start:k,end:S}=u.getThreeMonthRange(),M=r.filter(e=>{const t=new Date(e.Date);return t>=k&&t<=S}),D=s.useMemo(()=>{if(!r||0===r.length)return null;const e=r.filter(e=>{const t=new Date(e.Date);return t>=b&&t<=N});if(0===e.length)return null;const t={};X.forEach(e=>{t[e]=0});const a={};J.filter(e=>""!==e).forEach(e=>{a[e]=0});let s=0,i=new Set;e.forEach(e=>{i.add(e.Date),U.forEach(i=>{const n=te(e,i);X.some(e=>n[e])&&(s++,X.forEach(e=>{n[e]&&t[e]++}),n["Added Sugar"]&&""!==n["Added Sugar"]&&a[n["Added Sugar"]]++)})});const n=Object.entries(t).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],l=Object.values(a).reduce((e,t)=>e+t,0),o=s>0?(l/s*100).toFixed(0):0;return{totalMealsLogged:s,daysWithMeals:i.size,mostCommonFood:n[0],mostCommonFoodCount:n[1],categoryStats:t,sugarPercentage:o,totalSugarMeals:l}},[r,b,N]),C=s.useMemo(()=>{if(!M||0===M.length)return null;const e={};X.forEach(t=>{e[t]=0});const t={};J.filter(e=>""!==e).forEach(e=>{t[e]=0});let a=0,s=new Set;M.forEach(i=>{s.add(i.Date),U.forEach(s=>{const n=te(i,s);X.some(e=>n[e])&&(a++,X.forEach(t=>{n[t]&&e[t]++}),n["Added Sugar"]&&""!==n["Added Sugar"]&&t[n["Added Sugar"]]++)})});const i=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],n=Object.values(t).reduce((e,t)=>e+t,0),l=a>0?(n/a*100).toFixed(0):0;return{totalMealsLogged:a,daysWithMeals:s.size,mostCommonFood:i[0],mostCommonFoodCount:i[1],categoryStats:e,sugarPercentage:l,totalSugarMeals:n}},[M]);return(0,m.jsxs)("div",{className:"meal-contents-chart-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Meal Contents"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:u.getCurrentMonthYear()}),(0,m.jsx)("div",{className:"meal-chart-wrapper ".concat(a?"expanded":""),ref:v,children:(0,m.jsxs)("svg",{width:j.width,height:j.height,viewBox:"0 0 ".concat(j.width," ").concat(j.height),className:"meal-chart",style:{maxWidth:"100%",height:"auto"},children:[(0,m.jsx)(ae,{config:j,weekDays:w}),(0,m.jsx)(se,{config:j}),(0,m.jsx)(ne,{config:j,weekDays:w,patientData:r,isExpanded:a})]})}),(0,m.jsxs)("div",{className:"meal-contents-legends-wrapper",children:[(0,m.jsx)(g,{title:"Food Categories",items:X.map(e=>({label:"".concat($[e]," ").concat(e),color:null}))}),(0,m.jsx)(g,{title:"Sugar Levels",items:J.filter(e=>""!==e).map(e=>({label:"".concat(ee[e]," ").concat(e),color:null}))})]}),"physician"===n&&D&&(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Meals Logged:"}),(0,m.jsxs)("span",{className:"stat-value",children:[D.totalMealsLogged,"/28 possible"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Added Sugar:"}),(0,m.jsxs)("span",{className:"stat-value",children:[D.sugarPercentage,"% of meals (",D.totalSugarMeals,"/",D.totalMealsLogged,")"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Food Balance:"}),(0,m.jsx)("span",{className:"stat-value",children:D.categoryStats&&Object.entries(D.categoryStats).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,3).map(e=>{let[t,a]=e;return"".concat($[t]).concat(a)}).join(" ")})]})]})]}),C&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Meals Logged:"}),(0,m.jsxs)("span",{className:"stat-value",children:[C.totalMealsLogged," meals"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Added Sugar:"}),(0,m.jsxs)("span",{className:"stat-value",children:[C.sugarPercentage,"% of meals (",C.totalSugarMeals,"/",C.totalMealsLogged,")"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Food Balance:"}),(0,m.jsx)("span",{className:"stat-value",children:C.categoryStats&&Object.entries(C.categoryStats).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,3).map(e=>{let[t,a]=e;return"".concat($[t]).concat(a)}).join(" ")})]})]})]})]})]})},re=e=>{let{patientId:t,isExpanded:a,onExpand:i,viewMode:n="patient",navigation:l}=e;const{sleepData:r,loading:o,error:d}=c(t,"sleep"),x=h("sleep"),u=l||x,{start:p,end:v}=u.getDateRange(),f=r.filter(e=>e.date>=p&&e.date<=v),{start:y,end:j}=u.getThreeMonthRange(),b=r.filter(e=>e.date>=y&&e.date<=j),N={"Very good":"var(--chart-color-sleep-very-good)","Fairly good":"var(--chart-color-sleep-fairly-good)","Fairly bad":"var(--chart-color-sleep-fairly-bad)","Very bad":"var(--chart-color-sleep-very-bad)"},w=Object.entries(N).map(e=>{let[t,a]=e;return{label:t,color:a}}),k=(0,s.useMemo)(()=>{if(!f||0===f.length)return null;const e=f.reduce((e,t)=>e+t.hours,0),t=(e/f.length).toFixed(1),a={};Object.keys(N).forEach(e=>{a[e]=0}),f.forEach(e=>{void 0!==a[e.quality]&&a[e.quality]++});const s=Object.entries(a).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],i=f.map(e=>Math.abs(e.hours-parseFloat(t))),n=(i.reduce((e,t)=>e+t,0)/i.length).toFixed(1),l={"Very good":4,"Fairly good":3,"Fairly bad":2,"Very bad":1},r=f.reduce((e,t)=>e+(l[t.quality]||0),0)/f.length,o=r>=3.5?"Good":r>=2.5?"Fair":"Poor",c=f.filter(e=>e.hours>=7).length;return{totalHours:e.toFixed(1),avgHours:t,mostCommonQuality:s[0],mostCommonQualityCount:s[1],avgVariation:n,qualityAssessment:o,adequateSleepNights:c,daysTracked:f.length}},[f]),S=(0,s.useMemo)(()=>{if(!b||0===b.length)return null;const e=b.reduce((e,t)=>e+t.hours,0),t=(e/b.length).toFixed(1),a={};Object.keys(N).forEach(e=>{a[e]=0}),b.forEach(e=>{void 0!==a[e.quality]&&a[e.quality]++});const s=Object.entries(a).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a})[0],i=b.map(e=>Math.abs(e.hours-parseFloat(t))),n=(i.reduce((e,t)=>e+t,0)/i.length).toFixed(1);return{totalHours:e.toFixed(1),avgHours:t,mostCommonQuality:s[0],mostCommonQualityCount:s[1],avgVariation:n,daysTracked:b.length}},[b]);return(0,m.jsxs)("div",{className:"sleep-chart-content",children:[(0,m.jsx)("h3",{className:"chart-title",children:"Sleep Quality & Duration"}),(0,m.jsx)("h4",{className:"chart-subtitle",children:u.getCurrentMonthYear()}),(0,m.jsxs)("div",{className:"sleep-chart",children:[(0,m.jsx)("div",{className:"sleep-quality-row",children:f.map((e,t)=>{return(0,m.jsx)("div",{className:"sleep-quality-item",children:(0,m.jsx)("div",{className:"sleep-quality-indicator",style:{backgroundColor:(a=e.quality,N[a]||"#D3D3D3")}})},"quality-".concat(t));var a})}),(0,m.jsx)("div",{className:"bed-icons-row",children:f.map((e,t)=>(0,m.jsx)("div",{className:"bed-item",children:(0,m.jsx)("div",{className:"bed-icon-wrapper",children:(0,m.jsxs)("svg",{viewBox:"0 0 486.5 225.1",className:"bed-icon",children:[(0,m.jsx)("path",{d:"M471.9,68.9c-8,0-14.5,6.5-14.5,14.5v68.6H26.1l-.6-139.3c0-7-5.8-12.7-12.8-12.7h0C5.7,0,0,5.7,0,12.8v199.6c0,7,5.7,12.8,12.7,12.8s12.8-5.7,12.8-12.8v-37h431.9v35.2c0,8,6.5,14.5,14.5,14.5s14.5-6.5,14.5-14.5v-127.1c0-8-6.5-14.5-14.5-14.5ZM483.7,210.6c0,6.5-5.3,11.8-11.8,11.8s-11.8-5.3-11.8-11.8v-38H22.7v39.7c0,5.5-4.5,10-10,10s-10-4.5-10-10V12.8C2.8,7.3,7.3,2.8,12.7,2.8h0c5.5,0,9.9,4.5,10,9.9l.6,142.1h436.8v-71.4c0-6.5,5.3-11.7,11.8-11.7s11.8,5.3,11.8,11.7v127.1Z",fill:"#D2B48C"}),(0,m.jsx)("path",{d:"M29.9,94.2v54.5h425.4v-54.5H29.9ZM452.5,145.9H32.7v-48.9h419.8v48.9Z",fill:"#e0e0e0"}),(0,m.jsx)("rect",{x:"32.7",y:"97",width:"".concat(e.hours/10*419.8),height:"48.9",fill:"#FF4500",className:"sleep-fill-rect"}),(0,m.jsx)("path",{d:"M112.8,46.3h-55.4c-12.1,0-22,9.9-22,22s9.9,22,22,22h55.4c12.1,0,22-9.9,22-22s-9.9-22-22-22ZM112.8,87.5h-55.4c-10.6,0-19.2-8.6-19.2-19.2s8.6-19.2,19.2-19.2h55.4c10.6,0,19.2,8.6,19.2,19.2s-8.6,19.2-19.2,19.2Z",fill:"#FFFFFF",stroke:"#AAAAAA",strokeWidth:"1"})]})})},"bed-".concat(t)))}),(0,m.jsx)("div",{className:"sleep-info-row",children:f.map((e,t)=>(0,m.jsxs)("div",{className:"sleep-info-item",children:[(0,m.jsxs)("div",{className:"sleep-hours",children:[e.hours.toFixed(1),"h"]}),(0,m.jsx)("div",{className:"day-label",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(e.date).getDay()]}),(0,m.jsx)("div",{className:"date-label",children:new Date(e.date).getDate()})]},"info-".concat(t)))})]}),(0,m.jsx)(g,{title:"Sleep Quality",items:w}),"physician"===n&&k&&(0,m.jsxs)("div",{className:"summary-container",children:[(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"Week Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Sleep:"}),(0,m.jsxs)("span",{className:"stat-value",children:[k.avgHours," hours/night"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Sleep:"}),(0,m.jsxs)("span",{className:"stat-value",children:[k.totalHours," hours"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Sleep Consistency:"}),(0,m.jsxs)("span",{className:"stat-value",children:["\xb1",k.avgVariation," hours variation"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Common Quality:"}),(0,m.jsxs)("span",{className:"stat-value",children:[k.mostCommonQuality," (",k.mostCommonQualityCount,"x)"]})]})]})]}),S&&(0,m.jsxs)("div",{className:"chart-summary",children:[(0,m.jsx)("h4",{children:"3-Month Summary"}),(0,m.jsxs)("div",{className:"summary-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Average Sleep:"}),(0,m.jsxs)("span",{className:"stat-value",children:[S.avgHours," hours/night"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total Sleep:"}),(0,m.jsxs)("span",{className:"stat-value",children:[S.totalHours," hours"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Sleep Consistency:"}),(0,m.jsxs)("span",{className:"stat-value",children:["\xb1",S.avgVariation," hours variation"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Common Quality:"}),(0,m.jsxs)("span",{className:"stat-value",children:[S.mostCommonQuality," (",S.mostCommonQualityCount,"x)"]})]})]})]})]})]})},oe=(e,t)=>{const a=d.q1[e],n=(0,s.useMemo)(()=>({pain:(0,i.A)((0,i.A)({},d.KP.pain),{},{component:q}),bloodPressure:(0,i.A)((0,i.A)({},d.KP.bloodPressure),{},{component:z}),glucose:(0,i.A)((0,i.A)({},d.KP.glucose),{},{component:w}),exercise:(0,i.A)((0,i.A)({},d.KP.exercise),{},{component:P}),mealContents:(0,i.A)((0,i.A)({},d.KP.mealContents),{},{component:le}),mood:(0,i.A)((0,i.A)({},d.KP.mood),{},{component:G}),sleep:(0,i.A)((0,i.A)({},d.KP.sleep),{},{component:re})}),[]),l=(0,s.useMemo)(()=>t?Object.entries(n).reduce((e,a)=>{let[s,i]=a;const n="".concat(s,"Data");return("mealContents"===s&&t.mealData&&t.mealData.length>0||t[n]&&t[n].length>0)&&(e[s]=i),e},{}):{},[t,n]),r=(0,s.useMemo)(()=>{const t=Object.keys(l);return t.map((t,a)=>"".concat(e,"-chart-").concat(a)).reduce((e,a,s)=>(e[a]=t[s],e),{})},[l,e]);return{allVisualizations:n,availableVisualizations:l,selectedVisualizations:r,handleVisualizationChange:(e,t)=>{},config:a}},ce=e=>{let{message:t,type:a="no-data",className:s=""}=e;return(0,m.jsxs)("div",{className:"placeholder ".concat(a," ").concat(s),children:[(()=>{switch(a){case"loading":return(0,m.jsx)("div",{className:"placeholder-spinner"});case"error":return(0,m.jsx)("div",{className:"placeholder-icon error",children:"!"});case"select-patient":return(0,m.jsx)("div",{className:"placeholder-icon info",children:"\ud83d\udc64"});default:return(0,m.jsx)("div",{className:"placeholder-icon no-data",children:"\u2014"})}})(),(0,m.jsx)("p",{className:"placeholder-message",children:t})]})},de=(e,t,a)=>{const[i,n]=s.useState(null),l=s.useCallback(e=>{n(t=>t===e?null:e)},[]),r=s.useCallback((a,s)=>{if(!e)return(0,m.jsx)(ce,{message:"Please select a patient to view data.",type:"select-patient"});const n=t[a];if(!n)return(0,m.jsx)(ce,{message:"Invalid visualization",type:"error"});const r=n.component,o=i===s;return(0,m.jsx)(r,{patientId:e,isExpanded:o,onExpand:()=>l(s),viewMode:"patient"})},[e,t,i,l]);return{expandedItem:i,handleExpand:l,renderVisualization:r}},he=e=>{var t,a;let{patientInfo:s,loading:i=!1,error:n=null,variant:l="patient",className:r=""}=e;return i?(0,m.jsxs)("div",{className:"patient-info-card ".concat(l," ").concat(r),children:[(0,m.jsx)("h3",{children:"Patient Information"}),(0,m.jsx)("p",{children:"Loading patient info..."})]}):n?(0,m.jsxs)("div",{className:"patient-info-card ".concat(l," ").concat(r),children:[(0,m.jsx)("h3",{children:"Patient Information"}),(0,m.jsx)("p",{children:"Error loading data."})]}):s?(0,m.jsxs)("div",{className:"patient-info-card ".concat(l," ").concat(r),children:[(0,m.jsx)("h3",{children:"Patient Information"}),(0,m.jsxs)("div",{className:"patient-basic-info",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Name:"})," ",s.name]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Patient #:"})," ",s.patientNumber]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Age:"})," ",s.age," years"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Gender:"})," ",s.gender||"Not specified"]})]}),(0,m.jsxs)("div",{className:"conditions-section",children:[(0,m.jsx)("span",{children:"Conditions:"}),null!==(t=s.conditions)&&void 0!==t&&t.length?(0,m.jsx)("div",{className:"conditions-list",children:s.conditions.map((e,t)=>(0,m.jsx)("div",{className:"condition-item",children:e},t))}):(0,m.jsx)("span",{children:" No conditions recorded."})]}),(0,m.jsxs)("div",{className:"medications-section",children:[(0,m.jsx)("span",{children:"Medications:"}),null!==(a=s.detailedMedications)&&void 0!==a&&a.length?(0,m.jsx)("div",{className:"medications-list",children:"patient"===l?s.detailedMedications.map((e,t)=>(0,m.jsxs)("div",{className:"medication-item",children:[(0,m.jsx)("div",{className:"medication-name",children:e.name}),(0,m.jsx)("div",{className:"medication-details",children:(0,m.jsx)("span",{className:"medication-schedule",children:e.schedule})}),e.dosage&&(0,m.jsx)("div",{className:"medication-dosage",children:e.dosage})]},t)):s.detailedMedications.map((e,t)=>(0,m.jsx)("div",{className:"medication-item",children:e.name},t))}):(0,m.jsx)("span",{children:" No medications recorded."})]})]}):(0,m.jsxs)("div",{className:"patient-info-card ".concat(l," ").concat(r),children:[(0,m.jsx)("h3",{children:"Patient Information"}),(0,m.jsx)("p",{children:"No patient data found."})]})},me=e=>{let{id:t,className:a,selectedViz:s,availableVisualizations:i,allVisualizations:n,onVisualizationChange:l,onExpand:r,isExpanded:o,renderVisualization:c,disabled:d=!1,placeholderText:h="No data available for this patient.",title:g,isLoading:x=!1,error:u=null,noData:p=!1,showNavigation:v=!0,onPrev:f,onNext:y,navigationLabel:j="Week"}=e;const b=n[s];return x?(0,m.jsx)("div",{className:"visualization-wrapper ".concat(o?"expanded":""," ").concat(a),children:(0,m.jsx)(ce,{message:"Loading data...",type:"loading"})}):u?(0,m.jsx)("div",{className:"visualization-wrapper ".concat(o?"expanded":""," ").concat(a),children:(0,m.jsx)(ce,{message:"Error: ".concat(u),type:"error"})}):p?(0,m.jsx)("div",{className:"visualization-wrapper ".concat(o?"expanded":""," ").concat(a),children:(0,m.jsx)(ce,{message:"No data available",type:"no-data"})}):(0,m.jsxs)("div",{className:"visualization-wrapper ".concat(o?"expanded":""," ").concat(a),children:[(0,m.jsxs)("div",{className:"visualization-header",children:[(0,m.jsx)("div",{className:"visualization-title-group",children:(0,m.jsx)("h3",{className:"visualization-title",children:g||(null===b||void 0===b?void 0:b.name)||"Unknown Visualization"})}),(0,m.jsxs)("div",{className:"visualization-controls",children:[v&&f&&y&&(0,m.jsxs)("div",{className:"chart-navigation",children:[(0,m.jsx)("button",{className:"nav-button prev",onClick:f,"aria-label":"Previous ".concat(j),children:"\u2039"}),(0,m.jsx)("button",{className:"nav-button next",onClick:y,"aria-label":"Next ".concat(j),children:"\u203a"})]}),(0,m.jsx)("button",{onClick:()=>r(t),className:"expand-button",children:o?"Collapse":"Expand"})]})]}),(0,m.jsx)("div",{className:"visualization-content",children:0===Object.keys(i).length?(0,m.jsx)(ce,{message:h,type:"no-data"}):c(s,t)})]})},ge=e=>{let{viewMode:t,selectedVisualizations:a,availableVisualizations:s,allVisualizations:n,onVisualizationChange:l,onExpand:r,expandedItem:o,renderVisualization:c,disabled:d=!1,placeholderText:h="No data available for this patient.",showSummaries:g=!1,summaryTexts:x={},onSummaryChange:u=null,chartNavigation:p={}}=e;const v={patient:{className:"dashboard-grid",chartClassNames:["visualization-box"]},physician:{className:"physician-charts-grid",chartClassNames:["physician-chart-container"]}}[t],f=Object.keys(s);if(o){const e=a[o],t=p[e],g={id:o,className:"".concat(v.chartClassNames[0]," expanded-view"),selectedViz:e,availableVisualizations:s,allVisualizations:n,onVisualizationChange:l,onExpand:r,isExpanded:!0,renderVisualization:c,disabled:d,placeholderText:h,onPrev:null===t||void 0===t?void 0:t.goToPrevious,onNext:null===t||void 0===t?void 0:t.goToNext,navigationLabel:(null===t||void 0===t?void 0:t.navigationLabel)||"Week"};return(0,m.jsx)(me,(0,i.A)({},g))}return 0===f.length?(0,m.jsx)("div",{className:v.className,children:(0,m.jsx)(ce,{message:h,type:"no-data"})}):(0,m.jsx)("div",{className:v.className,children:f.map((e,a)=>{const g="".concat(t,"-chart-").concat(a),x=p[e],u={key:g,id:g,className:"".concat(v.chartClassNames[0]," ").concat(v.chartClassNames[0],"-").concat(a+1),selectedViz:e,availableVisualizations:s,allVisualizations:n,onVisualizationChange:l,onExpand:r,isExpanded:o===g,renderVisualization:c,disabled:d,placeholderText:h,onPrev:null===x||void 0===x?void 0:x.goToPrevious,onNext:null===x||void 0===x?void 0:x.goToNext,navigationLabel:(null===x||void 0===x?void 0:x.navigationLabel)||"Week"};return(0,m.jsx)(me,(0,i.A)({},u))})})},xe=e=>{let{patientId:t}=e;const{data:a,loading:s,error:i}=c(t),{allVisualizations:n,availableVisualizations:l,selectedVisualizations:r,handleVisualizationChange:o}=oe("patient",a),{expandedItem:d,handleExpand:g,renderVisualization:x}=de(t,n,r),u={glucose:h("glucose"),bloodPressure:h("bloodPressure"),exercise:h("exercise"),sleep:h("sleep"),pain:h("pain"),mood:h("mood"),mealContents:h("mealContents")},p=null===a||void 0===a?void 0:a.patientInfo;return s?(0,m.jsx)("div",{className:"loading-screen",children:"Loading patient data..."}):i?(0,m.jsxs)("div",{className:"error-screen",children:["Error: ",i]}):(0,m.jsxs)("div",{className:"patient-dashboard",children:[(0,m.jsx)(he,{patientInfo:p,loading:s,error:i,variant:"patient"}),(0,m.jsx)(ge,{viewMode:"patient",selectedVisualizations:r,availableVisualizations:l,allVisualizations:n,onVisualizationChange:o,onExpand:g,expandedItem:d,renderVisualization:(e,a)=>{const s=n[e];if(!s)return(0,m.jsx)("div",{children:"Invalid visualization"});const i=s.component,l=d===a,r=u[e];return(0,m.jsx)(i,{patientId:t,isExpanded:l,onExpand:()=>g(a),viewMode:"patient",navigation:r})},chartNavigation:u})]})},ue=e=>{let{patientId:t}=e;const[a,i]=(0,s.useState)(t||""),{data:n,loading:l,error:r}=c(a);s.useEffect(()=>{t&&t!==a&&i(t)},[t,a]);const{allVisualizations:o,availableVisualizations:d,selectedVisualizations:g,handleVisualizationChange:x}=oe("physician",n),{expandedItem:u,handleExpand:p,renderVisualization:v}=de(a,o,g),f={glucose:h("glucose"),bloodPressure:h("bloodPressure"),exercise:h("exercise"),sleep:h("sleep"),pain:h("pain"),mood:h("mood"),mealContents:h("mealContents")},y=null===n||void 0===n?void 0:n.patientInfo;return(0,m.jsxs)("div",{className:"physician-dashboard",children:[(0,m.jsx)("div",{className:"physician-header",children:(0,m.jsx)("h1",{children:"Physician Dashboard"})}),a&&(0,m.jsxs)("div",{className:"dashboard-content",children:[(0,m.jsx)(he,{patientInfo:y,loading:l,error:r,variant:"physician",className:"patient-info-card-physician"}),(0,m.jsx)(ge,{viewMode:"physician",selectedVisualizations:g,availableVisualizations:d,allVisualizations:o,onVisualizationChange:x,onExpand:p,expandedItem:u,renderVisualization:(e,t)=>{if(!a)return(0,m.jsx)(ce,{message:"Please select a patient to view data.",type:"select-patient"});const s=o[e];if(!s)return(0,m.jsx)(ce,{message:"Invalid visualization",type:"error"});const i=s.component,n=u===t,l=f[e];return(0,m.jsx)(i,{patientId:a,viewMode:"physician",isExpanded:n,onExpand:()=>p(t),navigation:l})},chartNavigation:f,disabled:0===Object.keys(d).length,placeholderText:"No data available for this patient."})]})]})},pe=e=>{let{patientId:t,viewMode:a}=e;return"physician"===a?(0,m.jsx)(ue,{patientId:t}):(0,m.jsx)(xe,{patientId:t})}}}]);
//# sourceMappingURL=653.978ff6d4.chunk.js.map