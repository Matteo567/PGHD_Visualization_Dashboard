{"ast":null,"code":"/*\n MealContentsChart.js - Nutritional Tracking Visualization\n \n This component provides comprehensive meal and nutrition monitoring:\n - Meal timing and content breakdown\n - Nutritional component tracking\n - Daily and weekly dietary pattern analysis\n - Interactive tooltips with meal details\n - Navigation controls for time periods\n - Integration with patient data and chart navigation\n \n Essential for dietary monitoring and nutritional assessment.\n */import React,{useState,useEffect,useRef}from'react';import Legend from'../Legend';import usePatientData from'../../hooks/usePatientData';import useChartNavigation from'../../hooks/useChartNavigation';import'./MealContentsChart.css';// --- Constants ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DAYS_OF_WEEK=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];const MEAL_TYPES=['Breakfast','Lunch','Dinner','Late Night Snack'];const FOOD_CATEGORIES=['Protein','Carbohydrates','Vegetables','Fruit','Alcohol'];const SUGAR_CATEGORIES=['','1-20g','20-40g','40-60g','60g+'];const DEFAULT_WEEK=new Date(2025,4,1);// Emoji mappings for food categories\nconst CATEGORY_EMOJIS={'Protein':'ðŸ¥©','Carbohydrates':'ðŸž','Vegetables':'ðŸ¥¦','Fruit':'ðŸŽ','Alcohol':'ðŸ·'};const SUGAR_EMOJIS={'':'',// No sugar\n'1-20g':'ðŸ­',// Lollipop\n'20-40g':'ðŸ«',// Chocolate bar\n'40-60g':'ðŸ©',// Donut\n'60g+':'ðŸŽ‚'// Cake\n};// --- Helper Functions ---\nconst getWeekStart=date=>{const d=new Date(date);const day=d.getDay();const diff=d.getDate()-day;return new Date(d.setDate(diff));};const formatDayLabel=date=>{const dayNames=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];return dayNames[date.getDay()];};const formatDateLabel=date=>date.toLocaleDateString('en-US',{month:'short',day:'numeric'});const getMealTime=(data,mealType)=>{// Convert meal type to the correct column name format (with underscores)\nconst columnPrefix=mealType.replace(/\\s+/g,'_');const timeKey=\"\".concat(columnPrefix,\"_Time\");return data[timeKey]||'';};const getMealData=(data,mealType)=>{const mealData={};// Convert meal type to the correct column name format (with underscores)\nconst columnPrefix=mealType.replace(/\\s+/g,'_');FOOD_CATEGORIES.forEach(category=>{const key=\"\".concat(columnPrefix,\"_\").concat(category);// Handle both numeric (1, 0) and string ('1', '0') values\nmealData[category]=data[key]===1||data[key]==='1';});const sugarKey=\"\".concat(columnPrefix,\"_Added_Sugar\");mealData['Added Sugar']=data[sugarKey]||'';return mealData;};// --- Chart Sub-components ---\nconst XAxis=_ref=>{let{config,weekDays}=_ref;return/*#__PURE__*/_jsxs(\"g\",{className:\"x-axis\",children:[weekDays.map((day,dayIndex)=>{const x=config.padding.left+dayIndex*config.dayWidth+config.dayWidth/2;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"text\",{x:x,y:config.height-config.padding.bottom+30,fontSize:config.fontSize.dayLabel,textAnchor:\"middle\",className:\"x-axis-day-label\",children:formatDayLabel(day)}),/*#__PURE__*/_jsx(\"text\",{x:x,y:config.height-config.padding.bottom+45,fontSize:config.fontSize.dateLabel,textAnchor:\"middle\",className:\"x-axis-date-label\",children:day.getDate()}),/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical\",x1:config.padding.left+dayIndex*config.dayWidth,y1:config.padding.top,x2:config.padding.left+dayIndex*config.dayWidth,y2:config.height-config.padding.bottom})]},dayIndex);}),/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-vertical\",x1:config.padding.left+7*config.dayWidth,y1:config.padding.top,x2:config.padding.left+7*config.dayWidth,y2:config.height-config.padding.bottom})]});};const YAxis=_ref2=>{let{config}=_ref2;// Calculate dynamic text positioning based on available space\nconst getTextX=textLength=>{// Base offset from the chart area\nconst baseOffset=10;// Calculate position to ensure text doesn't get cut off\n// For longer text like \"Late Night Snack\", position it closer to the chart\nconst dynamicOffset=textLength>10?5:25;return Math.max(baseOffset,config.padding.left-dynamicOffset);};return/*#__PURE__*/_jsxs(\"g\",{className:\"y-axis\",children:[MEAL_TYPES.map((meal,mealIndex)=>{const y=config.padding.top+mealIndex*config.mealHeight+config.mealHeight/2;const textX=getTextX(meal.length);return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"text\",{x:textX,y:y,fontSize:config.fontSize.mealLabel,textAnchor:\"end\",className:\"y-axis-title\",children:meal}),/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-horizontal\",x1:config.padding.left,y1:config.padding.top+mealIndex*config.mealHeight,x2:config.padding.left+7*config.dayWidth,y2:config.padding.top+mealIndex*config.mealHeight})]},meal);}),/*#__PURE__*/_jsx(\"line\",{className:\"chart-grid-line-horizontal\",x1:config.padding.left,y1:config.padding.top+4*config.mealHeight,x2:config.padding.left+7*config.dayWidth,y2:config.padding.top+4*config.mealHeight})]});};const MealCell=_ref3=>{let{config,dayIndex,mealIndex,mealData,mealTime,isExpanded}=_ref3;const x=config.padding.left+dayIndex*config.dayWidth+5;const y=config.padding.top+mealIndex*config.mealHeight+5;const cellWidth=config.dayWidth-10;const cellHeight=config.mealHeight-10;// Calculate grid layout for 6 circles (2x3 grid)\nconst circlesPerRow=3;const circleWidth=cellWidth/circlesPerRow;const circleHeight=(cellHeight-20)/2;// Reserve space for time\n// Calculate circle radius and emoji size based on cell dimensions\nconst minDimension=Math.min(circleWidth,circleHeight);const circleRadius=Math.max(8,Math.min(16,minDimension*0.35));// Min 8px, max 16px, 35% of min dimension\nconst emojiFontSize=Math.max(8,Math.min(16,minDimension*0.4));// Min 8px, max 16px, 40% of min dimension for better visibility\n// Apply expanded view scaling\nconst expandedCircleRadius=isExpanded?circleRadius*1.3:circleRadius;const expandedEmojiFontSize=isExpanded?emojiFontSize*1.4:emojiFontSize;// Define the 6 food categories in order (5 main + 1 sugar)\nconst allCategories=[...FOOD_CATEGORIES,'Added Sugar'];return/*#__PURE__*/_jsxs(\"g\",{className:\"meal-cell\",children:[/*#__PURE__*/_jsx(\"rect\",{x:x,y:y,width:cellWidth,height:cellHeight,fill:\"#f9f9f9\",stroke:\"#ddd\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"text\",{x:x+cellWidth/2,y:y+12,fontSize:config.fontSize.timeLabel,textAnchor:\"middle\",className:\"time-label\",children:mealTime}),allCategories.map((category,index)=>{const row=Math.floor(index/circlesPerRow);const col=index%circlesPerRow;const circleX=x+col*circleWidth+circleWidth/2;const circleY=y+20+row*circleHeight+circleHeight/2;// Check if category is present\nlet hasCategory=false;let emoji='';if(category==='Added Sugar'){hasCategory=mealData[category]&&SUGAR_EMOJIS[mealData[category]];emoji=SUGAR_EMOJIS[mealData[category]]||'';}else{hasCategory=mealData[category];emoji=CATEGORY_EMOJIS[category]||'';}return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:circleX,cy:circleY,r:expandedCircleRadius,fill:\"#f5f5f5\",stroke:\"#ddd\",strokeWidth:\"1\",opacity:0.3}),hasCategory&&emoji&&/*#__PURE__*/_jsx(\"text\",{x:circleX,y:circleY,fontSize:expandedEmojiFontSize,textAnchor:\"middle\",dominantBaseline:\"central\",style:{fontFamily:'Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, sans-serif'},children:emoji})]},category);})]});};const MealGrid=_ref4=>{let{config,weekDays,patientData,isExpanded}=_ref4;if(!patientData||patientData.length===0){return null;}return/*#__PURE__*/_jsx(\"g\",{className:\"meal-grid\",children:weekDays.map((day,dayIndex)=>{const dayData=patientData.find(d=>{const dataDate=new Date(d.Date);return dataDate.toDateString()===day.toDateString();});if(!dayData){return null;}return MEAL_TYPES.map((meal,mealIndex)=>{const mealData=getMealData(dayData,meal);const mealTime=getMealTime(dayData,meal);return/*#__PURE__*/_jsx(MealCell,{config:config,dayIndex:dayIndex,mealIndex:mealIndex,mealData:mealData,mealTime:mealTime,isExpanded:isExpanded},\"\".concat(dayIndex,\"-\").concat(mealIndex));});})});};// --- Main Component ---\nconst MealContentsChart=_ref5=>{let{patientId,isExpanded=false,onExpand,viewMode='patient',navigation,screenshotMode=false,showThreeMonthSummaries=false}=_ref5;const{mealData:patientData,loading,error}=usePatientData(patientId);// Use navigation from parent or fallback to internal navigation\nconst useInternalNavigation=!navigation;const internalNavigation=useChartNavigation('mealContents');const nav=navigation||internalNavigation;const containerRef=useRef(null);const[containerWidth,setContainerWidth]=useState(500);// Simple inline config - no factory pattern needed\nconst mealHeight=isExpanded?90:70;const dayWidth=isExpanded?100:70;const leftPadding=140;const config={width:leftPadding+dayWidth*7,height:4*mealHeight+50+100,// 4 meals + top + bottom padding\npadding:{top:50,right:40,bottom:100,left:leftPadding},dayWidth:dayWidth,mealHeight:mealHeight,fontSize:{dayLabel:isExpanded?12:10,dateLabel:isExpanded?10:8,mealLabel:isExpanded?10:8,timeLabel:isExpanded?8:6}};// Measure container width for sizing\nuseEffect(()=>{const updateContainerWidth=()=>{if(containerRef.current){const width=containerRef.current.offsetWidth;setContainerWidth(width);}};updateContainerWidth();window.addEventListener('resize',updateContainerWidth);return()=>window.removeEventListener('resize',updateContainerWidth);},[isExpanded]);const{start:startOfWeek,end:endOfWeek}=nav.getDateRange();const weekDays=Array.from({length:7},(_,i)=>{const day=new Date(startOfWeek);day.setDate(startOfWeek.getDate()+i);return day;});// Get 3-month data\nconst{start:startOfThreeMonths,end:endOfThreeMonths}=nav.getThreeMonthRange();const threeMonthData=patientData.filter(d=>{const dataDate=new Date(d.Date);return dataDate>=startOfThreeMonths&&dataDate<=endOfThreeMonths;});const formatDateRange=(start,end)=>{const startStr=start.toLocaleDateString('en-US',{month:'short',day:'numeric'});const endStr=end.toLocaleDateString('en-US',{month:'short',day:'numeric'});return\"\".concat(startStr,\" to \").concat(endStr);};// Calculate summary statistics for physician view\nlet weekSummary=null;if(patientData&&patientData.length>0){const weekData=patientData.filter(d=>{const dataDate=new Date(d.Date);return dataDate>=startOfWeek&&dataDate<=endOfWeek;});if(weekData.length===0)return null;// Count food categories across all meals\nconst categoryStats={};FOOD_CATEGORIES.forEach(category=>{categoryStats[category]=0;});// Count sugar levels\nconst sugarStats={};SUGAR_CATEGORIES.filter(s=>s!=='').forEach(sugar=>{sugarStats[sugar]=0;});let totalMealsLogged=0;let daysWithMeals=new Set();weekData.forEach(dayData=>{daysWithMeals.add(dayData.Date);MEAL_TYPES.forEach(meal=>{const mealData=getMealData(dayData,meal);const hasAnyFood=FOOD_CATEGORIES.some(category=>mealData[category]);if(hasAnyFood){totalMealsLogged++;// Count each food category\nFOOD_CATEGORIES.forEach(category=>{if(mealData[category]){categoryStats[category]++;}});// Count sugar levels\nif(mealData['Added Sugar']&&mealData['Added Sugar']!==''){sugarStats[mealData['Added Sugar']]++;}}});});// Find most common food category\nconst mostCommonFood=Object.entries(categoryStats).sort((_ref6,_ref7)=>{let[,a]=_ref6;let[,b]=_ref7;return b-a;})[0];// Calculate sugar frequency\nconst totalSugarMeals=Object.values(sugarStats).reduce((sum,count)=>sum+count,0);const sugarPercentage=totalMealsLogged>0?(totalSugarMeals/totalMealsLogged*100).toFixed(0):0;weekSummary={totalMealsLogged,daysWithMeals:daysWithMeals.size,mostCommonFood:mostCommonFood[0],mostCommonFoodCount:mostCommonFood[1],categoryStats,sugarPercentage,totalSugarMeals};}// Calculate 3-month summary statistics for physician view\nlet threeMonthSummary=null;if(threeMonthData&&threeMonthData.length>0){// Count food categories across all meals\nconst categoryStats={};FOOD_CATEGORIES.forEach(category=>{categoryStats[category]=0;});// Count sugar levels\nconst sugarStats={};SUGAR_CATEGORIES.filter(s=>s!=='').forEach(sugar=>{sugarStats[sugar]=0;});let totalMealsLogged=0;let daysWithMeals=new Set();threeMonthData.forEach(dayData=>{daysWithMeals.add(dayData.Date);MEAL_TYPES.forEach(meal=>{const mealData=getMealData(dayData,meal);const hasAnyFood=FOOD_CATEGORIES.some(category=>mealData[category]);if(hasAnyFood){totalMealsLogged++;// Count each food category\nFOOD_CATEGORIES.forEach(category=>{if(mealData[category]){categoryStats[category]++;}});// Count sugar levels\nif(mealData['Added Sugar']&&mealData['Added Sugar']!==''){sugarStats[mealData['Added Sugar']]++;}}});});// Find most common food category\nconst mostCommonFood=Object.entries(categoryStats).sort((_ref8,_ref9)=>{let[,a]=_ref8;let[,b]=_ref9;return b-a;})[0];// Calculate sugar frequency\nconst totalSugarMeals=Object.values(sugarStats).reduce((sum,count)=>sum+count,0);const sugarPercentage=totalMealsLogged>0?(totalSugarMeals/totalMealsLogged*100).toFixed(0):0;threeMonthSummary={totalMealsLogged,daysWithMeals:daysWithMeals.size,mostCommonFood:mostCommonFood[0],mostCommonFoodCount:mostCommonFood[1],categoryStats,sugarPercentage,totalSugarMeals};}return/*#__PURE__*/_jsxs(\"div\",{className:\"meal-contents-chart-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"chart-title\",children:\"Meal Contents\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"chart-subtitle\",children:nav.getFormattedDateRange()}),/*#__PURE__*/_jsx(\"div\",{className:\"meal-chart-wrapper \".concat(isExpanded?'expanded':''),ref:containerRef,children:/*#__PURE__*/_jsxs(\"svg\",{width:config.width,height:config.height,viewBox:\"0 0 \".concat(config.width,\" \").concat(config.height),className:\"meal-chart\",style:{maxWidth:'100%',height:'auto'},children:[/*#__PURE__*/_jsx(XAxis,{config:config,weekDays:weekDays}),/*#__PURE__*/_jsx(YAxis,{config:config}),/*#__PURE__*/_jsx(MealGrid,{config:config,weekDays:weekDays,patientData:patientData,isExpanded:isExpanded})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"meal-contents-legends-wrapper\",children:[/*#__PURE__*/_jsx(Legend,{title:\"Food Categories\",items:FOOD_CATEGORIES.map(category=>({label:\"\".concat(CATEGORY_EMOJIS[category],\" \").concat(category),color:null})),hide:screenshotMode}),/*#__PURE__*/_jsx(Legend,{title:\"Sugar Levels\",items:SUGAR_CATEGORIES.filter(sugar=>sugar!=='').map(sugar=>({label:\"\".concat(SUGAR_EMOJIS[sugar],\" \").concat(sugar),color:null})),hide:screenshotMode})]}),(viewMode==='physician'||viewMode==='unified')&&weekSummary&&/*#__PURE__*/_jsxs(\"div\",{className:\"summary-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Week Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Meals Logged:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.totalMealsLogged,\"/28 possible\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Added Sugar:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[weekSummary.sugarPercentage,\"% of meals (\",weekSummary.totalSugarMeals,\"/\",weekSummary.totalMealsLogged,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Food Balance:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:weekSummary.categoryStats&&Object.entries(weekSummary.categoryStats).sort((_ref0,_ref1)=>{let[,a]=_ref0;let[,b]=_ref1;return b-a;}).slice(0,3).map(_ref10=>{let[cat,count]=_ref10;return\"\".concat(CATEGORY_EMOJIS[cat]).concat(count);}).join(' ')})]})]})]}),showThreeMonthSummaries&&threeMonthSummary&&/*#__PURE__*/_jsxs(\"div\",{className:\"chart-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"3-Month Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Meals Logged:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[threeMonthSummary.totalMealsLogged,\" meals\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Added Sugar:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[threeMonthSummary.sugarPercentage,\"% of meals (\",threeMonthSummary.totalSugarMeals,\"/\",threeMonthSummary.totalMealsLogged,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Food Balance:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:threeMonthSummary.categoryStats&&Object.entries(threeMonthSummary.categoryStats).sort((_ref11,_ref12)=>{let[,a]=_ref11;let[,b]=_ref12;return b-a;}).slice(0,3).map(_ref13=>{let[cat,count]=_ref13;return\"\".concat(CATEGORY_EMOJIS[cat]).concat(count);}).join(' ')})]})]})]})]})]});};export default MealContentsChart;","map":{"version":3,"names":["React","useState","useEffect","useRef","Legend","usePatientData","useChartNavigation","jsx","_jsx","jsxs","_jsxs","DAYS_OF_WEEK","MEAL_TYPES","FOOD_CATEGORIES","SUGAR_CATEGORIES","DEFAULT_WEEK","Date","CATEGORY_EMOJIS","SUGAR_EMOJIS","getWeekStart","date","d","day","getDay","diff","getDate","setDate","formatDayLabel","dayNames","formatDateLabel","toLocaleDateString","month","getMealTime","data","mealType","columnPrefix","replace","timeKey","concat","getMealData","mealData","forEach","category","key","sugarKey","XAxis","_ref","config","weekDays","className","children","map","dayIndex","x","padding","left","dayWidth","y","height","bottom","fontSize","dayLabel","textAnchor","dateLabel","x1","y1","top","x2","y2","YAxis","_ref2","getTextX","textLength","baseOffset","dynamicOffset","Math","max","meal","mealIndex","mealHeight","textX","length","mealLabel","MealCell","_ref3","mealTime","isExpanded","cellWidth","cellHeight","circlesPerRow","circleWidth","circleHeight","minDimension","min","circleRadius","emojiFontSize","expandedCircleRadius","expandedEmojiFontSize","allCategories","width","fill","stroke","strokeWidth","timeLabel","index","row","floor","col","circleX","circleY","hasCategory","emoji","cx","cy","r","opacity","dominantBaseline","style","fontFamily","MealGrid","_ref4","patientData","dayData","find","dataDate","toDateString","MealContentsChart","_ref5","patientId","onExpand","viewMode","navigation","screenshotMode","showThreeMonthSummaries","loading","error","useInternalNavigation","internalNavigation","nav","containerRef","containerWidth","setContainerWidth","leftPadding","right","updateContainerWidth","current","offsetWidth","window","addEventListener","removeEventListener","start","startOfWeek","end","endOfWeek","getDateRange","Array","from","_","i","startOfThreeMonths","endOfThreeMonths","getThreeMonthRange","threeMonthData","filter","formatDateRange","startStr","endStr","weekSummary","weekData","categoryStats","sugarStats","s","sugar","totalMealsLogged","daysWithMeals","Set","add","hasAnyFood","some","mostCommonFood","Object","entries","sort","_ref6","_ref7","a","b","totalSugarMeals","values","reduce","sum","count","sugarPercentage","toFixed","size","mostCommonFoodCount","threeMonthSummary","_ref8","_ref9","getFormattedDateRange","ref","viewBox","maxWidth","title","items","label","color","hide","_ref0","_ref1","slice","_ref10","cat","join","_ref11","_ref12","_ref13"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local Experimental/PGHD_Visualization_Dashboard/src/components/patient_charts/MealContentsChart.js"],"sourcesContent":["/*\n MealContentsChart.js - Nutritional Tracking Visualization\n \n This component provides comprehensive meal and nutrition monitoring:\n - Meal timing and content breakdown\n - Nutritional component tracking\n - Daily and weekly dietary pattern analysis\n - Interactive tooltips with meal details\n - Navigation controls for time periods\n - Integration with patient data and chart navigation\n \n Essential for dietary monitoring and nutritional assessment.\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Legend from '../Legend';\nimport usePatientData from '../../hooks/usePatientData';\nimport useChartNavigation from '../../hooks/useChartNavigation';\n\nimport './MealContentsChart.css';\n\n\n// --- Constants ---\nconst DAYS_OF_WEEK = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst MEAL_TYPES = ['Breakfast', 'Lunch', 'Dinner', 'Late Night Snack'];\nconst FOOD_CATEGORIES = ['Protein', 'Carbohydrates', 'Vegetables', 'Fruit', 'Alcohol'];\nconst SUGAR_CATEGORIES = ['', '1-20g', '20-40g', '40-60g', '60g+'];\nconst DEFAULT_WEEK = new Date(2025, 4, 1);\n\n// Emoji mappings for food categories\nconst CATEGORY_EMOJIS = {\n  'Protein': 'ðŸ¥©',\n  'Carbohydrates': 'ðŸž',\n  'Vegetables': 'ðŸ¥¦',\n  'Fruit': 'ðŸŽ',\n  'Alcohol': 'ðŸ·'\n};\n\nconst SUGAR_EMOJIS = {\n  '': '',              // No sugar\n  '1-20g': 'ðŸ­',       // Lollipop\n  '20-40g': 'ðŸ«',      // Chocolate bar\n  '40-60g': 'ðŸ©',      // Donut\n  '60g+': 'ðŸŽ‚'         // Cake\n};\n\n\n\n// --- Helper Functions ---\nconst getWeekStart = (date) => {\n  const d = new Date(date);\n  const day = d.getDay();\n  const diff = d.getDate() - day;\n  return new Date(d.setDate(diff));\n};\n\nconst formatDayLabel = (date) => {\n  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  return dayNames[date.getDay()];\n};\nconst formatDateLabel = (date) => date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n\nconst getMealTime = (data, mealType) => {\n  // Convert meal type to the correct column name format (with underscores)\n  const columnPrefix = mealType.replace(/\\s+/g, '_');\n  const timeKey = `${columnPrefix}_Time`;\n  return data[timeKey] || '';\n};\n\nconst getMealData = (data, mealType) => {\n  const mealData = {};\n  \n  // Convert meal type to the correct column name format (with underscores)\n  const columnPrefix = mealType.replace(/\\s+/g, '_');\n  \n  FOOD_CATEGORIES.forEach(category => {\n    const key = `${columnPrefix}_${category}`;\n    // Handle both numeric (1, 0) and string ('1', '0') values\n    mealData[category] = data[key] === 1 || data[key] === '1';\n  });\n  \n  const sugarKey = `${columnPrefix}_Added_Sugar`;\n  mealData['Added Sugar'] = data[sugarKey] || '';\n  \n  return mealData;\n};\n\n// --- Chart Sub-components ---\n\nconst XAxis = ({ config, weekDays }) => (\n  <g className=\"x-axis\">\n    {weekDays.map((day, dayIndex) => {\n      const x = config.padding.left + dayIndex * config.dayWidth + config.dayWidth / 2;\n      return (\n        <g key={dayIndex}>\n          <text\n            x={x}\n            y={config.height - config.padding.bottom + 30}\n            fontSize={config.fontSize.dayLabel}\n            textAnchor=\"middle\"\n            className=\"x-axis-day-label\"\n          >\n            {formatDayLabel(day)}\n          </text>\n          <text\n            x={x}\n            y={config.height - config.padding.bottom + 45}\n            fontSize={config.fontSize.dateLabel}\n            textAnchor=\"middle\"\n            className=\"x-axis-date-label\"\n          >\n            {day.getDate()}\n          </text>\n          <line\n            className=\"chart-grid-line-vertical\"\n            x1={config.padding.left + dayIndex * config.dayWidth}\n            y1={config.padding.top}\n            x2={config.padding.left + dayIndex * config.dayWidth}\n            y2={config.height - config.padding.bottom}\n          />\n        </g>\n      );\n    })}\n    <line\n      className=\"chart-grid-line-vertical\"\n      x1={config.padding.left + 7 * config.dayWidth}\n      y1={config.padding.top}\n      x2={config.padding.left + 7 * config.dayWidth}\n      y2={config.height - config.padding.bottom}\n    />\n  </g>\n);\n\nconst YAxis = ({ config }) => {\n  // Calculate dynamic text positioning based on available space\n  const getTextX = (textLength) => {\n    // Base offset from the chart area\n    const baseOffset = 10;\n    // Calculate position to ensure text doesn't get cut off\n    // For longer text like \"Late Night Snack\", position it closer to the chart\n    const dynamicOffset = textLength > 10 ? 5 : 25;\n    return Math.max(baseOffset, config.padding.left - dynamicOffset);\n  };\n\n  return (\n    <g className=\"y-axis\">\n      {MEAL_TYPES.map((meal, mealIndex) => {\n        const y = config.padding.top + mealIndex * config.mealHeight + config.mealHeight / 2;\n        const textX = getTextX(meal.length);\n        \n        return (\n          <g key={meal}>\n            <text\n              x={textX}\n              y={y}\n              fontSize={config.fontSize.mealLabel}\n              textAnchor=\"end\"\n              className=\"y-axis-title\"\n            >\n              {meal}\n            </text>\n            <line\n              className=\"chart-grid-line-horizontal\"\n              x1={config.padding.left}\n              y1={config.padding.top + mealIndex * config.mealHeight}\n              x2={config.padding.left + 7 * config.dayWidth}\n              y2={config.padding.top + mealIndex * config.mealHeight}\n            />\n          </g>\n        );\n      })}\n      <line\n        className=\"chart-grid-line-horizontal\"\n        x1={config.padding.left}\n        y1={config.padding.top + 4 * config.mealHeight}\n        x2={config.padding.left + 7 * config.dayWidth}\n        y2={config.padding.top + 4 * config.mealHeight}\n      />\n    </g>\n  );\n};\n\nconst MealCell = ({ config, dayIndex, mealIndex, mealData, mealTime, isExpanded }) => {\n  const x = config.padding.left + dayIndex * config.dayWidth + 5;\n  const y = config.padding.top + mealIndex * config.mealHeight + 5;\n  const cellWidth = config.dayWidth - 10;\n  const cellHeight = config.mealHeight - 10;\n  \n  // Calculate grid layout for 6 circles (2x3 grid)\n  const circlesPerRow = 3;\n  const circleWidth = cellWidth / circlesPerRow;\n  const circleHeight = (cellHeight - 20) / 2; // Reserve space for time\n  \n  // Calculate circle radius and emoji size based on cell dimensions\n  const minDimension = Math.min(circleWidth, circleHeight);\n  const circleRadius = Math.max(8, Math.min(16, minDimension * 0.35)); // Min 8px, max 16px, 35% of min dimension\n  const emojiFontSize = Math.max(8, Math.min(16, minDimension * 0.4)); // Min 8px, max 16px, 40% of min dimension for better visibility\n  \n  // Apply expanded view scaling\n  const expandedCircleRadius = isExpanded ? circleRadius * 1.3 : circleRadius;\n  const expandedEmojiFontSize = isExpanded ? emojiFontSize * 1.4 : emojiFontSize;\n  \n  // Define the 6 food categories in order (5 main + 1 sugar)\n  const allCategories = [...FOOD_CATEGORIES, 'Added Sugar'];\n  \n  return (\n    <g className=\"meal-cell\">\n      {/* Background */}\n      <rect\n        x={x}\n        y={y}\n        width={cellWidth}\n        height={cellHeight}\n        fill=\"#f9f9f9\"\n        stroke=\"#ddd\"\n        strokeWidth=\"1\"\n      />\n      \n      {/* Meal time at the top */}\n      <text\n        x={x + cellWidth / 2}\n        y={y + 12}\n        fontSize={config.fontSize.timeLabel}\n        textAnchor=\"middle\"\n        className=\"time-label\"\n      >\n        {mealTime}\n      </text>\n      \n      {/* 6 placeholder circles with food category emojis */}\n      {allCategories.map((category, index) => {\n        const row = Math.floor(index / circlesPerRow);\n        const col = index % circlesPerRow;\n        const circleX = x + col * circleWidth + circleWidth / 2;\n        const circleY = y + 20 + row * circleHeight + circleHeight / 2;\n        \n        // Check if category is present\n        let hasCategory = false;\n        let emoji = '';\n        \n        if (category === 'Added Sugar') {\n          hasCategory = mealData[category] && SUGAR_EMOJIS[mealData[category]];\n          emoji = SUGAR_EMOJIS[mealData[category]] || '';\n        } else {\n          hasCategory = mealData[category];\n          emoji = CATEGORY_EMOJIS[category] || '';\n        }\n        \n        return (\n          <g key={category}>\n            {/* Placeholder circle - always grey */}\n            <circle\n              cx={circleX}\n              cy={circleY}\n              r={expandedCircleRadius}\n              fill=\"#f5f5f5\"\n              stroke=\"#ddd\"\n              strokeWidth=\"1\"\n              opacity={0.3}\n            />\n            {/* Emoji if category is present */}\n            {hasCategory && emoji && (\n              <text\n                x={circleX}\n                y={circleY}\n                fontSize={expandedEmojiFontSize}\n                textAnchor=\"middle\"\n                dominantBaseline=\"central\"\n                style={{ fontFamily: 'Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, sans-serif' }}\n              >\n                {emoji}\n              </text>\n            )}\n          </g>\n        );\n      })}\n    </g>\n  );\n};\n\nconst MealGrid = ({ config, weekDays, patientData, isExpanded }) => {\n  if (!patientData || patientData.length === 0) {\n    return null;\n  }\n\n  return (\n    <g className=\"meal-grid\">\n      {weekDays.map((day, dayIndex) => {\n        const dayData = patientData.find(d => {\n          const dataDate = new Date(d.Date);\n          return dataDate.toDateString() === day.toDateString();\n        });\n\n        if (!dayData) {\n          return null;\n        }\n\n        return MEAL_TYPES.map((meal, mealIndex) => {\n          const mealData = getMealData(dayData, meal);\n          const mealTime = getMealTime(dayData, meal);\n          \n          return (\n            <MealCell\n              key={`${dayIndex}-${mealIndex}`}\n              config={config}\n              dayIndex={dayIndex}\n              mealIndex={mealIndex}\n              mealData={mealData}\n              mealTime={mealTime}\n              isExpanded={isExpanded}\n            />\n          );\n        });\n      })}\n    </g>\n  );\n};\n\n\n// --- Main Component ---\nconst MealContentsChart = ({ patientId, isExpanded = false, onExpand, viewMode = 'patient', navigation, screenshotMode = false, showThreeMonthSummaries = false }) => {\n  const { mealData: patientData, loading, error } = usePatientData(patientId);\n  \n  // Use navigation from parent or fallback to internal navigation\n  const useInternalNavigation = !navigation;\n  const internalNavigation = useChartNavigation('mealContents');\n  const nav = navigation || internalNavigation;\n  const containerRef = useRef(null);\n  const [containerWidth, setContainerWidth] = useState(500);\n\n  // Simple inline config - no factory pattern needed\n  const mealHeight = isExpanded ? 90 : 70;\n  const dayWidth = isExpanded ? 100 : 70;\n  const leftPadding = 140;\n  \n  const config = {\n    width: leftPadding + (dayWidth * 7),\n    height: (4 * mealHeight) + 50 + 100, // 4 meals + top + bottom padding\n    padding: { top: 50, right: 40, bottom: 100, left: leftPadding },\n    dayWidth: dayWidth,\n    mealHeight: mealHeight,\n    fontSize: {\n      dayLabel: isExpanded ? 12 : 10,\n      dateLabel: isExpanded ? 10 : 8,\n      mealLabel: isExpanded ? 10 : 8,\n      timeLabel: isExpanded ? 8 : 6,\n    },\n  };\n  \n  // Measure container width for sizing\n  useEffect(() => {\n    const updateContainerWidth = () => {\n      if (containerRef.current) {\n        const width = containerRef.current.offsetWidth;\n        setContainerWidth(width);\n      }\n    };\n\n    updateContainerWidth();\n    window.addEventListener('resize', updateContainerWidth);\n    return () => window.removeEventListener('resize', updateContainerWidth);\n  }, [isExpanded]);\n\n  const { start: startOfWeek, end: endOfWeek } = nav.getDateRange();\n  const weekDays = Array.from({ length: 7 }, (_, i) => {\n    const day = new Date(startOfWeek);\n    day.setDate(startOfWeek.getDate() + i);\n    return day;\n  });\n\n  // Get 3-month data\n  const { start: startOfThreeMonths, end: endOfThreeMonths } = nav.getThreeMonthRange();\n  const threeMonthData = patientData.filter(d => {\n    const dataDate = new Date(d.Date);\n    return dataDate >= startOfThreeMonths && dataDate <= endOfThreeMonths;\n  });\n\n  const formatDateRange = (start, end) => {\n    const startStr = start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    const endStr = end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    return `${startStr} to ${endStr}`;\n  };\n\n  // Calculate summary statistics for physician view\n  let weekSummary = null;\n  if (patientData && patientData.length > 0) {\n\n    const weekData = patientData.filter(d => {\n      const dataDate = new Date(d.Date);\n      return dataDate >= startOfWeek && dataDate <= endOfWeek;\n    });\n\n    if (weekData.length === 0) return null;\n\n    // Count food categories across all meals\n    const categoryStats = {};\n    FOOD_CATEGORIES.forEach(category => {\n      categoryStats[category] = 0;\n    });\n\n    // Count sugar levels\n    const sugarStats = {};\n    SUGAR_CATEGORIES.filter(s => s !== '').forEach(sugar => {\n      sugarStats[sugar] = 0;\n    });\n\n    let totalMealsLogged = 0;\n    let daysWithMeals = new Set();\n\n    weekData.forEach(dayData => {\n      daysWithMeals.add(dayData.Date);\n      \n      MEAL_TYPES.forEach(meal => {\n        const mealData = getMealData(dayData, meal);\n        const hasAnyFood = FOOD_CATEGORIES.some(category => mealData[category]);\n        \n        if (hasAnyFood) {\n          totalMealsLogged++;\n          \n          // Count each food category\n          FOOD_CATEGORIES.forEach(category => {\n            if (mealData[category]) {\n              categoryStats[category]++;\n            }\n          });\n\n          // Count sugar levels\n          if (mealData['Added Sugar'] && mealData['Added Sugar'] !== '') {\n            sugarStats[mealData['Added Sugar']]++;\n          }\n        }\n      });\n    });\n\n    // Find most common food category\n    const mostCommonFood = Object.entries(categoryStats)\n      .sort(([,a], [,b]) => b - a)[0];\n\n    // Calculate sugar frequency\n    const totalSugarMeals = Object.values(sugarStats).reduce((sum, count) => sum + count, 0);\n    const sugarPercentage = totalMealsLogged > 0 ? \n      ((totalSugarMeals / totalMealsLogged) * 100).toFixed(0) : 0;\n\n    weekSummary = {\n      totalMealsLogged,\n      daysWithMeals: daysWithMeals.size,\n      mostCommonFood: mostCommonFood[0],\n      mostCommonFoodCount: mostCommonFood[1],\n      categoryStats,\n      sugarPercentage,\n      totalSugarMeals\n    };\n  }\n\n  // Calculate 3-month summary statistics for physician view\n  let threeMonthSummary = null;\n  if (threeMonthData && threeMonthData.length > 0) {\n\n    // Count food categories across all meals\n    const categoryStats = {};\n    FOOD_CATEGORIES.forEach(category => {\n      categoryStats[category] = 0;\n    });\n\n    // Count sugar levels\n    const sugarStats = {};\n    SUGAR_CATEGORIES.filter(s => s !== '').forEach(sugar => {\n      sugarStats[sugar] = 0;\n    });\n\n    let totalMealsLogged = 0;\n    let daysWithMeals = new Set();\n\n    threeMonthData.forEach(dayData => {\n      daysWithMeals.add(dayData.Date);\n      \n      MEAL_TYPES.forEach(meal => {\n        const mealData = getMealData(dayData, meal);\n        const hasAnyFood = FOOD_CATEGORIES.some(category => mealData[category]);\n        \n        if (hasAnyFood) {\n          totalMealsLogged++;\n          \n          // Count each food category\n          FOOD_CATEGORIES.forEach(category => {\n            if (mealData[category]) {\n              categoryStats[category]++;\n            }\n          });\n\n          // Count sugar levels\n          if (mealData['Added Sugar'] && mealData['Added Sugar'] !== '') {\n            sugarStats[mealData['Added Sugar']]++;\n          }\n        }\n      });\n    });\n\n    // Find most common food category\n    const mostCommonFood = Object.entries(categoryStats)\n      .sort(([,a], [,b]) => b - a)[0];\n\n    // Calculate sugar frequency\n    const totalSugarMeals = Object.values(sugarStats).reduce((sum, count) => sum + count, 0);\n    const sugarPercentage = totalMealsLogged > 0 ? \n      ((totalSugarMeals / totalMealsLogged) * 100).toFixed(0) : 0;\n\n    threeMonthSummary = {\n      totalMealsLogged,\n      daysWithMeals: daysWithMeals.size,\n      mostCommonFood: mostCommonFood[0],\n      mostCommonFoodCount: mostCommonFood[1],\n      categoryStats,\n      sugarPercentage,\n      totalSugarMeals\n    };\n  }\n\n\n  \n  return (\n      <div className=\"meal-contents-chart-container\">\n        <h3 className=\"chart-title\">Meal Contents</h3>\n        <h4 className=\"chart-subtitle\">{nav.getFormattedDateRange()}</h4>\n        <div className={`meal-chart-wrapper ${isExpanded ? 'expanded' : ''}`} ref={containerRef}>\n          <svg \n            width={config.width} \n            height={config.height} \n            viewBox={`0 0 ${config.width} ${config.height}`} \n            className=\"meal-chart\"\n            style={{ maxWidth: '100%', height: 'auto' }}\n          >\n            <XAxis config={config} weekDays={weekDays} />\n            <YAxis config={config} />\n            <MealGrid \n              config={config} \n              weekDays={weekDays} \n              patientData={patientData} \n              isExpanded={isExpanded}\n            />\n          </svg>\n        </div>\n        \n        <div className=\"meal-contents-legends-wrapper\">\n            <Legend \n              title=\"Food Categories\" \n              items={FOOD_CATEGORIES.map(category => ({\n                label: `${CATEGORY_EMOJIS[category]} ${category}`,\n                color: null\n              }))}\n              hide={screenshotMode}\n            />\n            <Legend \n              title=\"Sugar Levels\" \n              items={SUGAR_CATEGORIES.filter(sugar => sugar !== '').map(sugar => ({\n                label: `${SUGAR_EMOJIS[sugar]} ${sugar}`,\n                color: null\n              }))}\n              hide={screenshotMode}\n            />\n        </div>\n\n        {/* Show summary for physician/unified view */}\n        {(viewMode === 'physician' || viewMode === 'unified') && weekSummary && (\n          <div className=\"summary-container\">\n            <div className=\"chart-summary\">\n              <h4>Week Summary</h4>\n              <div className=\"summary-stats\">\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Meals Logged:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.totalMealsLogged}/28 possible\n                  </span>\n                </div>\n\n\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Added Sugar:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.sugarPercentage}% of meals ({weekSummary.totalSugarMeals}/{weekSummary.totalMealsLogged})\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Food Balance:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.categoryStats && Object.entries(weekSummary.categoryStats)\n                      .sort(([,a], [,b]) => b - a)\n                      .slice(0, 3)\n                      .map(([cat, count]) => `${CATEGORY_EMOJIS[cat]}${count}`)\n                      .join(' ')}\n                  </span>\n                </div>\n              </div>\n            </div>\n            \n            {showThreeMonthSummaries && threeMonthSummary && (\n              <div className=\"chart-summary\">\n                <h4>3-Month Summary</h4>\n                <div className=\"summary-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Meals Logged:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.totalMealsLogged} meals\n                    </span>\n                  </div>\n\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Added Sugar:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.sugarPercentage}% of meals ({threeMonthSummary.totalSugarMeals}/{threeMonthSummary.totalMealsLogged})\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Food Balance:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.categoryStats && Object.entries(threeMonthSummary.categoryStats)\n                        .sort(([,a], [,b]) => b - a)\n                        .slice(0, 3)\n                        .map(([cat, count]) => `${CATEGORY_EMOJIS[cat]}${count}`)\n                        .join(' ')}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n  );\n};\n\nexport default MealContentsChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}