{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matteo\\\\Working_Folder\\\\a. MCC Thesis Local Experimental\\\\PGHD_Visualization_Dashboard\\\\src\\\\components\\\\patient_charts\\\\SleepChart.js\",\n  _s = $RefreshSig$();\n/*\n SleepChart.js - Sleep Pattern Monitoring Visualization\n \n This component tracks sleep with sleep duration and quality rating visualization. It includes weekly sleep pattern analysis with color coded sleep quality indicators. It provides interactive tooltips with sleep details and includes navigation controls for time periods. It integrates with patient data and chart navigation. The component uses custom SVG for bar chart visualization and implements a sleep quality categorization system. It provides color coded quality indicators for interpretation and supports expandable views. It implements time based navigation and data filtering. Visualization features include a bar chart showing daily sleep duration, color coded quality indicators for Very good, Fairly good, Fairly bad, and Very bad sleep quality, interactive tooltips with detailed sleep information, design that adapts to container size, and dynamic Y axis scaling based on sleep duration range. Sleep quality categories include Very good for optimal sleep quality, Fairly good for good sleep quality, Fairly bad for poor sleep quality, and Very bad for very poor sleep quality. Clinical features include sleep duration tracking with recommended ranges, quality assessment based on subjective ratings, sleep consistency analysis, summary statistics for physician view, and trend analysis over time periods. Component structure includes a main SVG container with sizing for the chart container, duration scale with hour based labeling on the Y axis, day of week labels with date information on the X axis, sleep duration bars with quality color coding for data bars, sleep quality explanations in the legend, and detailed sleep information on hover in tooltips. This component is used for sleep hygiene monitoring and sleep disorder assessment.\n */\n\nimport React, { useState } from 'react';\nimport usePatientData from '../../hooks/usePatientData';\nimport Legend from '../Legend';\nimport './SleepChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SleepChart = ({\n  patientId,\n  isExpanded,\n  onExpand,\n  accessType = 'Admin',\n  navigation,\n  screenshotMode = false,\n  showThreeMonthSummaries = false\n}) => {\n  _s();\n  const {\n    sleepData\n  } = usePatientData(patientId);\n  // For Patient access, force Bar Chart and remove Line Chart access\n  // For Physician access, force Line Chart and remove Bar Chart access\n  // Admin can toggle between both\n  const shouldForceLineChart = accessType === 'Physician';\n  const [useLineChart, setUseLineChart] = useState(shouldForceLineChart);\n  const nav = navigation;\n  const {\n    start: startOfWeek,\n    end: endOfWeek\n  } = nav.getDateRange();\n  const weekData = sleepData.filter(d => d.date >= startOfWeek && d.date <= endOfWeek);\n\n  // Get data for the previous week\n  const prevWeekStart = new Date(startOfWeek);\n  prevWeekStart.setDate(prevWeekStart.getDate() - 7);\n  const prevWeekEnd = new Date(startOfWeek);\n  prevWeekEnd.setDate(prevWeekEnd.getDate() - 1);\n  const prevWeekData = sleepData.filter(d => d.date >= prevWeekStart && d.date <= prevWeekEnd);\n\n  // Get data for the next week\n  const nextWeekStart = new Date(endOfWeek);\n  nextWeekStart.setDate(nextWeekStart.getDate() + 1);\n  const nextWeekEnd = new Date(nextWeekStart);\n  nextWeekEnd.setDate(nextWeekEnd.getDate() + 6);\n  const nextWeekData = sleepData.filter(d => d.date >= nextWeekStart && d.date <= nextWeekEnd);\n\n  // Get data for the three month period\n  const {\n    start: startOfThreeMonths,\n    end: endOfThreeMonths\n  } = nav.getThreeMonthRange();\n  const threeMonthData = sleepData.filter(d => d.date >= startOfThreeMonths && d.date <= endOfThreeMonths);\n  const qualityLevels = {\n    'Very good': 'var(--chart-color-sleep-very-good)',\n    'Fairly good': 'var(--chart-color-sleep-fairly-good)',\n    'Fairly bad': 'var(--chart-color-sleep-fairly-bad)',\n    'Very bad': 'var(--chart-color-sleep-very-bad)'\n  };\n  const getQualityColor = quality => qualityLevels[quality] || '#D3D3D3';\n  const legendItems = Object.entries(qualityLevels).map(([label, color]) => ({\n    label,\n    color\n  }));\n\n  // Array of day names for date formatting\n  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  // Process data for extended chart showing three weeks\n  let extendedChartData = [];\n  if (isExpanded) {\n    // Combine all three weeks of data into one array\n    const allWeeksData = [...prevWeekData, ...weekData, ...nextWeekData];\n\n    // Create a map of dates to sleep data for all three weeks\n    const dateMap = new Map();\n    allWeeksData.forEach(item => {\n      const dateKey = item.date.toDateString();\n      dateMap.set(dateKey, item);\n    });\n\n    // Generate chart data for all 21 days across three weeks\n    const data = [];\n    const weekLabels = ['Prev Week', 'Current Week', 'Next Week'];\n    const weekStarts = [prevWeekStart, startOfWeek, nextWeekStart];\n    for (let week = 0; week < 3; week++) {\n      const weekStart = weekStarts[week];\n      for (let day = 0; day < 7; day++) {\n        const date = new Date(weekStart);\n        date.setDate(date.getDate() + day);\n        const dateKey = date.toDateString();\n        const sleepData = dateMap.get(dateKey) || {\n          hours: 0,\n          quality: 'Very bad'\n        };\n        data.push({\n          date,\n          day: dayNames[date.getDay()],\n          hours: sleepData.hours,\n          quality: sleepData.quality,\n          color: getQualityColor(sleepData.quality),\n          week: week,\n          weekLabel: weekLabels[week]\n        });\n      }\n    }\n    extendedChartData = data;\n  }\n\n  // Calculate sleep summary statistics\n  function calculateSleepSummary(data) {\n    if (!data || data.length === 0) {\n      return null;\n    }\n    const totalHours = data.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / data.length).toFixed(1);\n\n    // Calculate sleep consistency by measuring variation in sleep hours\n    const hourVariations = data.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Calculate average quality score using existing qualityCode from CSV data where 0 is Very good and 3 is Very bad\n    // Use quality string mapping if qualityCode is not available\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = data.reduce((sum, day) => {\n      const code = day.qualityCode !== undefined ? day.qualityCode : qualityScores[day.quality] || 0;\n      return sum + code;\n    }, 0) / data.length;\n\n    // Map average score back to quality category by rounding to nearest value where lower scores are better\n    const getQualityFromScore = score => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n    return {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      avgVariation,\n      averageQuality\n    };\n  }\n\n  // Calculate summary statistics for the physician view\n  const weekSummary = calculateSleepSummary(weekData);\n  const threeMonthSummary = calculateSleepSummary(threeMonthData);\n\n  // Line chart component for sleep duration\n  const SleepLineChart = ({\n    data,\n    isExpanded,\n    extendedData\n  }) => {\n    const isExtendedView = isExpanded && extendedData && extendedData.length > 0;\n    const chartData = isExtendedView ? extendedData : data;\n    if (!chartData || chartData.length === 0) return null;\n    const maxHours = chartData.length > 0 ? Math.max(...chartData.map(d => d.hours)) : 0;\n    const minHours = 0; // Always start Y axis at 0\n    const range = Math.max(maxHours - minHours, 1); // Ensure minimum range of 1\n    const padding = Math.max(range * 0.1, 0.5); // Add 10 percent padding with minimum of 0.5\n\n    const config = {\n      width: isExtendedView ? 900 : isExpanded ? 600 : 400,\n      // Wider for three week view\n      height: isExpanded ? 220 : 150,\n      // Reduced height since week labels were removed\n      padding: {\n        top: 20,\n        right: 30,\n        bottom: 50,\n        left: 50\n      },\n      // Reduced bottom padding\n      fontSize: {\n        yAxis: isExpanded ? 10 : 12,\n        xAxis: isExpanded ? 10 : 12\n      }\n    };\n    const chartWidth = config.width - config.padding.left - config.padding.right;\n    const chartHeight = config.height - config.padding.top - config.padding.bottom;\n    const dayWidth = chartWidth / (chartData.length - 1); // Calculate width dynamically based on data length\n\n    const getX = index => config.padding.left + index * dayWidth;\n    const getY = hours => config.padding.top + chartHeight - (hours - minHours + padding) / (range + 2 * padding) * chartHeight;\n    const pathData = chartData.map((day, index) => {\n      const x = getX(index);\n      const y = getY(day.hours);\n      return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;\n    }).join(' ');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-line-chart\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: `0 0 ${config.width} ${config.height}`,\n        children: [[0, 2, 4, 6, 8, 10, 12].map(hours => {\n          if (hours > maxHours + padding) return null; // Do not show grid lines above data range\n          const y = getY(hours);\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: config.padding.left,\n              y1: y,\n              x2: config.width - config.padding.right,\n              y2: y,\n              stroke: \"#000000\",\n              strokeWidth: \"1\",\n              strokeDasharray: \"2,2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: config.padding.left - 10,\n              y: y + 3,\n              fontSize: config.fontSize.yAxis,\n              textAnchor: \"end\",\n              fill: \"var(--chart-color-text-secondary)\",\n              children: [hours, \"h\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this)]\n          }, hours, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this);\n        }), isExtendedView && [7, 14].map(weekIndex => {\n          const x = config.padding.left + weekIndex * dayWidth;\n          return /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: x,\n            y1: config.padding.top,\n            x2: x,\n            y2: config.height - config.padding.bottom,\n            stroke: \"#000000\",\n            strokeWidth: \"2\",\n            strokeDasharray: \"5,5\"\n          }, weekIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: pathData,\n          fill: \"none\",\n          stroke: \"#000000\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), chartData.map((day, index) => {\n          const x = getX(index);\n          const y = getY(day.hours);\n          const dateNum = day.date.getDate();\n          const dayAbbr = day.day || dayNames[day.date.getDay()];\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: x,\n              cy: y,\n              r: \"5\",\n              fill: getQualityColor(day.quality),\n              stroke: \"none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: y - 15,\n              fontSize: \"10\",\n              fill: \"#333\",\n              textAnchor: \"middle\",\n              children: [day.hours.toFixed(1), \"h\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 15,\n              fontSize: config.fontSize.xAxis,\n              textAnchor: \"middle\",\n              className: \"x-axis-day-label\",\n              children: dayAbbr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 30,\n              fontSize: config.fontSize.xAxis - 1,\n              textAnchor: \"middle\",\n              className: \"x-axis-date-label\",\n              fill: \"var(--chart-color-text-secondary)\",\n              children: dateNum\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sleep-chart-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"chart-title\",\n        children: \"Sleep Quality & Duration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"chart-subtitle\",\n        children: nav.getFormattedDateRange()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), accessType === 'Admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${!useLineChart ? 'active' : ''}`,\n          onClick: () => setUseLineChart(false),\n          children: \"Bar Chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${useLineChart ? 'active' : ''}`,\n          onClick: () => setUseLineChart(true),\n          children: \"Line Chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }, this), useLineChart ? /*#__PURE__*/_jsxDEV(SleepLineChart, {\n      data: weekData,\n      isExpanded: isExpanded,\n      extendedData: extendedChartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-chart\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sleep-quality-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sleep-quality-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sleep-quality-indicator\",\n            style: {\n              backgroundColor: getQualityColor(day.quality)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 19\n          }, this)\n        }, `quality-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bed-icons-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bed-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bed-icon-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              viewBox: \"0 0 486.5 225.1\",\n              className: \"bed-icon\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M471.9,68.9c-8,0-14.5,6.5-14.5,14.5v68.6H26.1l-.6-139.3c0-7-5.8-12.7-12.8-12.7h0C5.7,0,0,5.7,0,12.8v199.6c0,7,5.7,12.8,12.7,12.8s12.8-5.7,12.8-12.8v-37h431.9v35.2c0,8,6.5,14.5,14.5,14.5s14.5-6.5,14.5-14.5v-127.1c0-8-6.5-14.5-14.5-14.5ZM483.7,210.6c0,6.5-5.3,11.8-11.8,11.8s-11.8-5.3-11.8-11.8v-38H22.7v39.7c0,5.5-4.5,10-10,10s-10-4.5-10-10V12.8C2.8,7.3,7.3,2.8,12.7,2.8h0c5.5,0,9.9,4.5,10,9.9l.6,142.1h436.8v-71.4c0-6.5,5.3-11.7,11.8-11.7s11.8,5.3,11.8,11.7v127.1Z\",\n                fill: \"#D2B48C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M29.9,94.2v54.5h425.4v-54.5H29.9ZM452.5,145.9H32.7v-48.9h419.8v48.9Z\",\n                fill: \"#000000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                x: \"32.7\",\n                y: \"97\",\n                width: `${day.hours / 10 * 419.8}`,\n                height: \"48.9\",\n                fill: \"#FF4500\",\n                className: \"sleep-fill-rect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M112.8,46.3h-55.4c-12.1,0-22,9.9-22,22s9.9,22,22,22h55.4c12.1,0,22-9.9,22-22s-9.9-22-22-22ZM112.8,87.5h-55.4c-10.6,0-19.2-8.6-19.2-19.2s8.6-19.2,19.2-19.2h55.4c10.6,0,19.2,8.6,19.2,19.2s-8.6,19.2-19.2,19.2Z\",\n                fill: \"#FFFFFF\",\n                stroke: \"#AAAAAA\",\n                strokeWidth: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 19\n          }, this)\n        }, `bed-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sleep-info-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sleep-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sleep-hours\",\n            children: [day.hours.toFixed(1), \"h\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"day-label\",\n            children: (() => {\n              const date = new Date(day.date);\n              return !isNaN(date.getTime()) ? dayNames[date.getDay()] : dayNames[0];\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-label\",\n            children: (() => {\n              const date = new Date(day.date);\n              return !isNaN(date.getTime()) ? date.getDate() : 'Invalid';\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 19\n          }, this)]\n        }, `info-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      title: \"Sleep Quality\",\n      items: legendItems,\n      hide: screenshotMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }, this), weekSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Week Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.avgHours, \" hours/night\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.totalHours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Sleep Consistency:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [\"\\xB1\", weekSummary.avgVariation, \" hours variation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Quality:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: weekSummary.averageQuality\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this), showThreeMonthSummaries && threeMonthSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"3-Month Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.avgHours, \" hours/night\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.totalHours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Sleep Consistency:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [\"\\xB1\", threeMonthSummary.avgVariation, \" hours variation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Quality:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: threeMonthSummary.averageQuality\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 7\n  }, this);\n};\n_s(SleepChart, \"wI8PUZa+8VQStDARXbtss7Gi/sM=\", false, function () {\n  return [usePatientData];\n});\n_c = SleepChart;\nexport default SleepChart;\nvar _c;\n$RefreshReg$(_c, \"SleepChart\");","map":{"version":3,"names":["React","useState","usePatientData","Legend","jsxDEV","_jsxDEV","SleepChart","patientId","isExpanded","onExpand","accessType","navigation","screenshotMode","showThreeMonthSummaries","_s","sleepData","shouldForceLineChart","useLineChart","setUseLineChart","nav","start","startOfWeek","end","endOfWeek","getDateRange","weekData","filter","d","date","prevWeekStart","Date","setDate","getDate","prevWeekEnd","prevWeekData","nextWeekStart","nextWeekEnd","nextWeekData","startOfThreeMonths","endOfThreeMonths","getThreeMonthRange","threeMonthData","qualityLevels","getQualityColor","quality","legendItems","Object","entries","map","label","color","dayNames","extendedChartData","allWeeksData","dateMap","Map","forEach","item","dateKey","toDateString","set","data","weekLabels","weekStarts","week","weekStart","day","get","hours","push","getDay","weekLabel","calculateSleepSummary","length","totalHours","reduce","sum","avgHours","toFixed","hourVariations","Math","abs","parseFloat","avgVariation","v","qualityScores","avgQualityScore","code","qualityCode","undefined","getQualityFromScore","score","averageQuality","weekSummary","threeMonthSummary","SleepLineChart","extendedData","isExtendedView","chartData","maxHours","max","minHours","range","padding","config","width","height","top","right","bottom","left","fontSize","yAxis","xAxis","chartWidth","chartHeight","dayWidth","getX","index","getY","pathData","x","y","join","className","children","viewBox","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","fileName","_jsxFileName","lineNumber","columnNumber","textAnchor","fill","weekIndex","dateNum","dayAbbr","cx","cy","r","getFormattedDateRange","onClick","style","backgroundColor","isNaN","getTime","title","items","hide","_c","$RefreshReg$"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local Experimental/PGHD_Visualization_Dashboard/src/components/patient_charts/SleepChart.js"],"sourcesContent":["/*\n SleepChart.js - Sleep Pattern Monitoring Visualization\n \n This component tracks sleep with sleep duration and quality rating visualization. It includes weekly sleep pattern analysis with color coded sleep quality indicators. It provides interactive tooltips with sleep details and includes navigation controls for time periods. It integrates with patient data and chart navigation. The component uses custom SVG for bar chart visualization and implements a sleep quality categorization system. It provides color coded quality indicators for interpretation and supports expandable views. It implements time based navigation and data filtering. Visualization features include a bar chart showing daily sleep duration, color coded quality indicators for Very good, Fairly good, Fairly bad, and Very bad sleep quality, interactive tooltips with detailed sleep information, design that adapts to container size, and dynamic Y axis scaling based on sleep duration range. Sleep quality categories include Very good for optimal sleep quality, Fairly good for good sleep quality, Fairly bad for poor sleep quality, and Very bad for very poor sleep quality. Clinical features include sleep duration tracking with recommended ranges, quality assessment based on subjective ratings, sleep consistency analysis, summary statistics for physician view, and trend analysis over time periods. Component structure includes a main SVG container with sizing for the chart container, duration scale with hour based labeling on the Y axis, day of week labels with date information on the X axis, sleep duration bars with quality color coding for data bars, sleep quality explanations in the legend, and detailed sleep information on hover in tooltips. This component is used for sleep hygiene monitoring and sleep disorder assessment.\n */\n\nimport React, { useState } from 'react';\nimport usePatientData from '../../hooks/usePatientData';\nimport Legend from '../Legend';\nimport './SleepChart.css';\n\nconst SleepChart = ({ patientId, isExpanded, onExpand, accessType = 'Admin', navigation, screenshotMode = false, showThreeMonthSummaries = false }) => {\n  const { sleepData } = usePatientData(patientId);\n  // For Patient access, force Bar Chart and remove Line Chart access\n  // For Physician access, force Line Chart and remove Bar Chart access\n  // Admin can toggle between both\n  const shouldForceLineChart = accessType === 'Physician';\n  const [useLineChart, setUseLineChart] = useState(shouldForceLineChart);\n  \n  const nav = navigation;\n\n  const { start: startOfWeek, end: endOfWeek } = nav.getDateRange();\n  const weekData = sleepData.filter(d => d.date >= startOfWeek && d.date <= endOfWeek);\n\n  // Get data for the previous week\n  const prevWeekStart = new Date(startOfWeek);\n  prevWeekStart.setDate(prevWeekStart.getDate() - 7);\n  const prevWeekEnd = new Date(startOfWeek);\n  prevWeekEnd.setDate(prevWeekEnd.getDate() - 1);\n  const prevWeekData = sleepData.filter(d => d.date >= prevWeekStart && d.date <= prevWeekEnd);\n\n  // Get data for the next week\n  const nextWeekStart = new Date(endOfWeek);\n  nextWeekStart.setDate(nextWeekStart.getDate() + 1);\n  const nextWeekEnd = new Date(nextWeekStart);\n  nextWeekEnd.setDate(nextWeekEnd.getDate() + 6);\n  const nextWeekData = sleepData.filter(d => d.date >= nextWeekStart && d.date <= nextWeekEnd);\n\n  // Get data for the three month period\n  const { start: startOfThreeMonths, end: endOfThreeMonths } = nav.getThreeMonthRange();\n  const threeMonthData = sleepData.filter(d => d.date >= startOfThreeMonths && d.date <= endOfThreeMonths);\n\n  const qualityLevels = {\n    'Very good': 'var(--chart-color-sleep-very-good)',\n    'Fairly good': 'var(--chart-color-sleep-fairly-good)',\n    'Fairly bad': 'var(--chart-color-sleep-fairly-bad)',\n    'Very bad': 'var(--chart-color-sleep-very-bad)',\n  };\n\n  const getQualityColor = (quality) => qualityLevels[quality] || '#D3D3D3';\n\n  const legendItems = Object.entries(qualityLevels).map(([label, color]) => ({\n    label,\n    color,\n  }));\n\n  // Array of day names for date formatting\n  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  // Process data for extended chart showing three weeks\n  let extendedChartData = [];\n  if (isExpanded) {\n    // Combine all three weeks of data into one array\n    const allWeeksData = [...prevWeekData, ...weekData, ...nextWeekData];\n    \n    // Create a map of dates to sleep data for all three weeks\n    const dateMap = new Map();\n    allWeeksData.forEach(item => {\n      const dateKey = item.date.toDateString();\n      dateMap.set(dateKey, item);\n    });\n\n    // Generate chart data for all 21 days across three weeks\n    const data = [];\n    const weekLabels = ['Prev Week', 'Current Week', 'Next Week'];\n    const weekStarts = [prevWeekStart, startOfWeek, nextWeekStart];\n    \n    for (let week = 0; week < 3; week++) {\n      const weekStart = weekStarts[week];\n      \n      for (let day = 0; day < 7; day++) {\n        const date = new Date(weekStart);\n        date.setDate(date.getDate() + day);\n        const dateKey = date.toDateString();\n        const sleepData = dateMap.get(dateKey) || { hours: 0, quality: 'Very bad' };\n        \n        data.push({\n          date,\n          day: dayNames[date.getDay()],\n          hours: sleepData.hours,\n          quality: sleepData.quality,\n          color: getQualityColor(sleepData.quality),\n          week: week,\n          weekLabel: weekLabels[week]\n        });\n      }\n    }\n\n    extendedChartData = data;\n  }\n\n  // Calculate sleep summary statistics\n  function calculateSleepSummary(data) {\n    if (!data || data.length === 0) {\n      return null;\n    }\n\n    const totalHours = data.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / data.length).toFixed(1);\n\n    // Calculate sleep consistency by measuring variation in sleep hours\n    const hourVariations = data.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Calculate average quality score using existing qualityCode from CSV data where 0 is Very good and 3 is Very bad\n    // Use quality string mapping if qualityCode is not available\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = data.reduce((sum, day) => {\n      const code = day.qualityCode !== undefined ? day.qualityCode : (qualityScores[day.quality] || 0);\n      return sum + code;\n    }, 0) / data.length;\n    \n    // Map average score back to quality category by rounding to nearest value where lower scores are better\n    const getQualityFromScore = (score) => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n\n    return {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      avgVariation,\n      averageQuality\n    };\n  }\n\n  // Calculate summary statistics for the physician view\n  const weekSummary = calculateSleepSummary(weekData);\n  const threeMonthSummary = calculateSleepSummary(threeMonthData);\n\n  // Line chart component for sleep duration\n  const SleepLineChart = ({ data, isExpanded, extendedData }) => {\n    const isExtendedView = isExpanded && extendedData && extendedData.length > 0;\n    const chartData = isExtendedView ? extendedData : data;\n    \n    if (!chartData || chartData.length === 0) return null;\n\n    const maxHours = chartData.length > 0 ? Math.max(...chartData.map(d => d.hours)) : 0;\n    const minHours = 0; // Always start Y axis at 0\n    const range = Math.max(maxHours - minHours, 1); // Ensure minimum range of 1\n    const padding = Math.max(range * 0.1, 0.5); // Add 10 percent padding with minimum of 0.5\n    \n    const config = {\n      width: isExtendedView ? 900 : (isExpanded ? 600 : 400), // Wider for three week view\n      height: isExpanded ? 220 : 150, // Reduced height since week labels were removed\n      padding: { top: 20, right: 30, bottom: 50, left: 50 }, // Reduced bottom padding\n      fontSize: {\n        yAxis: isExpanded ? 10 : 12,\n        xAxis: isExpanded ? 10 : 12,\n      }\n    };\n\n    const chartWidth = config.width - config.padding.left - config.padding.right;\n    const chartHeight = config.height - config.padding.top - config.padding.bottom;\n    const dayWidth = chartWidth / (chartData.length - 1); // Calculate width dynamically based on data length\n\n    const getX = (index) => config.padding.left + (index * dayWidth);\n    const getY = (hours) => config.padding.top + chartHeight - ((hours - minHours + padding) / (range + 2 * padding)) * chartHeight;\n\n    const pathData = chartData.map((day, index) => {\n      const x = getX(index);\n      const y = getY(day.hours);\n      return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;\n    }).join(' ');\n\n    return (\n      <div className=\"sleep-line-chart\">\n        <svg width=\"100%\" height=\"100%\" viewBox={`0 0 ${config.width} ${config.height}`}>\n          {/* Grid lines */}\n          {[0, 2, 4, 6, 8, 10, 12].map(hours => {\n            if (hours > maxHours + padding) return null; // Do not show grid lines above data range\n            const y = getY(hours);\n            return (\n              <g key={hours}>\n                <line \n                  x1={config.padding.left} \n                  y1={y} \n                  x2={config.width - config.padding.right} \n                  y2={y} \n                  stroke=\"#000000\" \n                  strokeWidth=\"1\" \n                  strokeDasharray=\"2,2\"\n                />\n                <text \n                  x={config.padding.left - 10} \n                  y={y + 3} \n                  fontSize={config.fontSize.yAxis} \n                  textAnchor=\"end\" \n                  fill=\"var(--chart-color-text-secondary)\"\n                >\n                  {hours}h\n                </text>\n              </g>\n            );\n          })}\n\n          {/* Week separators for the extended view */}\n          {isExtendedView && [7, 14].map(weekIndex => {\n            const x = config.padding.left + (weekIndex * dayWidth);\n            return (\n              <line \n                key={weekIndex}\n                x1={x} \n                y1={config.padding.top} \n                x2={x} \n                y2={config.height - config.padding.bottom} \n                stroke=\"#000000\" \n                strokeWidth=\"2\" \n                strokeDasharray=\"5,5\"\n              />\n            );\n          })}\n          \n          {/* Line path */}\n          <path d={pathData} fill=\"none\" stroke=\"#000000\" strokeWidth=\"2\" />\n          \n          {/* Data points */}\n          {chartData.map((day, index) => {\n            const x = getX(index);\n            const y = getY(day.hours);\n            const dateNum = day.date.getDate();\n            const dayAbbr = day.day || dayNames[day.date.getDay()];\n            \n            return (\n              <g key={index}>\n                <circle \n                  cx={x} \n                  cy={y} \n                  r=\"5\" \n                  fill={getQualityColor(day.quality)}\n                  stroke=\"none\"\n                />\n                <text x={x} y={y - 15} fontSize=\"10\" fill=\"#333\" textAnchor=\"middle\">\n                  {day.hours.toFixed(1)}h\n                </text>\n                <text \n                  x={x} \n                  y={config.height - config.padding.bottom + 15} \n                  fontSize={config.fontSize.xAxis} \n                  textAnchor=\"middle\" \n                  className=\"x-axis-day-label\"\n                >\n                  {dayAbbr}\n                </text>\n                <text \n                  x={x} \n                  y={config.height - config.padding.bottom + 30} \n                  fontSize={config.fontSize.xAxis - 1} \n                  textAnchor=\"middle\" \n                  className=\"x-axis-date-label\"\n                  fill=\"var(--chart-color-text-secondary)\"\n                >\n                  {dateNum}\n                </text>\n              </g>\n            );\n          })}\n        </svg>\n      </div>\n    );\n  };\n\n  return (\n      <div className=\"sleep-chart-content\">\n        <div className=\"sleep-header\">\n          <h3 className=\"chart-title\">Sleep Quality & Duration</h3>\n          <h4 className=\"chart-subtitle\">{nav.getFormattedDateRange()}</h4>\n          \n          {/* View toggle that hides for Patient and Physician and shows both for Admin */}\n          {accessType === 'Admin' && (\n            <div className=\"view-toggle\">\n              <button \n                className={`toggle-btn ${!useLineChart ? 'active' : ''}`}\n                onClick={() => setUseLineChart(false)}\n              >\n                Bar Chart\n              </button>\n              <button \n                className={`toggle-btn ${useLineChart ? 'active' : ''}`}\n                onClick={() => setUseLineChart(true)}\n              >\n                Line Chart\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Conditionally render chart based on selected view type */}\n        {useLineChart ? (\n          <SleepLineChart \n            data={weekData} \n            isExpanded={isExpanded} \n            extendedData={extendedChartData}\n          />\n        ) : (\n          <div className=\"sleep-chart\">\n            {/* Row showing sleep quality indicators */}\n            <div className=\"sleep-quality-row\">\n              {weekData.map((day, index) => (\n                <div key={`quality-${index}`} className=\"sleep-quality-item\">\n                  <div \n                    className=\"sleep-quality-indicator\"\n                    style={{ backgroundColor: getQualityColor(day.quality) }}\n                  ></div>\n                </div>\n              ))}\n            </div>\n            \n            {/* Row showing bed icons */}\n            <div className=\"bed-icons-row\">\n              {weekData.map((day, index) => (\n                <div key={`bed-${index}`} className=\"bed-item\">\n                  <div className=\"bed-icon-wrapper\">\n                    <svg viewBox=\"0 0 486.5 225.1\" className=\"bed-icon\">\n                      <path d=\"M471.9,68.9c-8,0-14.5,6.5-14.5,14.5v68.6H26.1l-.6-139.3c0-7-5.8-12.7-12.8-12.7h0C5.7,0,0,5.7,0,12.8v199.6c0,7,5.7,12.8,12.7,12.8s12.8-5.7,12.8-12.8v-37h431.9v35.2c0,8,6.5,14.5,14.5,14.5s14.5-6.5,14.5-14.5v-127.1c0-8-6.5-14.5-14.5-14.5ZM483.7,210.6c0,6.5-5.3,11.8-11.8,11.8s-11.8-5.3-11.8-11.8v-38H22.7v39.7c0,5.5-4.5,10-10,10s-10-4.5-10-10V12.8C2.8,7.3,7.3,2.8,12.7,2.8h0c5.5,0,9.9,4.5,10,9.9l.6,142.1h436.8v-71.4c0-6.5,5.3-11.7,11.8-11.7s11.8,5.3,11.8,11.7v127.1Z\" fill=\"#D2B48C\"/>\n                      <path d=\"M29.9,94.2v54.5h425.4v-54.5H29.9ZM452.5,145.9H32.7v-48.9h419.8v48.9Z\" fill=\"#000000\"/>\n                      <rect x=\"32.7\" y=\"97\" width={`${(day.hours / 10) * 419.8}`} height=\"48.9\" fill=\"#FF4500\" className=\"sleep-fill-rect\" />\n                      <path d=\"M112.8,46.3h-55.4c-12.1,0-22,9.9-22,22s9.9,22,22,22h55.4c12.1,0,22-9.9,22-22s-9.9-22-22-22ZM112.8,87.5h-55.4c-10.6,0-19.2-8.6-19.2-19.2s8.6-19.2,19.2-19.2h55.4c10.6,0,19.2,8.6,19.2,19.2s-8.6,19.2-19.2,19.2Z\" fill=\"#FFFFFF\" stroke=\"#AAAAAA\" strokeWidth=\"1\"/>\n                    </svg>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            {/* Row showing sleep information */}\n            <div className=\"sleep-info-row\">\n              {weekData.map((day, index) => (\n                <div key={`info-${index}`} className=\"sleep-info-item\">\n                  <div className=\"sleep-hours\">{day.hours.toFixed(1)}h</div>\n                  <div className=\"day-label\">{(() => {\n                    const date = new Date(day.date);\n                    return !isNaN(date.getTime()) ? dayNames[date.getDay()] : dayNames[0];\n                  })()}</div>\n                  <div className=\"date-label\">{(() => {\n                    const date = new Date(day.date);\n                    return !isNaN(date.getTime()) ? date.getDate() : 'Invalid';\n                  })()}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        <Legend title=\"Sleep Quality\" items={legendItems} hide={screenshotMode} />\n\n        {/* Show summary for physician or unified view */}\n        {weekSummary && (\n          <div className=\"summary-container\">\n            <div className=\"chart-summary\">\n              <h4>Week Summary</h4>\n              <div className=\"summary-stats\">\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Average Sleep:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgHours} hours/night\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Total Sleep:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.totalHours} hours\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Sleep Consistency:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgVariation} hours variation\n                  </span>\n                </div>\n\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Average Quality:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.averageQuality}\n                  </span>\n                </div>\n\n              </div>\n            </div>\n            \n            {showThreeMonthSummaries && threeMonthSummary && (\n              <div className=\"chart-summary\">\n                <h4>3-Month Summary</h4>\n                <div className=\"summary-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Average Sleep:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgHours} hours/night\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Total Sleep:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.totalHours} hours\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Sleep Consistency:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgVariation} hours variation\n                    </span>\n                  </div>\n\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Average Quality:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.averageQuality}\n                    </span>\n                  </div>\n\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n  );\n};\n\nexport default SleepChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}