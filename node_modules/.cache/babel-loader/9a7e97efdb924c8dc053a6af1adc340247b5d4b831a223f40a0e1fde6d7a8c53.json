{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matteo\\\\Working_Folder\\\\a. MCC Thesis Local Experimental\\\\PGHD_Visualization_Dashboard\\\\src\\\\components\\\\patient_charts\\\\SleepChart.js\",\n  _s = $RefreshSig$();\n/*\n SleepChart.js - Sleep Pattern Monitoring Visualization\n \n This component provides sleep tracking with sleep duration and quality rating visualization. It includes weekly sleep pattern analysis with color-coded sleep quality indicators. It provides interactive tooltips with sleep details and includes navigation controls for time periods. It integrates with patient data and chart navigation. The component uses custom SVG for bar chart visualization and implements a sleep quality categorization system. It provides color-coded quality indicators for interpretation and supports expandable views. It implements time-based navigation and data filtering. Visualization features include a bar chart showing daily sleep duration, color-coded quality indicators for Very good, Fairly good, Fairly bad, and Very bad sleep quality, interactive tooltips with detailed sleep information, design that adapts to container size, and dynamic Y-axis scaling based on sleep duration range. Sleep quality categories include Very good for optimal sleep quality, Fairly good for good sleep quality, Fairly bad for poor sleep quality, and Very bad for very poor sleep quality. Clinical features include sleep duration tracking with recommended ranges, quality assessment based on subjective ratings, sleep consistency analysis, summary statistics for physician view, and trend analysis over time periods. Component structure includes a main SVG container with sizing for the chart container, duration scale with hour-based labeling on the Y-axis, day-of-week labels with date information on the X-axis, sleep duration bars with quality color coding for data bars, sleep quality explanations in the legend, and detailed sleep information on hover in tooltips. This component is used for sleep hygiene monitoring and sleep disorder assessment.\n */\n\nimport React, { useState, useRef } from 'react';\nimport usePatientData from '../../hooks/usePatientData';\nimport useChartNavigation from '../../hooks/useChartNavigation';\nimport Legend from '../Legend';\nimport './SleepChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SleepChart = ({\n  patientId,\n  isExpanded,\n  onExpand,\n  accessType = 'Admin',\n  navigation,\n  screenshotMode = false,\n  showThreeMonthSummaries = false\n}) => {\n  _s();\n  const {\n    sleepData,\n    loading,\n    error\n  } = usePatientData(patientId);\n  // For Patient access, force Bar Chart (remove Line Chart access).\n  // For Physician access, force Line Chart (remove Bar Chart access).\n  // Admin can toggle between both.\n  const shouldForceBarChart = accessType === 'Patient';\n  const shouldForceLineChart = accessType === 'Physician';\n\n  // Determine initial chart view based on access type\n  let initialUseLineChart = false;\n  if (shouldForceBarChart) {\n    initialUseLineChart = false;\n  } else if (shouldForceLineChart) {\n    initialUseLineChart = true;\n  }\n  const [useLineChart, setUseLineChart] = useState(initialUseLineChart); // Toggle state for chart view\n\n  // Use navigation from parent or fallback to internal navigation\n  const internalNavigation = useChartNavigation('sleep');\n  const nav = navigation || internalNavigation;\n  const {\n    start: startOfWeek,\n    end: endOfWeek\n  } = nav.getDateRange();\n  const weekData = sleepData.filter(d => d.date >= startOfWeek && d.date <= endOfWeek);\n\n  // Get previous week data\n  const prevWeekStart = new Date(startOfWeek);\n  prevWeekStart.setDate(prevWeekStart.getDate() - 7);\n  const prevWeekEnd = new Date(startOfWeek);\n  prevWeekEnd.setDate(prevWeekEnd.getDate() - 1);\n  const prevWeekData = sleepData.filter(d => d.date >= prevWeekStart && d.date <= prevWeekEnd);\n\n  // Get next week data\n  const nextWeekStart = new Date(endOfWeek);\n  nextWeekStart.setDate(nextWeekStart.getDate() + 1);\n  const nextWeekEnd = new Date(nextWeekStart);\n  nextWeekEnd.setDate(nextWeekEnd.getDate() + 6);\n  const nextWeekData = sleepData.filter(d => d.date >= nextWeekStart && d.date <= nextWeekEnd);\n\n  // Get 3-month data\n  const {\n    start: startOfThreeMonths,\n    end: endOfThreeMonths\n  } = nav.getThreeMonthRange();\n  const threeMonthData = sleepData.filter(d => d.date >= startOfThreeMonths && d.date <= endOfThreeMonths);\n  const qualityLevels = {\n    'Very good': 'var(--chart-color-sleep-very-good)',\n    'Fairly good': 'var(--chart-color-sleep-fairly-good)',\n    'Fairly bad': 'var(--chart-color-sleep-fairly-bad)',\n    'Very bad': 'var(--chart-color-sleep-very-bad)'\n  };\n  const getQualityColor = quality => qualityLevels[quality] || '#D3D3D3';\n  const legendItems = Object.entries(qualityLevels).map(([label, color]) => ({\n    label,\n    color\n  }));\n\n  // Process data for extended chart (3 weeks)\n  let extendedChartData = [];\n  if (isExpanded) {\n    // Combine all three weeks of data\n    const allWeeksData = [...prevWeekData, ...weekData, ...nextWeekData];\n\n    // Create a map of dates to sleep data for all 3 weeks\n    const dateMap = new Map();\n    allWeeksData.forEach(item => {\n      const dateKey = item.date.toDateString();\n      dateMap.set(dateKey, item);\n    });\n\n    // Generate chart data for all 21 days (3 weeks)\n    const data = [];\n    const weekLabels = ['Prev Week', 'Current Week', 'Next Week'];\n    const weekStarts = [prevWeekStart, startOfWeek, nextWeekStart];\n    for (let week = 0; week < 3; week++) {\n      const weekStart = weekStarts[week];\n      for (let day = 0; day < 7; day++) {\n        const date = new Date(weekStart);\n        date.setDate(date.getDate() + day);\n        const dateKey = date.toDateString();\n        const sleepData = dateMap.get(dateKey) || {\n          hours: 0,\n          quality: 'Very bad'\n        };\n        data.push({\n          date,\n          day: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][date.getDay()],\n          hours: sleepData.hours,\n          quality: sleepData.quality,\n          color: getQualityColor(sleepData.quality),\n          week: week,\n          weekLabel: weekLabels[week]\n        });\n      }\n    }\n    extendedChartData = data;\n  }\n\n  // Calculate summary statistics for physician view\n  let weekSummary = null;\n  if (weekData && weekData.length > 0) {\n    const totalHours = weekData.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / weekData.length).toFixed(1);\n\n    // Count quality levels\n    const qualityCounts = {};\n    Object.keys(qualityLevels).forEach(quality => {\n      qualityCounts[quality] = 0;\n    });\n    weekData.forEach(day => {\n      if (qualityCounts[day.quality] !== undefined) {\n        qualityCounts[day.quality]++;\n      }\n    });\n\n    // Find most common quality\n    const mostCommonQuality = Object.entries(qualityCounts).sort(([, a], [, b]) => b - a)[0];\n\n    // Calculate sleep consistency (how much variation in sleep hours)\n    const hourVariations = weekData.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Sleep quality score (Very good=0, Fairly good=1, Fairly bad=2, Very bad=3) - matches Python code\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = weekData.reduce((sum, day) => sum + (qualityScores[day.quality] || 0), 0) / weekData.length;\n    const qualityAssessment = avgQualityScore <= 0.5 ? 'Good' : avgQualityScore <= 1.5 ? 'Fair' : 'Poor';\n\n    // Map average score back to quality category (round to nearest) - lower scores are better\n    const getQualityFromScore = score => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n\n    // Count nights with adequate sleep (7+ hours)\n    const adequateSleepNights = weekData.filter(day => day.hours >= 7).length;\n    weekSummary = {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      mostCommonQuality: mostCommonQuality[0],\n      mostCommonQualityCount: mostCommonQuality[1],\n      avgVariation,\n      qualityAssessment,\n      adequateSleepNights,\n      daysTracked: weekData.length,\n      avgQualityScore: avgQualityScore.toFixed(2),\n      averageQuality\n    };\n  }\n\n  // Calculate 3-month summary statistics for physician view\n  let threeMonthSummary = null;\n  if (threeMonthData && threeMonthData.length > 0) {\n    const totalHours = threeMonthData.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / threeMonthData.length).toFixed(1);\n\n    // Count quality levels\n    const qualityCounts = {};\n    Object.keys(qualityLevels).forEach(quality => {\n      qualityCounts[quality] = 0;\n    });\n    threeMonthData.forEach(day => {\n      if (qualityCounts[day.quality] !== undefined) {\n        qualityCounts[day.quality]++;\n      }\n    });\n\n    // Find most common quality\n    const mostCommonQuality = Object.entries(qualityCounts).sort(([, a], [, b]) => b - a)[0];\n\n    // Calculate sleep consistency (how much variation in sleep hours)\n    const hourVariations = threeMonthData.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Sleep quality score (Very good=0, Fairly good=1, Fairly bad=2, Very bad=3) - matches Python code\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = threeMonthData.reduce((sum, day) => sum + (qualityScores[day.quality] || 0), 0) / threeMonthData.length;\n\n    // Map average score back to quality category (round to nearest) - lower scores are better\n    const getQualityFromScore = score => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n    threeMonthSummary = {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      mostCommonQuality: mostCommonQuality[0],\n      mostCommonQualityCount: mostCommonQuality[1],\n      avgVariation,\n      daysTracked: threeMonthData.length,\n      avgQualityScore: avgQualityScore.toFixed(2),\n      averageQuality\n    };\n  }\n\n  // Line Chart Component for Sleep Duration\n  const SleepLineChart = ({\n    data,\n    isExpanded,\n    extendedData\n  }) => {\n    const isExtendedView = isExpanded && extendedData && extendedData.length > 0;\n    const chartData = isExtendedView ? extendedData : data;\n    if (!chartData || chartData.length === 0) return null;\n    const maxHours = chartData.length > 0 ? Math.max(...chartData.map(d => d.hours)) : 0;\n    const minHours = 0; // Always start Y-axis at 0\n    const range = Math.max(maxHours - minHours, 1); // Ensure minimum range of 1\n    const padding = Math.max(range * 0.1, 0.5); // 10% padding, minimum 0.5\n\n    const config = {\n      width: isExtendedView ? 900 : isExpanded ? 600 : 400,\n      // Wider for 3-week view\n      height: isExpanded ? 220 : 150,\n      // Reduced height since we removed week labels\n      padding: {\n        top: 20,\n        right: 30,\n        bottom: 50,\n        left: 50\n      },\n      // Reduced bottom padding\n      fontSize: {\n        yAxis: isExpanded ? 10 : 8,\n        xAxis: isExpanded ? 10 : 8\n      }\n    };\n    const chartWidth = config.width - config.padding.left - config.padding.right;\n    const chartHeight = config.height - config.padding.top - config.padding.bottom;\n    const dayWidth = chartWidth / (chartData.length - 1); // Dynamic based on data length\n\n    const getX = index => config.padding.left + index * dayWidth;\n    const getY = hours => config.padding.top + chartHeight - (hours - minHours + padding) / (range + 2 * padding) * chartHeight;\n    const pathData = chartData.map((day, index) => {\n      const x = getX(index);\n      const y = getY(day.hours);\n      return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;\n    }).join(' ');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-line-chart\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: `0 0 ${config.width} ${config.height}`,\n        children: [[0, 2, 4, 6, 8, 10, 12].map(hours => {\n          if (hours > maxHours + padding) return null; // Don't show grid lines above data range\n          const y = getY(hours);\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: config.padding.left,\n              y1: y,\n              x2: config.width - config.padding.right,\n              y2: y,\n              stroke: \"#e0e0e0\",\n              strokeWidth: \"1\",\n              strokeDasharray: \"2,2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: config.padding.left - 10,\n              y: y + 3,\n              fontSize: config.fontSize.yAxis,\n              textAnchor: \"end\",\n              fill: \"var(--chart-color-text-secondary)\",\n              children: [hours, \"h\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this)]\n          }, hours, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this);\n        }), isExtendedView && [7, 14].map(weekIndex => {\n          const x = config.padding.left + weekIndex * dayWidth;\n          return /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: x,\n            y1: config.padding.top,\n            x2: x,\n            y2: config.height - config.padding.bottom,\n            stroke: \"#ccc\",\n            strokeWidth: \"2\",\n            strokeDasharray: \"5,5\"\n          }, weekIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: pathData,\n          fill: \"none\",\n          stroke: \"#cccccc\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), chartData.map((day, index) => {\n          const x = getX(index);\n          const y = getY(day.hours);\n          const dateNum = day.date.getDate();\n          const dayAbbr = day.day || ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][day.date.getDay()];\n          return /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: x,\n              cy: y,\n              r: \"5\",\n              fill: getQualityColor(day.quality),\n              stroke: \"#cccccc\",\n              strokeWidth: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: y - 15,\n              fontSize: \"10\",\n              fill: \"#333\",\n              textAnchor: \"middle\",\n              children: [day.hours.toFixed(1), \"h\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 15,\n              fontSize: config.fontSize.xAxis,\n              textAnchor: \"middle\",\n              className: \"x-axis-day-label\",\n              children: dayAbbr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              x: x,\n              y: config.height - config.padding.bottom + 30,\n              fontSize: config.fontSize.xAxis - 1,\n              textAnchor: \"middle\",\n              className: \"x-axis-date-label\",\n              fill: \"var(--chart-color-text-secondary)\",\n              children: dateNum\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sleep-chart-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"chart-title\",\n        children: \"Sleep Quality & Duration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"chart-subtitle\",\n        children: nav.getFormattedDateRange()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this), accessType === 'Admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${!useLineChart ? 'active' : ''}`,\n          onClick: () => setUseLineChart(false),\n          children: \"Bar Chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${useLineChart ? 'active' : ''}`,\n          onClick: () => setUseLineChart(true),\n          children: \"Line Chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 9\n    }, this), useLineChart ? /*#__PURE__*/_jsxDEV(SleepLineChart, {\n      data: weekData,\n      isExpanded: isExpanded,\n      extendedData: extendedChartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sleep-chart\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sleep-quality-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sleep-quality-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sleep-quality-indicator\",\n            style: {\n              backgroundColor: getQualityColor(day.quality)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 19\n          }, this)\n        }, `quality-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bed-icons-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bed-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bed-icon-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              viewBox: \"0 0 486.5 225.1\",\n              className: \"bed-icon\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M471.9,68.9c-8,0-14.5,6.5-14.5,14.5v68.6H26.1l-.6-139.3c0-7-5.8-12.7-12.8-12.7h0C5.7,0,0,5.7,0,12.8v199.6c0,7,5.7,12.8,12.7,12.8s12.8-5.7,12.8-12.8v-37h431.9v35.2c0,8,6.5,14.5,14.5,14.5s14.5-6.5,14.5-14.5v-127.1c0-8-6.5-14.5-14.5-14.5ZM483.7,210.6c0,6.5-5.3,11.8-11.8,11.8s-11.8-5.3-11.8-11.8v-38H22.7v39.7c0,5.5-4.5,10-10,10s-10-4.5-10-10V12.8C2.8,7.3,7.3,2.8,12.7,2.8h0c5.5,0,9.9,4.5,10,9.9l.6,142.1h436.8v-71.4c0-6.5,5.3-11.7,11.8-11.7s11.8,5.3,11.8,11.7v127.1Z\",\n                fill: \"#D2B48C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M29.9,94.2v54.5h425.4v-54.5H29.9ZM452.5,145.9H32.7v-48.9h419.8v48.9Z\",\n                fill: \"#e0e0e0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                x: \"32.7\",\n                y: \"97\",\n                width: `${day.hours / 10 * 419.8}`,\n                height: \"48.9\",\n                fill: \"#FF4500\",\n                className: \"sleep-fill-rect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M112.8,46.3h-55.4c-12.1,0-22,9.9-22,22s9.9,22,22,22h55.4c12.1,0,22-9.9,22-22s-9.9-22-22-22ZM112.8,87.5h-55.4c-10.6,0-19.2-8.6-19.2-19.2s8.6-19.2,19.2-19.2h55.4c10.6,0,19.2,8.6,19.2,19.2s-8.6,19.2-19.2,19.2Z\",\n                fill: \"#FFFFFF\",\n                stroke: \"#AAAAAA\",\n                strokeWidth: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 19\n          }, this)\n        }, `bed-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sleep-info-row\",\n        children: weekData.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sleep-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sleep-hours\",\n            children: [day.hours.toFixed(1), \"h\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"day-label\",\n            children: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][(() => {\n              const date = new Date(day.date);\n              return !isNaN(date.getTime()) ? date.getDay() : 0;\n            })()]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-label\",\n            children: (() => {\n              const date = new Date(day.date);\n              return !isNaN(date.getTime()) ? date.getDate() : 'Invalid';\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 19\n          }, this)]\n        }, `info-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      title: \"Sleep Quality\",\n      items: legendItems,\n      hide: screenshotMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }, this), weekSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Week Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.avgHours, \" hours/night\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.totalHours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Sleep Consistency:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [\"\\xB1\", weekSummary.avgVariation, \" hours variation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Quality:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [weekSummary.averageQuality, \" (Score: \", weekSummary.avgQualityScore, \"/4.0)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 13\n      }, this), showThreeMonthSummaries && threeMonthSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"3-Month Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.avgHours, \" hours/night\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Total Sleep:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.totalHours, \" hours\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Sleep Consistency:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [\"\\xB1\", threeMonthSummary.avgVariation, \" hours variation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-label\",\n              children: \"Average Quality:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stat-value\",\n              children: [threeMonthSummary.averageQuality, \" (Score: \", threeMonthSummary.avgQualityScore, \"/4.0)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 369,\n    columnNumber: 7\n  }, this);\n};\n_s(SleepChart, \"/4Tq/zlVNmLCF1HMy+i3gDmUbWo=\", false, function () {\n  return [usePatientData, useChartNavigation];\n});\n_c = SleepChart;\nexport default SleepChart;\nvar _c;\n$RefreshReg$(_c, \"SleepChart\");","map":{"version":3,"names":["React","useState","useRef","usePatientData","useChartNavigation","Legend","jsxDEV","_jsxDEV","SleepChart","patientId","isExpanded","onExpand","accessType","navigation","screenshotMode","showThreeMonthSummaries","_s","sleepData","loading","error","shouldForceBarChart","shouldForceLineChart","initialUseLineChart","useLineChart","setUseLineChart","internalNavigation","nav","start","startOfWeek","end","endOfWeek","getDateRange","weekData","filter","d","date","prevWeekStart","Date","setDate","getDate","prevWeekEnd","prevWeekData","nextWeekStart","nextWeekEnd","nextWeekData","startOfThreeMonths","endOfThreeMonths","getThreeMonthRange","threeMonthData","qualityLevels","getQualityColor","quality","legendItems","Object","entries","map","label","color","extendedChartData","allWeeksData","dateMap","Map","forEach","item","dateKey","toDateString","set","data","weekLabels","weekStarts","week","weekStart","day","get","hours","push","getDay","weekLabel","weekSummary","length","totalHours","reduce","sum","avgHours","toFixed","qualityCounts","keys","undefined","mostCommonQuality","sort","a","b","hourVariations","Math","abs","parseFloat","avgVariation","v","qualityScores","avgQualityScore","qualityAssessment","getQualityFromScore","score","averageQuality","adequateSleepNights","mostCommonQualityCount","daysTracked","threeMonthSummary","SleepLineChart","extendedData","isExtendedView","chartData","maxHours","max","minHours","range","padding","config","width","height","top","right","bottom","left","fontSize","yAxis","xAxis","chartWidth","chartHeight","dayWidth","getX","index","getY","pathData","x","y","join","className","children","viewBox","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","fileName","_jsxFileName","lineNumber","columnNumber","textAnchor","fill","weekIndex","dateNum","dayAbbr","cx","cy","r","getFormattedDateRange","onClick","style","backgroundColor","isNaN","getTime","title","items","hide","_c","$RefreshReg$"],"sources":["C:/Users/Matteo/Working_Folder/a. MCC Thesis Local Experimental/PGHD_Visualization_Dashboard/src/components/patient_charts/SleepChart.js"],"sourcesContent":["/*\n SleepChart.js - Sleep Pattern Monitoring Visualization\n \n This component provides sleep tracking with sleep duration and quality rating visualization. It includes weekly sleep pattern analysis with color-coded sleep quality indicators. It provides interactive tooltips with sleep details and includes navigation controls for time periods. It integrates with patient data and chart navigation. The component uses custom SVG for bar chart visualization and implements a sleep quality categorization system. It provides color-coded quality indicators for interpretation and supports expandable views. It implements time-based navigation and data filtering. Visualization features include a bar chart showing daily sleep duration, color-coded quality indicators for Very good, Fairly good, Fairly bad, and Very bad sleep quality, interactive tooltips with detailed sleep information, design that adapts to container size, and dynamic Y-axis scaling based on sleep duration range. Sleep quality categories include Very good for optimal sleep quality, Fairly good for good sleep quality, Fairly bad for poor sleep quality, and Very bad for very poor sleep quality. Clinical features include sleep duration tracking with recommended ranges, quality assessment based on subjective ratings, sleep consistency analysis, summary statistics for physician view, and trend analysis over time periods. Component structure includes a main SVG container with sizing for the chart container, duration scale with hour-based labeling on the Y-axis, day-of-week labels with date information on the X-axis, sleep duration bars with quality color coding for data bars, sleep quality explanations in the legend, and detailed sleep information on hover in tooltips. This component is used for sleep hygiene monitoring and sleep disorder assessment.\n */\n\nimport React, { useState, useRef } from 'react';\n\nimport usePatientData from '../../hooks/usePatientData';\nimport useChartNavigation from '../../hooks/useChartNavigation';\nimport Legend from '../Legend';\nimport './SleepChart.css';\n\n\nconst SleepChart = ({ patientId, isExpanded, onExpand, accessType = 'Admin', navigation, screenshotMode = false, showThreeMonthSummaries = false }) => {\n  const { sleepData, loading, error } = usePatientData(patientId);\n  // For Patient access, force Bar Chart (remove Line Chart access).\n  // For Physician access, force Line Chart (remove Bar Chart access).\n  // Admin can toggle between both.\n  const shouldForceBarChart = accessType === 'Patient';\n  const shouldForceLineChart = accessType === 'Physician';\n  \n  // Determine initial chart view based on access type\n  let initialUseLineChart = false;\n  if (shouldForceBarChart) {\n    initialUseLineChart = false;\n  } else if (shouldForceLineChart) {\n    initialUseLineChart = true;\n  }\n  \n  const [useLineChart, setUseLineChart] = useState(initialUseLineChart); // Toggle state for chart view\n  \n  // Use navigation from parent or fallback to internal navigation\n  const internalNavigation = useChartNavigation('sleep');\n  const nav = navigation || internalNavigation;\n\n  const { start: startOfWeek, end: endOfWeek } = nav.getDateRange();\n  const weekData = sleepData.filter(d => d.date >= startOfWeek && d.date <= endOfWeek);\n\n  // Get previous week data\n  const prevWeekStart = new Date(startOfWeek);\n  prevWeekStart.setDate(prevWeekStart.getDate() - 7);\n  const prevWeekEnd = new Date(startOfWeek);\n  prevWeekEnd.setDate(prevWeekEnd.getDate() - 1);\n  const prevWeekData = sleepData.filter(d => d.date >= prevWeekStart && d.date <= prevWeekEnd);\n\n  // Get next week data\n  const nextWeekStart = new Date(endOfWeek);\n  nextWeekStart.setDate(nextWeekStart.getDate() + 1);\n  const nextWeekEnd = new Date(nextWeekStart);\n  nextWeekEnd.setDate(nextWeekEnd.getDate() + 6);\n  const nextWeekData = sleepData.filter(d => d.date >= nextWeekStart && d.date <= nextWeekEnd);\n\n  // Get 3-month data\n  const { start: startOfThreeMonths, end: endOfThreeMonths } = nav.getThreeMonthRange();\n  const threeMonthData = sleepData.filter(d => d.date >= startOfThreeMonths && d.date <= endOfThreeMonths);\n\n  const qualityLevels = {\n    'Very good': 'var(--chart-color-sleep-very-good)',\n    'Fairly good': 'var(--chart-color-sleep-fairly-good)',\n    'Fairly bad': 'var(--chart-color-sleep-fairly-bad)',\n    'Very bad': 'var(--chart-color-sleep-very-bad)',\n  };\n\n  const getQualityColor = (quality) => qualityLevels[quality] || '#D3D3D3';\n\n  const legendItems = Object.entries(qualityLevels).map(([label, color]) => ({\n    label,\n    color,\n  }));\n\n  // Process data for extended chart (3 weeks)\n  let extendedChartData = [];\n  if (isExpanded) {\n\n    // Combine all three weeks of data\n    const allWeeksData = [...prevWeekData, ...weekData, ...nextWeekData];\n    \n    // Create a map of dates to sleep data for all 3 weeks\n    const dateMap = new Map();\n    allWeeksData.forEach(item => {\n      const dateKey = item.date.toDateString();\n      dateMap.set(dateKey, item);\n    });\n\n    // Generate chart data for all 21 days (3 weeks)\n    const data = [];\n    const weekLabels = ['Prev Week', 'Current Week', 'Next Week'];\n    const weekStarts = [prevWeekStart, startOfWeek, nextWeekStart];\n    \n    for (let week = 0; week < 3; week++) {\n      const weekStart = weekStarts[week];\n      \n      for (let day = 0; day < 7; day++) {\n        const date = new Date(weekStart);\n        date.setDate(date.getDate() + day);\n        const dateKey = date.toDateString();\n        const sleepData = dateMap.get(dateKey) || { hours: 0, quality: 'Very bad' };\n        \n        data.push({\n          date,\n          day: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][date.getDay()],\n          hours: sleepData.hours,\n          quality: sleepData.quality,\n          color: getQualityColor(sleepData.quality),\n          week: week,\n          weekLabel: weekLabels[week]\n        });\n      }\n    }\n\n    extendedChartData = data;\n  }\n\n  // Calculate summary statistics for physician view\n  let weekSummary = null;\n  if (weekData && weekData.length > 0) {\n\n    const totalHours = weekData.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / weekData.length).toFixed(1);\n\n    // Count quality levels\n    const qualityCounts = {};\n    Object.keys(qualityLevels).forEach(quality => {\n      qualityCounts[quality] = 0;\n    });\n\n    weekData.forEach(day => {\n      if (qualityCounts[day.quality] !== undefined) {\n        qualityCounts[day.quality]++;\n      }\n    });\n\n    // Find most common quality\n    const mostCommonQuality = Object.entries(qualityCounts)\n      .sort(([,a], [,b]) => b - a)[0];\n\n    // Calculate sleep consistency (how much variation in sleep hours)\n    const hourVariations = weekData.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Sleep quality score (Very good=0, Fairly good=1, Fairly bad=2, Very bad=3) - matches Python code\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = weekData.reduce((sum, day) => sum + (qualityScores[day.quality] || 0), 0) / weekData.length;\n    const qualityAssessment = avgQualityScore <= 0.5 ? 'Good' : avgQualityScore <= 1.5 ? 'Fair' : 'Poor';\n    \n    // Map average score back to quality category (round to nearest) - lower scores are better\n    const getQualityFromScore = (score) => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n\n    // Count nights with adequate sleep (7+ hours)\n    const adequateSleepNights = weekData.filter(day => day.hours >= 7).length;\n\n    weekSummary = {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      mostCommonQuality: mostCommonQuality[0],\n      mostCommonQualityCount: mostCommonQuality[1],\n      avgVariation,\n      qualityAssessment,\n      adequateSleepNights,\n      daysTracked: weekData.length,\n      avgQualityScore: avgQualityScore.toFixed(2),\n      averageQuality\n    };\n  }\n\n  // Calculate 3-month summary statistics for physician view\n  let threeMonthSummary = null;\n  if (threeMonthData && threeMonthData.length > 0) {\n\n    const totalHours = threeMonthData.reduce((sum, day) => sum + day.hours, 0);\n    const avgHours = (totalHours / threeMonthData.length).toFixed(1);\n\n    // Count quality levels\n    const qualityCounts = {};\n    Object.keys(qualityLevels).forEach(quality => {\n      qualityCounts[quality] = 0;\n    });\n\n    threeMonthData.forEach(day => {\n      if (qualityCounts[day.quality] !== undefined) {\n        qualityCounts[day.quality]++;\n      }\n    });\n\n    // Find most common quality\n    const mostCommonQuality = Object.entries(qualityCounts)\n      .sort(([,a], [,b]) => b - a)[0];\n\n    // Calculate sleep consistency (how much variation in sleep hours)\n    const hourVariations = threeMonthData.map(day => Math.abs(day.hours - parseFloat(avgHours)));\n    const avgVariation = (hourVariations.reduce((sum, v) => sum + v, 0) / hourVariations.length).toFixed(1);\n\n    // Sleep quality score (Very good=0, Fairly good=1, Fairly bad=2, Very bad=3) - matches Python code\n    const qualityScores = {\n      'Very good': 0,\n      'Fairly good': 1,\n      'Fairly bad': 2,\n      'Very bad': 3\n    };\n    const avgQualityScore = threeMonthData.reduce((sum, day) => sum + (qualityScores[day.quality] || 0), 0) / threeMonthData.length;\n    \n    // Map average score back to quality category (round to nearest) - lower scores are better\n    const getQualityFromScore = (score) => {\n      if (score <= 0.5) return 'Very good';\n      if (score <= 1.5) return 'Fairly good';\n      if (score <= 2.5) return 'Fairly bad';\n      return 'Very bad';\n    };\n    const averageQuality = getQualityFromScore(avgQualityScore);\n\n    threeMonthSummary = {\n      totalHours: totalHours.toFixed(1),\n      avgHours,\n      mostCommonQuality: mostCommonQuality[0],\n      mostCommonQualityCount: mostCommonQuality[1],\n      avgVariation,\n      daysTracked: threeMonthData.length,\n      avgQualityScore: avgQualityScore.toFixed(2),\n      averageQuality\n    };\n  }\n\n  // Line Chart Component for Sleep Duration\n  const SleepLineChart = ({ data, isExpanded, extendedData }) => {\n    const isExtendedView = isExpanded && extendedData && extendedData.length > 0;\n    const chartData = isExtendedView ? extendedData : data;\n    \n    if (!chartData || chartData.length === 0) return null;\n\n    const maxHours = chartData.length > 0 ? Math.max(...chartData.map(d => d.hours)) : 0;\n    const minHours = 0; // Always start Y-axis at 0\n    const range = Math.max(maxHours - minHours, 1); // Ensure minimum range of 1\n    const padding = Math.max(range * 0.1, 0.5); // 10% padding, minimum 0.5\n    \n    const config = {\n      width: isExtendedView ? 900 : (isExpanded ? 600 : 400), // Wider for 3-week view\n      height: isExpanded ? 220 : 150, // Reduced height since we removed week labels\n      padding: { top: 20, right: 30, bottom: 50, left: 50 }, // Reduced bottom padding\n      fontSize: {\n        yAxis: isExpanded ? 10 : 8,\n        xAxis: isExpanded ? 10 : 8,\n      }\n    };\n\n    const chartWidth = config.width - config.padding.left - config.padding.right;\n    const chartHeight = config.height - config.padding.top - config.padding.bottom;\n    const dayWidth = chartWidth / (chartData.length - 1); // Dynamic based on data length\n\n    const getX = (index) => config.padding.left + (index * dayWidth);\n    const getY = (hours) => config.padding.top + chartHeight - ((hours - minHours + padding) / (range + 2 * padding)) * chartHeight;\n\n    const pathData = chartData.map((day, index) => {\n      const x = getX(index);\n      const y = getY(day.hours);\n      return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;\n    }).join(' ');\n\n    return (\n      <div className=\"sleep-line-chart\">\n        <svg width=\"100%\" height=\"100%\" viewBox={`0 0 ${config.width} ${config.height}`}>\n          {/* Grid lines */}\n          {[0, 2, 4, 6, 8, 10, 12].map(hours => {\n            if (hours > maxHours + padding) return null; // Don't show grid lines above data range\n            const y = getY(hours);\n            return (\n              <g key={hours}>\n                <line \n                  x1={config.padding.left} \n                  y1={y} \n                  x2={config.width - config.padding.right} \n                  y2={y} \n                  stroke=\"#e0e0e0\" \n                  strokeWidth=\"1\" \n                  strokeDasharray=\"2,2\"\n                />\n                <text \n                  x={config.padding.left - 10} \n                  y={y + 3} \n                  fontSize={config.fontSize.yAxis} \n                  textAnchor=\"end\" \n                  fill=\"var(--chart-color-text-secondary)\"\n                >\n                  {hours}h\n                </text>\n              </g>\n            );\n          })}\n\n          {/* Week separators for extended view */}\n          {isExtendedView && [7, 14].map(weekIndex => {\n            const x = config.padding.left + (weekIndex * dayWidth);\n            return (\n              <line \n                key={weekIndex}\n                x1={x} \n                y1={config.padding.top} \n                x2={x} \n                y2={config.height - config.padding.bottom} \n                stroke=\"#ccc\" \n                strokeWidth=\"2\" \n                strokeDasharray=\"5,5\"\n              />\n            );\n          })}\n          \n          {/* Line path */}\n          <path d={pathData} fill=\"none\" stroke=\"#cccccc\" strokeWidth=\"2\" />\n          \n          {/* Data points */}\n          {chartData.map((day, index) => {\n            const x = getX(index);\n            const y = getY(day.hours);\n            const dateNum = day.date.getDate();\n            const dayAbbr = day.day || ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][day.date.getDay()];\n            \n            return (\n              <g key={index}>\n                <circle \n                  cx={x} \n                  cy={y} \n                  r=\"5\" \n                  fill={getQualityColor(day.quality)}\n                  stroke=\"#cccccc\"\n                  strokeWidth=\"2\"\n                />\n                <text x={x} y={y - 15} fontSize=\"10\" fill=\"#333\" textAnchor=\"middle\">\n                  {day.hours.toFixed(1)}h\n                </text>\n                <text \n                  x={x} \n                  y={config.height - config.padding.bottom + 15} \n                  fontSize={config.fontSize.xAxis} \n                  textAnchor=\"middle\" \n                  className=\"x-axis-day-label\"\n                >\n                  {dayAbbr}\n                </text>\n                <text \n                  x={x} \n                  y={config.height - config.padding.bottom + 30} \n                  fontSize={config.fontSize.xAxis - 1} \n                  textAnchor=\"middle\" \n                  className=\"x-axis-date-label\"\n                  fill=\"var(--chart-color-text-secondary)\"\n                >\n                  {dateNum}\n                </text>\n              </g>\n            );\n          })}\n        </svg>\n      </div>\n    );\n  };\n\n  return (\n      <div className=\"sleep-chart-content\">\n        <div className=\"sleep-header\">\n          <h3 className=\"chart-title\">Sleep Quality & Duration</h3>\n          <h4 className=\"chart-subtitle\">{nav.getFormattedDateRange()}</h4>\n          \n          {/* View Toggle - Hide for Patient and Physician, show both for Admin */}\n          {accessType === 'Admin' && (\n            <div className=\"view-toggle\">\n              <button \n                className={`toggle-btn ${!useLineChart ? 'active' : ''}`}\n                onClick={() => setUseLineChart(false)}\n              >\n                Bar Chart\n              </button>\n              <button \n                className={`toggle-btn ${useLineChart ? 'active' : ''}`}\n                onClick={() => setUseLineChart(true)}\n              >\n                Line Chart\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Conditional Chart Rendering */}\n        {useLineChart ? (\n          <SleepLineChart \n            data={weekData} \n            isExpanded={isExpanded} \n            extendedData={extendedChartData}\n          />\n        ) : (\n          <div className=\"sleep-chart\">\n            {/* Sleep Quality Indicators Row */}\n            <div className=\"sleep-quality-row\">\n              {weekData.map((day, index) => (\n                <div key={`quality-${index}`} className=\"sleep-quality-item\">\n                  <div \n                    className=\"sleep-quality-indicator\"\n                    style={{ backgroundColor: getQualityColor(day.quality) }}\n                  ></div>\n                </div>\n              ))}\n            </div>\n            \n            {/* Bed Icons Row */}\n            <div className=\"bed-icons-row\">\n              {weekData.map((day, index) => (\n                <div key={`bed-${index}`} className=\"bed-item\">\n                  <div className=\"bed-icon-wrapper\">\n                    <svg viewBox=\"0 0 486.5 225.1\" className=\"bed-icon\">\n                      <path d=\"M471.9,68.9c-8,0-14.5,6.5-14.5,14.5v68.6H26.1l-.6-139.3c0-7-5.8-12.7-12.8-12.7h0C5.7,0,0,5.7,0,12.8v199.6c0,7,5.7,12.8,12.7,12.8s12.8-5.7,12.8-12.8v-37h431.9v35.2c0,8,6.5,14.5,14.5,14.5s14.5-6.5,14.5-14.5v-127.1c0-8-6.5-14.5-14.5-14.5ZM483.7,210.6c0,6.5-5.3,11.8-11.8,11.8s-11.8-5.3-11.8-11.8v-38H22.7v39.7c0,5.5-4.5,10-10,10s-10-4.5-10-10V12.8C2.8,7.3,7.3,2.8,12.7,2.8h0c5.5,0,9.9,4.5,10,9.9l.6,142.1h436.8v-71.4c0-6.5,5.3-11.7,11.8-11.7s11.8,5.3,11.8,11.7v127.1Z\" fill=\"#D2B48C\"/>\n                      <path d=\"M29.9,94.2v54.5h425.4v-54.5H29.9ZM452.5,145.9H32.7v-48.9h419.8v48.9Z\" fill=\"#e0e0e0\"/>\n                      <rect x=\"32.7\" y=\"97\" width={`${(day.hours / 10) * 419.8}`} height=\"48.9\" fill=\"#FF4500\" className=\"sleep-fill-rect\" />\n                      <path d=\"M112.8,46.3h-55.4c-12.1,0-22,9.9-22,22s9.9,22,22,22h55.4c12.1,0,22-9.9,22-22s-9.9-22-22-22ZM112.8,87.5h-55.4c-10.6,0-19.2-8.6-19.2-19.2s8.6-19.2,19.2-19.2h55.4c10.6,0,19.2,8.6,19.2,19.2s-8.6,19.2-19.2,19.2Z\" fill=\"#FFFFFF\" stroke=\"#AAAAAA\" strokeWidth=\"1\"/>\n                    </svg>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            {/* Sleep Information Row */}\n            <div className=\"sleep-info-row\">\n              {weekData.map((day, index) => (\n                <div key={`info-${index}`} className=\"sleep-info-item\">\n                  <div className=\"sleep-hours\">{day.hours.toFixed(1)}h</div>\n                  <div className=\"day-label\">{['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][(() => {\n                    const date = new Date(day.date);\n                    return !isNaN(date.getTime()) ? date.getDay() : 0;\n                  })()]}</div>\n                  <div className=\"date-label\">{(() => {\n                    const date = new Date(day.date);\n                    return !isNaN(date.getTime()) ? date.getDate() : 'Invalid';\n                  })()}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        <Legend title=\"Sleep Quality\" items={legendItems} hide={screenshotMode} />\n\n        {/* Show summary for physician/unified view */}\n        {weekSummary && (\n          <div className=\"summary-container\">\n            <div className=\"chart-summary\">\n              <h4>Week Summary</h4>\n              <div className=\"summary-stats\">\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Average Sleep:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgHours} hours/night\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Total Sleep:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.totalHours} hours\n                  </span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Sleep Consistency:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.avgVariation} hours variation\n                  </span>\n                </div>\n\n                <div className=\"stat-item\">\n                  <span className=\"stat-label\">Average Quality:</span>\n                  <span className=\"stat-value\">\n                    {weekSummary.averageQuality} (Score: {weekSummary.avgQualityScore}/4.0)\n                  </span>\n                </div>\n\n              </div>\n            </div>\n            \n            {showThreeMonthSummaries && threeMonthSummary && (\n              <div className=\"chart-summary\">\n                <h4>3-Month Summary</h4>\n                <div className=\"summary-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Average Sleep:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgHours} hours/night\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Total Sleep:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.totalHours} hours\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Sleep Consistency:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.avgVariation} hours variation\n                    </span>\n                  </div>\n\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">Average Quality:</span>\n                    <span className=\"stat-value\">\n                      {threeMonthSummary.averageQuality} (Score: {threeMonthSummary.avgQualityScore}/4.0)\n                    </span>\n                  </div>\n\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n  );\n};\n\nexport default SleepChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}